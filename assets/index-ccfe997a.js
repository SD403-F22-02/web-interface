var Yv=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var FU=Yv((ee,ne)=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();function Fe(){}function ur(t,n){for(const e in n)t[e]=n[e];return t}function Rh(t){return t()}function Ku(){return Object.create(null)}function bi(t){t.forEach(Rh)}function Ih(t){return typeof t=="function"}function Oi(t,n){return t!=t?n==n:t!==n||t&&typeof t=="object"||typeof t=="function"}function Xv(t){return Object.keys(t).length===0}function kh(t){const n={};for(const e in t)e[0]!=="$"&&(n[e]=t[e]);return n}function ha(t,n){const e={};n=new Set(n);for(const r in t)!n.has(r)&&r[0]!=="$"&&(e[r]=t[r]);return e}function Qu(t){return t??""}function It(t,n){t.appendChild(n)}function cr(t,n,e){t.insertBefore(n,e||null)}function on(t){t.parentNode&&t.parentNode.removeChild(t)}function se(t){return document.createElement(t)}function Qi(t){return document.createTextNode(t)}function Be(){return Qi(" ")}function jr(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function ni(t,n,e){e==null?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function Ju(t,n){const e=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in n)n[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=n[r]:r==="__value"?t.value=t[r]=n[r]:e[r]&&e[r].set?t[r]=n[r]:ni(t,r,n[r])}function Zv(t){return Array.from(t.childNodes)}function tc(t,n){n=""+n,t.data!==n&&(t.data=n)}function Kv(t,n,{bubbles:e=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e,r,n),i}let ri;function qr(t){ri=t}function Nh(){if(!ri)throw new Error("Function called outside component initialization");return ri}function Qv(t){Nh().$$.on_mount.push(t)}function Jv(){const t=Nh();return(n,e,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[n];if(i){const a=Kv(n,e,{cancelable:r});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}function Bo(t,n){const e=t.$$.callbacks[n.type];e&&e.slice().forEach(r=>r.call(this,n))}const qn=[],fr=[];let nr=[];const xs=[],tg=Promise.resolve();let bs=!1;function eg(){bs||(bs=!0,tg.then(Bh))}function Os(t){nr.push(t)}function Ts(t){xs.push(t)}const Uo=new Set;let $n=0;function Bh(){if($n!==0)return;const t=ri;do{try{for(;$n<qn.length;){const n=qn[$n];$n++,qr(n),ng(n.$$)}}catch(n){throw qn.length=0,$n=0,n}for(qr(null),qn.length=0,$n=0;fr.length;)fr.pop()();for(let n=0;n<nr.length;n+=1){const e=nr[n];Uo.has(e)||(Uo.add(e),e())}nr.length=0}while(qn.length);for(;xs.length;)xs.pop()();bs=!1,Uo.clear(),qr(t)}function ng(t){if(t.fragment!==null){t.update(),bi(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(Os)}}function rg(t){const n=[],e=[];nr.forEach(r=>t.indexOf(r)===-1?n.push(r):e.push(r)),e.forEach(r=>r()),nr=n}const Ji=new Set;let ig;function ii(t,n){t&&t.i&&(Ji.delete(t),t.i(n))}function da(t,n,e,r){if(t&&t.o){if(Ji.has(t))return;Ji.add(t),ig.c.push(()=>{Ji.delete(t),r&&(e&&t.d(1),r())}),t.o(n)}else r&&r()}function Uh(t,n){const e={},r={},i={$$scope:1};let a=t.length;for(;a--;){const o=t[a],s=n[a];if(s){for(const l in o)l in s||(r[l]=1);for(const l in s)i[l]||(e[l]=s[l],i[l]=1);t[a]=s}else for(const l in o)i[l]=1}for(const o in r)o in e||(e[o]=void 0);return e}function ag(t){return typeof t=="object"&&t!==null?t:{}}function ws(t,n,e){const r=t.$$.props[n];r!==void 0&&(t.$$.bound[r]=e,e(t.$$.ctx[r]))}function pa(t){t&&t.c()}function ai(t,n,e,r){const{fragment:i,after_update:a}=t.$$;i&&i.m(n,e),r||Os(()=>{const o=t.$$.on_mount.map(Rh).filter(Ih);t.$$.on_destroy?t.$$.on_destroy.push(...o):bi(o),t.$$.on_mount=[]}),a.forEach(Os)}function oi(t,n){const e=t.$$;e.fragment!==null&&(rg(e.after_update),bi(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function og(t,n){t.$$.dirty[0]===-1&&(qn.push(t),eg(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function Ti(t,n,e,r,i,a,o,s=[-1]){const l=ri;qr(t);const u=t.$$={fragment:null,ctx:[],props:a,update:Fe,not_equal:i,bound:Ku(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(l?l.$$.context:[])),callbacks:Ku(),dirty:s,skip_bound:!1,root:n.target||l.$$.root};o&&o(u.root);let c=!1;if(u.ctx=e?e(t,n.props||{},(f,h,...p)=>{const d=p.length?p[0]:h;return u.ctx&&i(u.ctx[f],u.ctx[f]=d)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](d),c&&og(t,f)),h}):[],u.update(),c=!0,bi(u.before_update),u.fragment=r?r(u.ctx):!1,n.target){if(n.hydrate){const f=Zv(n.target);u.fragment&&u.fragment.l(f),f.forEach(on)}else u.fragment&&u.fragment.c();n.intro&&ii(t.$$.fragment),ai(t,n.target,n.anchor,n.customElement),Bh()}qr(l)}class wi{$destroy(){oi(this,1),this.$destroy=Fe}$on(n,e){if(!Ih(e))return Fe;const r=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return r.push(e),()=>{const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}$set(n){this.$$set&&!Xv(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}let sn,Te,Yr;const Xr=new TextDecoder("utf-8");let si="",ec;const sg=t=>new Promise(n=>setTimeout(n,t)),lg=t=>{const[n,e,r,i]=t.split(",").map(parseFloat);return{time_ms:n,roll:e,pitch:r,yaw:i}},$h=()=>{si=""},ug=async()=>(sn=await navigator.bluetooth.requestDevice({filters:[{name:"Arduino"},{name:"TheraTec Sensor"}],optionalServices:[22538]}),await sn.gatt.connect().then(t=>t.getPrimaryServices()).then(t=>t[0].getCharacteristics()).then(t=>{Yr=t[0],Te=t[1]}),await Yr.startNotifications(),await Te.startNotifications(),console.log(Yr,Te),$h(),sn),cg=async()=>sn?(console.log("forgetting device"),await sn.forget(),$h(),0):(console.log("No device to forget"),1),Vh=t=>{si=`Session Length: ${Xr.decode(t.target.value)}s`,console.log(si)},fg=async()=>sn?Te.writeValueWithResponse(new TextEncoder().encode("s")).then(()=>(Te.addEventListener("characteristicvaluechanged",Vh),console.log("sessionProgressReport event listener added"),0)):(console.log("No device paired"),1),hg=async()=>sn?(Te.removeEventListener("characteristicvaluechanged",Vh),console.log(`ProgressReport is currently ${si}`),Te.writeValueWithResponse(new TextEncoder().encode("x")).then(()=>Te.readValue()).then(t=>(ec=Xr.decode(t),console.log(ec),0))):(console.log("No device paired"),1),dg=async()=>{sn||console.log("No device selected!");let t=[];const n=e=>{let r=e.target.value;console.log(Xr.decode(r)),t.push(Xr.decode(r))};for(Yr.addEventListener("characteristicvaluechanged",n),console.log("sending g"),await Te.writeValueWithResponse(new TextEncoder().encode("g"));await sg(100),!Xr.decode(await Te.readValue()).includes("done"););return Yr.removeEventListener("characteristicvaluechanged",n),t=t.map(e=>lg(e)),t};function nc(t){let n,e,r;return{c(){n=se("button"),n.textContent="startSession"},m(i,a){cr(i,n,a),e||(r=jr(n,"click",t[13]),e=!0)},p:Fe,d(i){i&&on(n),e=!1,r()}}}function rc(t){let n,e,r;return{c(){n=se("button"),n.textContent="stopSession"},m(i,a){cr(i,n,a),e||(r=jr(n,"click",t[14]),e=!0)},p:Fe,d(i){i&&on(n),e=!1,r()}}}function pg(t){let n,e,r,i,a,o,s,l,u,c,f,h,p,d,g,m,y,v,_,E,x=!t[3]&&nc(t),O=t[3]&&rc(t);return{c(){n=se("section"),e=se("h1"),e.textContent="SD405-S23-02 Sensor Data",r=Be(),i=se("p"),a=Qi(t[2]),s=Be(),l=se("h4"),u=Qi("Paired to: "),c=Qi(t[0]),f=Be(),h=se("button"),h.textContent="pairDevice",p=Be(),d=se("button"),d.textContent="forgetDevice",g=Be(),m=se("button"),m.textContent="getSessionData",y=Be(),x&&x.c(),v=Be(),O&&O.c(),ni(i,"class",o=Qu(t[1])+" svelte-1kh5kgq")},m(P,S){cr(P,n,S),It(n,e),It(n,r),It(n,i),It(i,a),It(n,s),It(n,l),It(l,u),It(l,c),It(n,f),It(n,h),It(n,p),It(n,d),It(n,g),It(n,m),It(n,y),x&&x.m(n,null),It(n,v),O&&O.m(n,null),_||(E=[jr(h,"click",t[10]),jr(d,"click",t[11]),jr(m,"click",t[12])],_=!0)},p(P,[S]){S&4&&tc(a,P[2]),S&2&&o!==(o=Qu(P[1])+" svelte-1kh5kgq")&&ni(i,"class",o),S&1&&tc(c,P[0]),P[3]?x&&(x.d(1),x=null):x?x.p(P,S):(x=nc(P),x.c(),x.m(n,v)),P[3]?O?O.p(P,S):(O=rc(P),O.c(),O.m(n,null)):O&&(O.d(1),O=null)},i:Fe,o:Fe,d(P){P&&on(n),x&&x.d(),O&&O.d(),_=!1,bi(E)}}}function vg(t,n,e){let{sessionData:r}=n,i="No device paired",a="info",o="",s=!1;const l=(_,E)=>{e(1,a=_),e(2,o=E)},u=async()=>{l("info","Attempting to pair...");let _=await ug();e(0,i=_.name),l("success","Successfully paired")},c=async()=>{l("info","Getting session data..."),e(9,r=await dg()),l("success","Successfully received session data")},f=async()=>{if(await cg()){l("error","No device to forget");return}e(0,i="No device paired"),e(3,s=!1),l("success","Device forgotten")},h=async()=>{if(await fg()){l("error","No device paired.");return}e(3,s=!0),l("info","Start session command sent")},p=async()=>{if(await hg()){l("error","No device paired.");return}e(3,s=!1),l("info","Stop session command sent"),console.log(`Progress is ${si}`)},d=async()=>await u(),g=async()=>await f(),m=async()=>await c(),y=async()=>await h(),v=async()=>await p();return t.$$set=_=>{"sessionData"in _&&e(9,r=_.sessionData)},[i,a,o,s,u,c,f,h,p,r,d,g,m,y,v]}class gg extends wi{constructor(n){super(),Ti(this,n,vg,pg,Oi,{sessionData:9})}}var nt;(function(t){t.GRAPHICS_DOCUMENT="graphics-document",t.GRAPHICS_OBJECT="graphics-object",t.GRAPHICS_SYMBOL="graphics-symbol",t.GROUP="group",t.DOCUMENT="document",t.CHECKBOX="checkbox",t.BUTTON="button",t.MENU="menu",t.MENU_ITEM="menuitem",t.IMG="img"})(nt||(nt={}));var Es;(function(t){t.RENDER_FINISHED="render-finished",t.RESIZE="chart-resize",t.MOUSEOVER="chart-mouseover",t.MOUSEOUT="chart-mouseout"})(Es||(Es={}));var Ss;(function(t){t.SHOW="show-modal",t.HIDE="hide-modal"})(Ss||(Ss={}));var Ms;(function(t){t.UPDATE="model-update"})(Ms||(Ms={}));var As;(function(t){t.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",t.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",t.BUTTON_CLICK="toolbar-button-click"})(As||(As={}));var Cs;(function(t){t.UPDATE="zoom-bar-update",t.SELECTION_START="zoom-bar-selection-start",t.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",t.SELECTION_END="zoom-bar-selection-end"})(Cs||(Cs={}));var Ds;(function(t){t.CHANGE="zoom-domain-change"})(Ds||(Ds={}));var Ls;(function(t){t.CANVAS_ZOOM_IN="canvas-zoom-in",t.CANVAS_ZOOM_OUT="canvas-zoom-out"})(Ls||(Ls={}));var Ps;(function(t){t.LABEL_MOUSEOVER="axis-label-mouseover",t.LABEL_MOUSEMOVE="axis-label-mousemove",t.LABEL_CLICK="axis-label-click",t.LABEL_MOUSEOUT="axis-label-mouseout",t.LABEL_FOCUS="axis-label-focus",t.LABEL_BLUR="axis-label-blur",t.RENDER_COMPLETE="axis-render-complete"})(Ps||(Ps={}));var Rs;(function(t){t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout"})(Rs||(Rs={}));var Is;(function(t){t.WORD_MOUSEOVER="wordcloud-word-mouseover",t.WORD_MOUSEMOVE="wordcloud-word-mousemove",t.WORD_CLICK="wordcloud-word-click",t.WORD_MOUSEOUT="wordcloud-word-mouseout"})(Is||(Is={}));var ks;(function(t){t.SLICE_MOUSEOVER="pie-slice-mouseover",t.SLICE_MOUSEMOVE="pie-slice-mousemove",t.SLICE_CLICK="pie-slice-click",t.SLICE_MOUSEOUT="pie-slice-mouseout"})(ks||(ks={}));var Ns;(function(t){t.ARC_MOUSEOVER="gauge-arc-mouseover",t.ARC_MOUSEMOVE="gauge-arc-mousemove",t.ARC_CLICK="gauge-arc-click",t.ARC_MOUSEOUT="gauge-arc-mouseout"})(Ns||(Ns={}));var Bs;(function(t){t.BAR_MOUSEOVER="bar-mouseover",t.BAR_MOUSEMOVE="bar-mousemove",t.BAR_CLICK="bar-click",t.BAR_MOUSEOUT="bar-mouseout"})(Bs||(Bs={}));var Us;(function(t){t.BOX_MOUSEOVER="box-mouseover",t.BOX_MOUSEMOVE="box-mousemove",t.BOX_CLICK="box-click",t.BOX_MOUSEOUT="box-mouseout",t.OUTLIER_MOUSEOVER="outlier-mouseover",t.OUTLIER_MOUSEMOVE="outlier-mousemove",t.OUTLIER_CLICK="outlier-click",t.OUTLIER_MOUSEOUT="outlier-mouseout"})(Us||(Us={}));var $s;(function(t){t.SCATTER_MOUSEOVER="scatter-mouseover",t.SCATTER_MOUSEMOVE="scatter-mousemove",t.SCATTER_CLICK="scatter-click",t.SCATTER_MOUSEOUT="scatter-mouseout"})($s||($s={}));var Vs;(function(t){t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout"})(Vs||(Vs={}));var Hs;(function(t){t.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",t.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",t.X_AXIS_CLICK="radar-x-axis-click",t.X_AXIS_MOUSEOUT="radar-x-axis-mouseout"})(Hs||(Hs={}));var Fs;(function(t){t.NODE_MOUSEOVER="tree-node-mouseover",t.NODE_CLICK="tree-node-click",t.NODE_MOUSEOUT="tree-node-mouseout"})(Fs||(Fs={}));var Gs;(function(t){t.LEAF_MOUSEOVER="leaf-mouseover",t.LEAF_MOUSEMOVE="leaf-mousemove",t.LEAF_CLICK="leaf-click",t.LEAF_MOUSEOUT="leaf-mouseout"})(Gs||(Gs={}));var zs;(function(t){t.SHOW="show-tooltip",t.MOVE="move-tooltip",t.HIDE="hide-tooltip"})(zs||(zs={}));var Ws;(function(t){t.SHOW="show-threshold",t.HIDE="hide-threshold"})(Ws||(Ws={}));var js;(function(t){t.ITEM_HOVER="legend-item-onhover",t.ITEM_CLICK="legend-item-onclick",t.ITEM_MOUSEOUT="legend-item-onmouseout",t.ITEMS_UPDATE="legend-items-update"})(js||(js={}));var qs;(function(t){t.CIRCLE_MOUSEOVER="circle-leaf-mouseover",t.CIRCLE_CLICK="circle-leaf-click",t.CIRCLE_MOUSEOUT="circle-leaf-mouseout",t.CIRCLE_MOUSEMOVE="circle-leaf-mousemove"})(qs||(qs={}));var Ys;(function(t){t.NODE_MOUSEOVER="alluvial-node-mouseover",t.NODE_CLICK="alluvial-node-click",t.NODE_MOUSEOUT="alluvial-node-mouseout",t.NODE_MOUSEMOVE="alluvial-node-mousemove",t.LINE_MOUSEOVER="alluvial-line-mouseover",t.LINE_CLICK="alluvial-line-click",t.LINE_MOUSEOUT="alluvial-line-mouseout",t.LINE_MOUSEMOVE="alluvial-line-mousemove"})(Ys||(Ys={}));var Xs;(function(t){t.METER_MOUSEOVER="meter-mouseover",t.METER_CLICK="meter-click",t.METER_MOUSEOUT="meter-mouseout",t.METER_MOUSEMOVE="meter-mousemove"})(Xs||(Xs={}));var Zs;(function(t){t.HEATMAP_MOUSEOVER="heatmap-mouseover",t.HEATMAP_CLICK="heatmap-click",t.HEATMAP_MOUSEOUT="heatmap-mouseout",t.HEATMAP_MOUSEMOVE="hetmap-mousemove"})(Zs||(Zs={}));const mg=Object.freeze(Object.defineProperty({__proto__:null,get Alluvial(){return Ys},get Area(){return Rs},get Axis(){return Ps},get Bar(){return Bs},get Boxplot(){return Us},get CanvasZoom(){return Ls},get Chart(){return Es},get CirclePack(){return qs},get Gauge(){return Ns},get Heatmap(){return Zs},get Legend(){return js},get Line(){return Vs},get Meter(){return Xs},get Modal(){return Ss},get Model(){return Ms},get Pie(){return ks},get Radar(){return Hs},get Scatter(){return $s},get Threshold(){return Ws},get Toolbar(){return As},get Tooltip(){return zs},get Tree(){return Fs},get Treemap(){return Gs},get WordCloud(){return Is},get ZoomBar(){return Cs},get ZoomDomain(){return Ds}},Symbol.toStringTag,{value:"Module"}));var M=mg,Q;(function(t){t.HTML="html",t.SVG="svg"})(Q||(Q={}));var Ks;(function(t){t.WHITE="white",t.G100="g100",t.G90="g90",t.G10="g10"})(Ks||(Ks={}));var J;(function(t){t.BACKGROUND="background",t.FILL="fill",t.STROKE="stroke",t.TOOLTIP="tooltip"})(J||(J={}));var W;(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(W||(W={}));var he;(function(t){t.GRAPH_VIEW="graph_view",t.SLIDER_VIEW="slider_view"})(he||(he={}));var le;(function(t){t.END_LINE="end_line",t.MID_LINE="mid_line",t.FRONT_LINE="front_line",t.NONE="none"})(le||(le={}));var Pt;(function(t){t.VERTICAL="vertical",t.HORIZONTAL="horizontal"})(Pt||(Pt={}));var K;(function(t){t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio"})(K||(K={}));var rr;(function(t){t.RIGHT="right",t.LEFT="left",t.TOP="top",t.BOTTOM="bottom"})(rr||(rr={}));var Lt;(function(t){t.LEFT="left",t.CENTER="center",t.RIGHT="right"})(Lt||(Lt={}));var hr;(function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"})(hr||(hr={}));var va;(function(t){t.TREE="tree",t.DENDROGRAM="dendrogram"})(va||(va={}));var wt;(function(t){t.ROW="row",t.COLUMN="column",t.ROW_REVERSE="row-reverse",t.COLUMN_REVERSE="column-reverse"})(wt||(wt={}));var st;(function(t){t.FIXED="fixed",t.PREFERRED="preferred",t.STRETCH="stretch"})(st||(st={}));var dr;(function(t){t.CENTER="center"})(dr||(dr={}));var Zr;(function(t){t.LEFT="left",t.RIGHT="right"})(Zr||(Zr={}));var Dt;(function(t){t.GRID="grid",t.VERT_OR_HORIZ="vertOrHoriz",t.PIE="pie",t.DONUT="donut"})(Dt||(Dt={}));var _e;(function(t){t.START="start",t.MIDDLE="middle",t.END="end"})(_e||(_e={}));var xe;(function(t){t.BASELINE="baseline",t.MIDDLE="middle",t.HANGING="hanging"})(xe||(xe={}));var bn;(function(t){t.SEMI="semi",t.FULL="full"})(bn||(bn={}));var ga;(function(t){t.UP="up",t.DOWN="down"})(ga||(ga={}));var Kr;(function(t){t.SUCCESS="success",t.WARNING="warning",t.DANGER="danger"})(Kr||(Kr={}));var Qr;(function(t){t.ALWAYS="always",t.AUTO="auto",t.NEVER="never"})(Qr||(Qr={}));var Jt;(function(t){t.SCATTER="scatter",t.LINE="line",t.SIMPLE_BAR="simple-bar",t.STACKED_BAR="stacked-bar",t.GROUPED_BAR="grouped-bar",t.AREA="area",t.STACKED_AREA="stacked-area"})(Jt||(Jt={}));var Tt;(function(t){t.EXPORT_CSV="Export as CSV",t.EXPORT_PNG="Export as PNG",t.EXPORT_JPG="Export as JPG",t.ZOOM_IN="Zoom in",t.ZOOM_OUT="Zoom out",t.RESET_ZOOM="Reset zoom",t.MAKE_FULLSCREEN="Make fullscreen",t.SHOW_AS_DATATABLE="Show as data-table",t.CUSTOM="Custom"})(Tt||(Tt={}));var ma;(function(t){t.LEFT="left",t.RIGHT="right"})(ma||(ma={}));var Ct;(function(t){t.CHECKBOX="checkbox",t.RADIUS="radius",t.AREA="area",t.SIZE="size",t.LINE="line",t.QUARTILE="quartile",t.ZOOM="zoom"})(Ct||(Ct={}));var Jr;(function(t){t.LINEAR="linear",t.QUANTIZE="quantize"})(Jr||(Jr={}));var ir;(function(t){t.ON="on",t.AUTO="auto",t.OFF="off"})(ir||(ir={}));var li;(function(t){t.DEFAULT="default",t.HOVERABLE="hoverable"})(li||(li={}));const yg=t=>+t;function Hh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Vi,Wt="cds",Oe={opacity:{unselected:.05,selected:.4}},Ue={ticks:{number:7,rotateIfSmallerThan:30,verticalSpaceRatio:2.5,horizontalSpaceRatio:3.5},ratio:{reference:"value",compareTo:"marker"},paddingRatio:.1,hover:{rectanglePadding:4}},ar={duration:1e3,ease:Hh,zoomLevel:3},yn={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},hierarchyLevel:2},Zl={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},Qt={circle:{radius:4,opacity:{hovered:1,default:.3}},box:{opacity:{hovered:.5,default:.3}},strokeWidth:{default:1,thicker:2}},Fh={defaultBins:10},St={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},be={opacity:{unselected:.3,selected:1},weight:{selected:2,unselected:1}},kt={statusBar:{paddingRight:5},status:{indicatorSize:16,paddingLeft:15},total:{paddingLeft:36,paddingRight:24},height:{default:8,proportional:16},dividerWidth:2},yt={radiusOffset:-15,innerRadius:2,padAngle:.007,hoverArc:{outerRadiusOffset:3},xOffset:30,yOffset:20,yOffsetCallout:10,callout:{minSliceDegree:5,offsetX:15,offsetY:12,horizontalLineLength:8,textMargin:2}},an={opacity:{unselected:.1,selected:.3},xLabelPadding:10,yLabelPadding:8,yTicksNumber:4,minRange:10,xAxisRectHeight:50,dotsRadius:5},oe={nodeWidth:4,nodeHoveredWidth:8,minNodePadding:24,opacity:{unfocus:.3,default:.8,selected:1}},Qs={minCellDividerDimension:16,chartPadding:.5},Js={default:{size:24}},Gh={horizontalOffset:10},tl={default:{duration:300},pie_slice_mouseover:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},_g={buttonSize:32,iconSize:20,height:32,spacerHeight:10,iconPadding:6},Yt={height:(Vi={},Vi[he.GRAPH_VIEW]=32,Vi[he.SLIDER_VIEW]=10,Vi),spacerHeight:8,handleWidth:5,handleBarWidth:1,handleBarHeight:12},zh=[{type:Ct.RADIUS,name:"Radius"},{type:Ct.AREA,name:"Poor area"},{type:Ct.AREA,name:"Satisfactory area"},{type:Ct.AREA,name:"Great area"},{type:Ct.QUARTILE,name:"Quartiles"}],xg=typeof global=="object"&&global&&global.Object===Object&&global;const Wh=xg;var bg=typeof self=="object"&&self&&self.Object===Object&&self,Og=Wh||bg||Function("return this")();const ge=Og;var Tg=ge.Symbol;const ce=Tg;var jh=Object.prototype,wg=jh.hasOwnProperty,Eg=jh.toString,Dr=ce?ce.toStringTag:void 0;function Sg(t){var n=wg.call(t,Dr),e=t[Dr];try{t[Dr]=void 0;var r=!0}catch{}var i=Eg.call(t);return r&&(n?t[Dr]=e:delete t[Dr]),i}var Mg=Object.prototype,Ag=Mg.toString;function Cg(t){return Ag.call(t)}var Dg="[object Null]",Lg="[object Undefined]",ic=ce?ce.toStringTag:void 0;function Pn(t){return t==null?t===void 0?Lg:Dg:ic&&ic in Object(t)?Sg(t):Cg(t)}function Ae(t){return t!=null&&typeof t=="object"}var Pg="[object Symbol]";function uo(t){return typeof t=="symbol"||Ae(t)&&Pn(t)==Pg}function qh(t,n){for(var e=-1,r=t==null?0:t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}var Rg=Array.isArray;const Ut=Rg;var Ig=1/0,ac=ce?ce.prototype:void 0,oc=ac?ac.toString:void 0;function Yh(t){if(typeof t=="string")return t;if(Ut(t))return qh(t,Yh)+"";if(uo(t))return oc?oc.call(t):"";var n=t+"";return n=="0"&&1/t==-Ig?"-0":n}var kg=/\s/;function Ng(t){for(var n=t.length;n--&&kg.test(t.charAt(n)););return n}var Bg=/^\s+/;function Ug(t){return t&&t.slice(0,Ng(t)+1).replace(Bg,"")}function fe(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var sc=0/0,$g=/^[-+]0x[0-9a-f]+$/i,Vg=/^0b[01]+$/i,Hg=/^0o[0-7]+$/i,Fg=parseInt;function ti(t){if(typeof t=="number")return t;if(uo(t))return sc;if(fe(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=fe(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Ug(t);var e=Vg.test(t);return e||Hg.test(t)?Fg(t.slice(2),e?2:8):$g.test(t)?sc:+t}function Kl(t){return t}var Gg="[object AsyncFunction]",zg="[object Function]",Wg="[object GeneratorFunction]",jg="[object Proxy]";function Ql(t){if(!fe(t))return!1;var n=Pn(t);return n==zg||n==Wg||n==Gg||n==jg}var qg=ge["__core-js_shared__"];const $o=qg;var lc=function(){var t=/[^.]+$/.exec($o&&$o.keys&&$o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Yg(t){return!!lc&&lc in t}var Xg=Function.prototype,Zg=Xg.toString;function Rn(t){if(t!=null){try{return Zg.call(t)}catch{}try{return t+""}catch{}}return""}var Kg=/[\\^$.*+?()[\]{}|]/g,Qg=/^\[object .+?Constructor\]$/,Jg=Function.prototype,tm=Object.prototype,em=Jg.toString,nm=tm.hasOwnProperty,rm=RegExp("^"+em.call(nm).replace(Kg,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function im(t){if(!fe(t)||Yg(t))return!1;var n=Ql(t)?rm:Qg;return n.test(Rn(t))}function am(t,n){return t==null?void 0:t[n]}function In(t,n){var e=am(t,n);return im(e)?e:void 0}var om=In(ge,"WeakMap");const el=om;var uc=Object.create,sm=function(){function t(){}return function(n){if(!fe(n))return{};if(uc)return uc(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();const lm=sm;function um(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function cm(){}function Xh(t,n){var e=-1,r=t.length;for(n||(n=Array(r));++e<r;)n[e]=t[e];return n}var fm=800,hm=16,dm=Date.now;function pm(t){var n=0,e=0;return function(){var r=dm(),i=hm-(r-e);if(e=r,i>0){if(++n>=fm)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}function vm(t){return function(){return t}}var gm=function(){try{var t=In(Object,"defineProperty");return t({},"",{}),t}catch{}}();const ya=gm;var mm=ya?function(t,n){return ya(t,"toString",{configurable:!0,enumerable:!1,value:vm(n),writable:!0})}:Kl;const ym=mm;var _m=pm(ym);const xm=_m;function bm(t,n){for(var e=-1,r=t==null?0:t.length;++e<r&&n(t[e],e,t)!==!1;);return t}function Om(t,n,e,r){for(var i=t.length,a=e+(r?1:-1);r?a--:++a<i;)if(n(t[a],a,t))return a;return-1}function Tm(t){return t!==t}function wm(t,n,e){for(var r=e-1,i=t.length;++r<i;)if(t[r]===n)return r;return-1}function Em(t,n,e){return n===n?wm(t,n,e):Om(t,Tm,e)}function Sm(t,n){var e=t==null?0:t.length;return!!e&&Em(t,n,0)>-1}var Mm=9007199254740991,Am=/^(?:0|[1-9]\d*)$/;function Jl(t,n){var e=typeof t;return n=n??Mm,!!n&&(e=="number"||e!="symbol"&&Am.test(t))&&t>-1&&t%1==0&&t<n}function co(t,n,e){n=="__proto__"&&ya?ya(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function Ei(t,n){return t===n||t!==t&&n!==n}var Cm=Object.prototype,Dm=Cm.hasOwnProperty;function Zh(t,n,e){var r=t[n];(!(Dm.call(t,n)&&Ei(r,e))||e===void 0&&!(n in t))&&co(t,n,e)}function Si(t,n,e,r){var i=!e;e||(e={});for(var a=-1,o=n.length;++a<o;){var s=n[a],l=r?r(e[s],t[s],s,e,t):void 0;l===void 0&&(l=t[s]),i?co(e,s,l):Zh(e,s,l)}return e}var cc=Math.max;function Lm(t,n,e){return n=cc(n===void 0?t.length-1:n,0),function(){for(var r=arguments,i=-1,a=cc(r.length-n,0),o=Array(a);++i<a;)o[i]=r[n+i];i=-1;for(var s=Array(n+1);++i<n;)s[i]=r[i];return s[n]=e(o),um(t,this,s)}}function Kh(t,n){return xm(Lm(t,n,Kl),t+"")}var Pm=9007199254740991;function tu(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Pm}function kn(t){return t!=null&&tu(t.length)&&!Ql(t)}function Qh(t,n,e){if(!fe(e))return!1;var r=typeof n;return(r=="number"?kn(e)&&Jl(n,e.length):r=="string"&&n in e)?Ei(e[n],t):!1}function Rm(t){return Kh(function(n,e){var r=-1,i=e.length,a=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,o&&Qh(e[0],e[1],o)&&(a=i<3?void 0:a,i=1),n=Object(n);++r<i;){var s=e[r];s&&t(n,s,r,a)}return n})}var Im=Object.prototype;function fo(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||Im;return t===e}function km(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}var Nm="[object Arguments]";function fc(t){return Ae(t)&&Pn(t)==Nm}var Jh=Object.prototype,Bm=Jh.hasOwnProperty,Um=Jh.propertyIsEnumerable,$m=fc(function(){return arguments}())?fc:function(t){return Ae(t)&&Bm.call(t,"callee")&&!Um.call(t,"callee")};const pr=$m;function Vm(){return!1}var td=typeof ee=="object"&&ee&&!ee.nodeType&&ee,hc=td&&typeof ne=="object"&&ne&&!ne.nodeType&&ne,Hm=hc&&hc.exports===td,dc=Hm?ge.Buffer:void 0,Fm=dc?dc.isBuffer:void 0,Gm=Fm||Vm;const vr=Gm;var zm="[object Arguments]",Wm="[object Array]",jm="[object Boolean]",qm="[object Date]",Ym="[object Error]",Xm="[object Function]",Zm="[object Map]",Km="[object Number]",Qm="[object Object]",Jm="[object RegExp]",ty="[object Set]",ey="[object String]",ny="[object WeakMap]",ry="[object ArrayBuffer]",iy="[object DataView]",ay="[object Float32Array]",oy="[object Float64Array]",sy="[object Int8Array]",ly="[object Int16Array]",uy="[object Int32Array]",cy="[object Uint8Array]",fy="[object Uint8ClampedArray]",hy="[object Uint16Array]",dy="[object Uint32Array]",Ot={};Ot[ay]=Ot[oy]=Ot[sy]=Ot[ly]=Ot[uy]=Ot[cy]=Ot[fy]=Ot[hy]=Ot[dy]=!0;Ot[zm]=Ot[Wm]=Ot[ry]=Ot[jm]=Ot[iy]=Ot[qm]=Ot[Ym]=Ot[Xm]=Ot[Zm]=Ot[Km]=Ot[Qm]=Ot[Jm]=Ot[ty]=Ot[ey]=Ot[ny]=!1;function py(t){return Ae(t)&&tu(t.length)&&!!Ot[Pn(t)]}function eu(t){return function(n){return t(n)}}var ed=typeof ee=="object"&&ee&&!ee.nodeType&&ee,ei=ed&&typeof ne=="object"&&ne&&!ne.nodeType&&ne,vy=ei&&ei.exports===ed,Vo=vy&&Wh.process,gy=function(){try{var t=ei&&ei.require&&ei.require("util").types;return t||Vo&&Vo.binding&&Vo.binding("util")}catch{}}();const gr=gy;var pc=gr&&gr.isTypedArray,my=pc?eu(pc):py;const ho=my;var yy=Object.prototype,_y=yy.hasOwnProperty;function nd(t,n){var e=Ut(t),r=!e&&pr(t),i=!e&&!r&&vr(t),a=!e&&!r&&!i&&ho(t),o=e||r||i||a,s=o?km(t.length,String):[],l=s.length;for(var u in t)(n||_y.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Jl(u,l)))&&s.push(u);return s}function rd(t,n){return function(e){return t(n(e))}}var xy=rd(Object.keys,Object);const by=xy;var Oy=Object.prototype,Ty=Oy.hasOwnProperty;function id(t){if(!fo(t))return by(t);var n=[];for(var e in Object(t))Ty.call(t,e)&&e!="constructor"&&n.push(e);return n}function Mi(t){return kn(t)?nd(t):id(t)}function wy(t){var n=[];if(t!=null)for(var e in Object(t))n.push(e);return n}var Ey=Object.prototype,Sy=Ey.hasOwnProperty;function My(t){if(!fe(t))return wy(t);var n=fo(t),e=[];for(var r in t)r=="constructor"&&(n||!Sy.call(t,r))||e.push(r);return e}function Ai(t){return kn(t)?nd(t,!0):My(t)}var Ay=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cy=/^\w*$/;function nu(t,n){if(Ut(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||uo(t)?!0:Cy.test(t)||!Ay.test(t)||n!=null&&t in Object(n)}var Dy=In(Object,"create");const ui=Dy;function Ly(){this.__data__=ui?ui(null):{},this.size=0}function Py(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var Ry="__lodash_hash_undefined__",Iy=Object.prototype,ky=Iy.hasOwnProperty;function Ny(t){var n=this.__data__;if(ui){var e=n[t];return e===Ry?void 0:e}return ky.call(n,t)?n[t]:void 0}var By=Object.prototype,Uy=By.hasOwnProperty;function $y(t){var n=this.__data__;return ui?n[t]!==void 0:Uy.call(n,t)}var Vy="__lodash_hash_undefined__";function Hy(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ui&&n===void 0?Vy:n,this}function En(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}En.prototype.clear=Ly;En.prototype.delete=Py;En.prototype.get=Ny;En.prototype.has=$y;En.prototype.set=Hy;function Fy(){this.__data__=[],this.size=0}function po(t,n){for(var e=t.length;e--;)if(Ei(t[e][0],n))return e;return-1}var Gy=Array.prototype,zy=Gy.splice;function Wy(t){var n=this.__data__,e=po(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():zy.call(n,e,1),--this.size,!0}function jy(t){var n=this.__data__,e=po(n,t);return e<0?void 0:n[e][1]}function qy(t){return po(this.__data__,t)>-1}function Yy(t,n){var e=this.__data__,r=po(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}function Ye(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Ye.prototype.clear=Fy;Ye.prototype.delete=Wy;Ye.prototype.get=jy;Ye.prototype.has=qy;Ye.prototype.set=Yy;var Xy=In(ge,"Map");const ci=Xy;function Zy(){this.size=0,this.__data__={hash:new En,map:new(ci||Ye),string:new En}}function Ky(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function vo(t,n){var e=t.__data__;return Ky(n)?e[typeof n=="string"?"string":"hash"]:e.map}function Qy(t){var n=vo(this,t).delete(t);return this.size-=n?1:0,n}function Jy(t){return vo(this,t).get(t)}function t0(t){return vo(this,t).has(t)}function e0(t,n){var e=vo(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}function Xe(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Xe.prototype.clear=Zy;Xe.prototype.delete=Qy;Xe.prototype.get=Jy;Xe.prototype.has=t0;Xe.prototype.set=e0;var n0="Expected a function";function ru(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(n0);var e=function(){var r=arguments,i=n?n.apply(this,r):r[0],a=e.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return e.cache=a.set(i,o)||a,o};return e.cache=new(ru.Cache||Xe),e}ru.Cache=Xe;var r0=500;function i0(t){var n=ru(t,function(r){return e.size===r0&&e.clear(),r}),e=n.cache;return n}var a0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o0=/\\(\\)?/g,s0=i0(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(a0,function(e,r,i,a){n.push(i?a.replace(o0,"$1"):r||e)}),n});const l0=s0;function Ci(t){return t==null?"":Yh(t)}function ad(t,n){return Ut(t)?t:nu(t,n)?[t]:l0(Ci(t))}var u0=1/0;function go(t){if(typeof t=="string"||uo(t))return t;var n=t+"";return n=="0"&&1/t==-u0?"-0":n}function od(t,n){n=ad(n,t);for(var e=0,r=n.length;t!=null&&e<r;)t=t[go(n[e++])];return e&&e==r?t:void 0}function bt(t,n,e){var r=t==null?void 0:od(t,n);return r===void 0?e:r}function iu(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}var vc=ce?ce.isConcatSpreadable:void 0;function c0(t){return Ut(t)||pr(t)||!!(vc&&t&&t[vc])}function mo(t,n,e,r,i){var a=-1,o=t.length;for(e||(e=c0),i||(i=[]);++a<o;){var s=t[a];n>0&&e(s)?n>1?mo(s,n-1,e,r,i):iu(i,s):r||(i[i.length]=s)}return i}function sd(t){var n=t==null?0:t.length;return n?mo(t,1):[]}var f0=rd(Object.getPrototypeOf,Object);const au=f0;var h0="[object Object]",d0=Function.prototype,p0=Object.prototype,ld=d0.toString,v0=p0.hasOwnProperty,g0=ld.call(Object);function m0(t){if(!Ae(t)||Pn(t)!=h0)return!1;var n=au(t);if(n===null)return!0;var e=v0.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&ld.call(e)==g0}function y0(t,n,e){var r=-1,i=t.length;n<0&&(n=-n>i?0:i+n),e=e>i?i:e,e<0&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+n];return a}function _0(t,n,e){var r=t.length;return e=e===void 0?r:e,!n&&e>=r?t:y0(t,n,e)}var x0="\\ud800-\\udfff",b0="\\u0300-\\u036f",O0="\\ufe20-\\ufe2f",T0="\\u20d0-\\u20ff",w0=b0+O0+T0,E0="\\ufe0e\\ufe0f",S0="\\u200d",M0=RegExp("["+S0+x0+w0+E0+"]");function ud(t){return M0.test(t)}function A0(t){return t.split("")}var cd="\\ud800-\\udfff",C0="\\u0300-\\u036f",D0="\\ufe20-\\ufe2f",L0="\\u20d0-\\u20ff",P0=C0+D0+L0,R0="\\ufe0e\\ufe0f",I0="["+cd+"]",nl="["+P0+"]",rl="\\ud83c[\\udffb-\\udfff]",k0="(?:"+nl+"|"+rl+")",fd="[^"+cd+"]",hd="(?:\\ud83c[\\udde6-\\uddff]){2}",dd="[\\ud800-\\udbff][\\udc00-\\udfff]",N0="\\u200d",pd=k0+"?",vd="["+R0+"]?",B0="(?:"+N0+"(?:"+[fd,hd,dd].join("|")+")"+vd+pd+")*",U0=vd+pd+B0,$0="(?:"+[fd+nl+"?",nl,hd,dd,I0].join("|")+")",V0=RegExp(rl+"(?="+rl+")|"+$0+U0,"g");function H0(t){return t.match(V0)||[]}function F0(t){return ud(t)?H0(t):A0(t)}function G0(t){return function(n){n=Ci(n);var e=ud(n)?F0(n):void 0,r=e?e[0]:n.charAt(0),i=e?_0(e,1).join(""):n.slice(1);return r[t]()+i}}var z0=G0("toUpperCase");const W0=z0;function j0(t){return W0(Ci(t).toLowerCase())}function q0(t,n,e,r){var i=-1,a=t==null?0:t.length;for(r&&a&&(e=t[++i]);++i<a;)e=n(e,t[i],i,t);return e}function Y0(t){return function(n){return t==null?void 0:t[n]}}var X0={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Z0=Y0(X0);const K0=Z0;var Q0=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,J0="\\u0300-\\u036f",t_="\\ufe20-\\ufe2f",e_="\\u20d0-\\u20ff",n_=J0+t_+e_,r_="["+n_+"]",i_=RegExp(r_,"g");function a_(t){return t=Ci(t),t&&t.replace(Q0,K0).replace(i_,"")}var o_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function s_(t){return t.match(o_)||[]}var l_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function u_(t){return l_.test(t)}var gd="\\ud800-\\udfff",c_="\\u0300-\\u036f",f_="\\ufe20-\\ufe2f",h_="\\u20d0-\\u20ff",d_=c_+f_+h_,md="\\u2700-\\u27bf",yd="a-z\\xdf-\\xf6\\xf8-\\xff",p_="\\xac\\xb1\\xd7\\xf7",v_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",g_="\\u2000-\\u206f",m_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_d="A-Z\\xc0-\\xd6\\xd8-\\xde",y_="\\ufe0e\\ufe0f",xd=p_+v_+g_+m_,bd="['’]",gc="["+xd+"]",__="["+d_+"]",Od="\\d+",x_="["+md+"]",Td="["+yd+"]",wd="[^"+gd+xd+Od+md+yd+_d+"]",b_="\\ud83c[\\udffb-\\udfff]",O_="(?:"+__+"|"+b_+")",T_="[^"+gd+"]",Ed="(?:\\ud83c[\\udde6-\\uddff]){2}",Sd="[\\ud800-\\udbff][\\udc00-\\udfff]",Yn="["+_d+"]",w_="\\u200d",mc="(?:"+Td+"|"+wd+")",E_="(?:"+Yn+"|"+wd+")",yc="(?:"+bd+"(?:d|ll|m|re|s|t|ve))?",_c="(?:"+bd+"(?:D|LL|M|RE|S|T|VE))?",Md=O_+"?",Ad="["+y_+"]?",S_="(?:"+w_+"(?:"+[T_,Ed,Sd].join("|")+")"+Ad+Md+")*",M_="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",A_="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",C_=Ad+Md+S_,D_="(?:"+[x_,Ed,Sd].join("|")+")"+C_,L_=RegExp([Yn+"?"+Td+"+"+yc+"(?="+[gc,Yn,"$"].join("|")+")",E_+"+"+_c+"(?="+[gc,Yn+mc,"$"].join("|")+")",Yn+"?"+mc+"+"+yc,Yn+"+"+_c,A_,M_,Od,D_].join("|"),"g");function P_(t){return t.match(L_)||[]}function R_(t,n,e){return t=Ci(t),n=e?void 0:n,n===void 0?u_(t)?P_(t):s_(t):t.match(n)||[]}var I_="['’]",k_=RegExp(I_,"g");function Cd(t){return function(n){return q0(R_(a_(n).replace(k_,"")),t,"")}}var N_=Cd(function(t,n,e){return n=n.toLowerCase(),t+(e?j0(n):n)});const B_=N_;function U_(t,n,e){return t===t&&(e!==void 0&&(t=t<=e?t:e),n!==void 0&&(t=t>=n?t:n)),t}function Dd(t,n,e){return e===void 0&&(e=n,n=void 0),e!==void 0&&(e=ti(e),e=e===e?e:0),n!==void 0&&(n=ti(n),n=n===n?n:0),U_(ti(t),n,e)}function $_(){this.__data__=new Ye,this.size=0}function V_(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function H_(t){return this.__data__.get(t)}function F_(t){return this.__data__.has(t)}var G_=200;function z_(t,n){var e=this.__data__;if(e instanceof Ye){var r=e.__data__;if(!ci||r.length<G_-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new Xe(r)}return e.set(t,n),this.size=e.size,this}function pe(t){var n=this.__data__=new Ye(t);this.size=n.size}pe.prototype.clear=$_;pe.prototype.delete=V_;pe.prototype.get=H_;pe.prototype.has=F_;pe.prototype.set=z_;function W_(t,n){return t&&Si(n,Mi(n),t)}function j_(t,n){return t&&Si(n,Ai(n),t)}var Ld=typeof ee=="object"&&ee&&!ee.nodeType&&ee,xc=Ld&&typeof ne=="object"&&ne&&!ne.nodeType&&ne,q_=xc&&xc.exports===Ld,bc=q_?ge.Buffer:void 0,Oc=bc?bc.allocUnsafe:void 0;function Pd(t,n){if(n)return t.slice();var e=t.length,r=Oc?Oc(e):new t.constructor(e);return t.copy(r),r}function Y_(t,n){for(var e=-1,r=t==null?0:t.length,i=0,a=[];++e<r;){var o=t[e];n(o,e,t)&&(a[i++]=o)}return a}function Rd(){return[]}var X_=Object.prototype,Z_=X_.propertyIsEnumerable,Tc=Object.getOwnPropertySymbols,K_=Tc?function(t){return t==null?[]:(t=Object(t),Y_(Tc(t),function(n){return Z_.call(t,n)}))}:Rd;const ou=K_;function Q_(t,n){return Si(t,ou(t),n)}var J_=Object.getOwnPropertySymbols,t1=J_?function(t){for(var n=[];t;)iu(n,ou(t)),t=au(t);return n}:Rd;const Id=t1;function e1(t,n){return Si(t,Id(t),n)}function kd(t,n,e){var r=n(t);return Ut(t)?r:iu(r,e(t))}function il(t){return kd(t,Mi,ou)}function n1(t){return kd(t,Ai,Id)}var r1=In(ge,"DataView");const al=r1;var i1=In(ge,"Promise");const ol=i1;var a1=In(ge,"Set");const or=a1;var wc="[object Map]",o1="[object Object]",Ec="[object Promise]",Sc="[object Set]",Mc="[object WeakMap]",Ac="[object DataView]",s1=Rn(al),l1=Rn(ci),u1=Rn(ol),c1=Rn(or),f1=Rn(el),pn=Pn;(al&&pn(new al(new ArrayBuffer(1)))!=Ac||ci&&pn(new ci)!=wc||ol&&pn(ol.resolve())!=Ec||or&&pn(new or)!=Sc||el&&pn(new el)!=Mc)&&(pn=function(t){var n=Pn(t),e=n==o1?t.constructor:void 0,r=e?Rn(e):"";if(r)switch(r){case s1:return Ac;case l1:return wc;case u1:return Ec;case c1:return Sc;case f1:return Mc}return n});const mr=pn;var h1=Object.prototype,d1=h1.hasOwnProperty;function p1(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&d1.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var v1=ge.Uint8Array;const _a=v1;function su(t){var n=new t.constructor(t.byteLength);return new _a(n).set(new _a(t)),n}function g1(t,n){var e=n?su(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var m1=/\w*$/;function y1(t){var n=new t.constructor(t.source,m1.exec(t));return n.lastIndex=t.lastIndex,n}var Cc=ce?ce.prototype:void 0,Dc=Cc?Cc.valueOf:void 0;function _1(t){return Dc?Object(Dc.call(t)):{}}function Nd(t,n){var e=n?su(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var x1="[object Boolean]",b1="[object Date]",O1="[object Map]",T1="[object Number]",w1="[object RegExp]",E1="[object Set]",S1="[object String]",M1="[object Symbol]",A1="[object ArrayBuffer]",C1="[object DataView]",D1="[object Float32Array]",L1="[object Float64Array]",P1="[object Int8Array]",R1="[object Int16Array]",I1="[object Int32Array]",k1="[object Uint8Array]",N1="[object Uint8ClampedArray]",B1="[object Uint16Array]",U1="[object Uint32Array]";function $1(t,n,e){var r=t.constructor;switch(n){case A1:return su(t);case x1:case b1:return new r(+t);case C1:return g1(t,e);case D1:case L1:case P1:case R1:case I1:case k1:case N1:case B1:case U1:return Nd(t,e);case O1:return new r;case T1:case S1:return new r(t);case w1:return y1(t);case E1:return new r;case M1:return _1(t)}}function Bd(t){return typeof t.constructor=="function"&&!fo(t)?lm(au(t)):{}}var V1="[object Map]";function H1(t){return Ae(t)&&mr(t)==V1}var Lc=gr&&gr.isMap,F1=Lc?eu(Lc):H1;const G1=F1;var z1="[object Set]";function W1(t){return Ae(t)&&mr(t)==z1}var Pc=gr&&gr.isSet,j1=Pc?eu(Pc):W1;const q1=j1;var Y1=1,X1=2,Z1=4,Ud="[object Arguments]",K1="[object Array]",Q1="[object Boolean]",J1="[object Date]",tx="[object Error]",$d="[object Function]",ex="[object GeneratorFunction]",nx="[object Map]",rx="[object Number]",Vd="[object Object]",ix="[object RegExp]",ax="[object Set]",ox="[object String]",sx="[object Symbol]",lx="[object WeakMap]",ux="[object ArrayBuffer]",cx="[object DataView]",fx="[object Float32Array]",hx="[object Float64Array]",dx="[object Int8Array]",px="[object Int16Array]",vx="[object Int32Array]",gx="[object Uint8Array]",mx="[object Uint8ClampedArray]",yx="[object Uint16Array]",_x="[object Uint32Array]",xt={};xt[Ud]=xt[K1]=xt[ux]=xt[cx]=xt[Q1]=xt[J1]=xt[fx]=xt[hx]=xt[dx]=xt[px]=xt[vx]=xt[nx]=xt[rx]=xt[Vd]=xt[ix]=xt[ax]=xt[ox]=xt[sx]=xt[gx]=xt[mx]=xt[yx]=xt[_x]=!0;xt[tx]=xt[$d]=xt[lx]=!1;function ta(t,n,e,r,i,a){var o,s=n&Y1,l=n&X1,u=n&Z1;if(e&&(o=i?e(t,r,i,a):e(t)),o!==void 0)return o;if(!fe(t))return t;var c=Ut(t);if(c){if(o=p1(t),!s)return Xh(t,o)}else{var f=mr(t),h=f==$d||f==ex;if(vr(t))return Pd(t,s);if(f==Vd||f==Ud||h&&!i){if(o=l||h?{}:Bd(t),!s)return l?e1(t,j_(o,t)):Q_(t,W_(o,t))}else{if(!xt[f])return i?t:{};o=$1(t,f,s)}}a||(a=new pe);var p=a.get(t);if(p)return p;a.set(t,o),q1(t)?t.forEach(function(m){o.add(ta(m,n,e,m,t,a))}):G1(t)&&t.forEach(function(m,y){o.set(y,ta(m,n,e,y,t,a))});var d=u?l?n1:il:l?Ai:Mi,g=c?void 0:d(t);return bm(g||t,function(m,y){g&&(y=m,m=t[y]),Zh(o,y,ta(m,n,e,y,t,a))}),o}var xx=1,bx=4;function Ox(t){return ta(t,xx|bx)}var Tx="__lodash_hash_undefined__";function wx(t){return this.__data__.set(t,Tx),this}function Ex(t){return this.__data__.has(t)}function fi(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new Xe;++n<e;)this.add(t[n])}fi.prototype.add=fi.prototype.push=wx;fi.prototype.has=Ex;function Hd(t,n){for(var e=-1,r=t==null?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}function Fd(t,n){return t.has(n)}var Sx=1,Mx=2;function Gd(t,n,e,r,i,a){var o=e&Sx,s=t.length,l=n.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(t),c=a.get(n);if(u&&c)return u==n&&c==t;var f=-1,h=!0,p=e&Mx?new fi:void 0;for(a.set(t,n),a.set(n,t);++f<s;){var d=t[f],g=n[f];if(r)var m=o?r(g,d,f,n,t,a):r(d,g,f,t,n,a);if(m!==void 0){if(m)continue;h=!1;break}if(p){if(!Hd(n,function(y,v){if(!Fd(p,v)&&(d===y||i(d,y,e,r,a)))return p.push(v)})){h=!1;break}}else if(!(d===g||i(d,g,e,r,a))){h=!1;break}}return a.delete(t),a.delete(n),h}function Ax(t){var n=-1,e=Array(t.size);return t.forEach(function(r,i){e[++n]=[i,r]}),e}function lu(t){var n=-1,e=Array(t.size);return t.forEach(function(r){e[++n]=r}),e}var Cx=1,Dx=2,Lx="[object Boolean]",Px="[object Date]",Rx="[object Error]",Ix="[object Map]",kx="[object Number]",Nx="[object RegExp]",Bx="[object Set]",Ux="[object String]",$x="[object Symbol]",Vx="[object ArrayBuffer]",Hx="[object DataView]",Rc=ce?ce.prototype:void 0,Ho=Rc?Rc.valueOf:void 0;function Fx(t,n,e,r,i,a,o){switch(e){case Hx:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case Vx:return!(t.byteLength!=n.byteLength||!a(new _a(t),new _a(n)));case Lx:case Px:case kx:return Ei(+t,+n);case Rx:return t.name==n.name&&t.message==n.message;case Nx:case Ux:return t==n+"";case Ix:var s=Ax;case Bx:var l=r&Cx;if(s||(s=lu),t.size!=n.size&&!l)return!1;var u=o.get(t);if(u)return u==n;r|=Dx,o.set(t,n);var c=Gd(s(t),s(n),r,i,a,o);return o.delete(t),c;case $x:if(Ho)return Ho.call(t)==Ho.call(n)}return!1}var Gx=1,zx=Object.prototype,Wx=zx.hasOwnProperty;function jx(t,n,e,r,i,a){var o=e&Gx,s=il(t),l=s.length,u=il(n),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var h=s[f];if(!(o?h in n:Wx.call(n,h)))return!1}var p=a.get(t),d=a.get(n);if(p&&d)return p==n&&d==t;var g=!0;a.set(t,n),a.set(n,t);for(var m=o;++f<l;){h=s[f];var y=t[h],v=n[h];if(r)var _=o?r(v,y,h,n,t,a):r(y,v,h,t,n,a);if(!(_===void 0?y===v||i(y,v,e,r,a):_)){g=!1;break}m||(m=h=="constructor")}if(g&&!m){var E=t.constructor,x=n.constructor;E!=x&&"constructor"in t&&"constructor"in n&&!(typeof E=="function"&&E instanceof E&&typeof x=="function"&&x instanceof x)&&(g=!1)}return a.delete(t),a.delete(n),g}var qx=1,Ic="[object Arguments]",kc="[object Array]",Hi="[object Object]",Yx=Object.prototype,Nc=Yx.hasOwnProperty;function Xx(t,n,e,r,i,a){var o=Ut(t),s=Ut(n),l=o?kc:mr(t),u=s?kc:mr(n);l=l==Ic?Hi:l,u=u==Ic?Hi:u;var c=l==Hi,f=u==Hi,h=l==u;if(h&&vr(t)){if(!vr(n))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new pe),o||ho(t)?Gd(t,n,e,r,i,a):Fx(t,n,l,e,r,i,a);if(!(e&qx)){var p=c&&Nc.call(t,"__wrapped__"),d=f&&Nc.call(n,"__wrapped__");if(p||d){var g=p?t.value():t,m=d?n.value():n;return a||(a=new pe),i(g,m,e,r,a)}}return h?(a||(a=new pe),jx(t,n,e,r,i,a)):!1}function yo(t,n,e,r,i){return t===n?!0:t==null||n==null||!Ae(t)&&!Ae(n)?t!==t&&n!==n:Xx(t,n,e,r,yo,i)}var Zx=1,Kx=2;function Qx(t,n,e,r){var i=e.length,a=i,o=!r;if(t==null)return!a;for(t=Object(t);i--;){var s=e[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=e[i];var l=s[0],u=t[l],c=s[1];if(o&&s[2]){if(u===void 0&&!(l in t))return!1}else{var f=new pe;if(r)var h=r(u,c,l,t,n,f);if(!(h===void 0?yo(c,u,Zx|Kx,r,f):h))return!1}}return!0}function zd(t){return t===t&&!fe(t)}function Jx(t){for(var n=Mi(t),e=n.length;e--;){var r=n[e],i=t[r];n[e]=[r,i,zd(i)]}return n}function Wd(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==void 0||t in Object(e))}}function tb(t){var n=Jx(t);return n.length==1&&n[0][2]?Wd(n[0][0],n[0][1]):function(e){return e===t||Qx(e,t,n)}}function eb(t,n){return t!=null&&n in Object(t)}function nb(t,n,e){n=ad(n,t);for(var r=-1,i=n.length,a=!1;++r<i;){var o=go(n[r]);if(!(a=t!=null&&e(t,o)))break;t=t[o]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&tu(i)&&Jl(o,i)&&(Ut(t)||pr(t)))}function rb(t,n){return t!=null&&nb(t,n,eb)}var ib=1,ab=2;function ob(t,n){return nu(t)&&zd(n)?Wd(go(t),n):function(e){var r=bt(e,t);return r===void 0&&r===n?rb(e,t):yo(n,r,ib|ab)}}function sb(t){return function(n){return n==null?void 0:n[t]}}function lb(t){return function(n){return od(n,t)}}function ub(t){return nu(t)?sb(go(t)):lb(t)}function _o(t){return typeof t=="function"?t:t==null?Kl:typeof t=="object"?Ut(t)?ob(t[0],t[1]):tb(t):ub(t)}function cb(t,n,e,r){for(var i=-1,a=t==null?0:t.length;++i<a;){var o=t[i];n(r,o,e(o),t)}return r}function fb(t){return function(n,e,r){for(var i=-1,a=Object(n),o=r(n),s=o.length;s--;){var l=o[t?s:++i];if(e(a[l],l,a)===!1)break}return n}}var hb=fb();const jd=hb;function db(t,n){return t&&jd(t,n,Mi)}function pb(t,n){return function(e,r){if(e==null)return e;if(!kn(e))return t(e,r);for(var i=e.length,a=n?i:-1,o=Object(e);(n?a--:++a<i)&&r(o[a],a,o)!==!1;);return e}}var vb=pb(db);const uu=vb;function gb(t,n,e,r){return uu(t,function(i,a,o){n(r,i,e(i),o)}),r}function mb(t,n){return function(e,r){var i=Ut(e)?cb:gb,a=n?n():{};return i(e,t,_o(r),a)}}var yb=function(){return ge.Date.now()};const Fo=yb;var _b="Expected a function",xb=Math.max,bb=Math.min;function xa(t,n,e){var r,i,a,o,s,l,u=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(_b);n=ti(n)||0,fe(e)&&(c=!!e.leading,f="maxWait"in e,a=f?xb(ti(e.maxWait)||0,n):a,h="trailing"in e?!!e.trailing:h);function p(O){var P=r,S=i;return r=i=void 0,u=O,o=t.apply(S,P),o}function d(O){return u=O,s=setTimeout(y,n),c?p(O):o}function g(O){var P=O-l,S=O-u,A=n-P;return f?bb(A,a-S):A}function m(O){var P=O-l,S=O-u;return l===void 0||P>=n||P<0||f&&S>=a}function y(){var O=Fo();if(m(O))return v(O);s=setTimeout(y,g(O))}function v(O){return s=void 0,h&&r?p(O):(r=i=void 0,o)}function _(){s!==void 0&&clearTimeout(s),u=0,r=l=i=s=void 0}function E(){return s===void 0?o:v(Fo())}function x(){var O=Fo(),P=m(O);if(r=arguments,i=this,l=O,P){if(s===void 0)return d(l);if(f)return clearTimeout(s),s=setTimeout(y,n),p(l)}return s===void 0&&(s=setTimeout(y,n)),o}return x.cancel=_,x.flush=E,x}function sl(t,n,e){(e!==void 0&&!Ei(t[n],e)||e===void 0&&!(n in t))&&co(t,n,e)}function ll(t){return Ae(t)&&kn(t)}function ul(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}function Ob(t){return Si(t,Ai(t))}function Tb(t,n,e,r,i,a,o){var s=ul(t,e),l=ul(n,e),u=o.get(l);if(u){sl(t,e,u);return}var c=a?a(s,l,e+"",t,n,o):void 0,f=c===void 0;if(f){var h=Ut(l),p=!h&&vr(l),d=!h&&!p&&ho(l);c=l,h||p||d?Ut(s)?c=s:ll(s)?c=Xh(s):p?(f=!1,c=Pd(l,!0)):d?(f=!1,c=Nd(l,!0)):c=[]:m0(l)||pr(l)?(c=s,pr(s)?c=Ob(s):(!fe(s)||Ql(s))&&(c=Bd(l))):f=!1}f&&(o.set(l,c),i(c,l,r,a,o),o.delete(l)),sl(t,e,c)}function qd(t,n,e,r,i){t!==n&&jd(n,function(a,o){if(i||(i=new pe),fe(a))Tb(t,n,o,e,qd,r,i);else{var s=r?r(ul(t,o),a,o+"",t,n,i):void 0;s===void 0&&(s=a),sl(t,o,s)}},Ai)}function wb(t,n,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(n,t[r]))return!0;return!1}function Eb(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}function Sb(t,n){var e=-1,r=kn(t)?Array(t.length):[];return uu(t,function(i,a,o){r[++e]=n(i,a,o)}),r}function Mb(t,n){var e=Ut(t)?qh:Sb;return e(t,_o(n))}var Ab=1/0;function Cb(t,n){return mo(Mb(t,n),Ab)}function Db(t){for(var n=-1,e=t==null?0:t.length,r={};++n<e;){var i=t[n];r[i[0]]=i[1]}return r}var Lb=Object.prototype,Pb=Lb.hasOwnProperty,Rb=mb(function(t,n,e){Pb.call(t,e)?t[e].push(n):co(t,e,[n])});const Ib=Rb;var kb="[object Map]",Nb="[object Set]",Bb=Object.prototype,Ub=Bb.hasOwnProperty;function _n(t){if(t==null)return!0;if(kn(t)&&(Ut(t)||typeof t=="string"||typeof t.splice=="function"||vr(t)||ho(t)||pr(t)))return!t.length;var n=mr(t);if(n==kb||n==Nb)return!t.size;if(fo(t))return!id(t).length;for(var e in t)if(Ub.call(t,e))return!1;return!0}function Yd(t,n){return yo(t,n)}var $b=Cd(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()});const Vn=$b;var Vb=Rm(function(t,n,e){qd(t,n,e)});const et=Vb;function Hb(t,n){var e;return uu(t,function(r,i,a){return e=n(r,i,a),!e}),!!e}function Fb(t,n,e){var r=Ut(t)?Hd:Hb;return e&&Qh(t,n,e)&&(n=void 0),r(t,_o(n))}var Gb=1/0,zb=or&&1/lu(new or([,-0]))[1]==Gb?function(t){return new or(t)}:cm;const Wb=zb;var jb=200;function Xd(t,n,e){var r=-1,i=Sm,a=t.length,o=!0,s=[],l=s;if(e)o=!1,i=wb;else if(a>=jb){var u=n?null:Wb(t);if(u)return lu(u);o=!1,i=Fd,l=new fi}else l=n?[]:s;t:for(;++r<a;){var c=t[r],f=n?n(c):c;if(c=e||c!==0?c:0,o&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue t;n&&l.push(f),s.push(c)}else i(l,f,e)||(l!==s&&l.push(f),s.push(c))}return s}var qb=Kh(function(t){var n=Eb(t);return ll(n)&&(n=void 0),Xd(mo(t,1,ll,!0),_o(n))});const Yb=qb;function Xb(t){return t&&t.length?Xd(t):[]}var cl="http://www.w3.org/1999/xhtml";const Bc={svg:"http://www.w3.org/2000/svg",xhtml:cl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xo(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Bc.hasOwnProperty(n)?{space:Bc[n],local:t}:t}function Zb(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===cl&&n.documentElement.namespaceURI===cl?n.createElement(t):n.createElementNS(e,t)}}function Kb(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Zd(t){var n=xo(t);return(n.local?Kb:Zb)(n)}function Qb(){}function cu(t){return t==null?Qb:function(){return this.querySelector(t)}}function Jb(t){typeof t!="function"&&(t=cu(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],o=a.length,s=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=a[c])&&(u=t.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new re(r,this._parents)}function tO(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function eO(){return[]}function Kd(t){return t==null?eO:function(){return this.querySelectorAll(t)}}function nO(t){return function(){return tO(t.apply(this,arguments))}}function rO(t){typeof t=="function"?t=nO(t):t=Kd(t);for(var n=this._groups,e=n.length,r=[],i=[],a=0;a<e;++a)for(var o=n[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new re(r,i)}function Qd(t){return function(){return this.matches(t)}}function Jd(t){return function(n){return n.matches(t)}}var iO=Array.prototype.find;function aO(t){return function(){return iO.call(this.children,t)}}function oO(){return this.firstElementChild}function sO(t){return this.select(t==null?oO:aO(typeof t=="function"?t:Jd(t)))}var lO=Array.prototype.filter;function uO(){return Array.from(this.children)}function cO(t){return function(){return lO.call(this.children,t)}}function fO(t){return this.selectAll(t==null?uO:cO(typeof t=="function"?t:Jd(t)))}function hO(t){typeof t!="function"&&(t=Qd(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new re(r,this._parents)}function tp(t){return new Array(t.length)}function dO(){return new re(this._enter||this._groups.map(tp),this._parents)}function ba(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}ba.prototype={constructor:ba,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function pO(t){return function(){return t}}function vO(t,n,e,r,i,a){for(var o=0,s,l=n.length,u=a.length;o<u;++o)(s=n[o])?(s.__data__=a[o],r[o]=s):e[o]=new ba(t,a[o]);for(;o<l;++o)(s=n[o])&&(i[o]=s)}function gO(t,n,e,r,i,a,o){var s,l,u=new Map,c=n.length,f=a.length,h=new Array(c),p;for(s=0;s<c;++s)(l=n[s])&&(h[s]=p=o.call(l,l.__data__,s,n)+"",u.has(p)?i[s]=l:u.set(p,l));for(s=0;s<f;++s)p=o.call(t,a[s],s,a)+"",(l=u.get(p))?(r[s]=l,l.__data__=a[s],u.delete(p)):e[s]=new ba(t,a[s]);for(s=0;s<c;++s)(l=n[s])&&u.get(h[s])===l&&(i[s]=l)}function mO(t){return t.__data__}function yO(t,n){if(!arguments.length)return Array.from(this,mO);var e=n?gO:vO,r=this._parents,i=this._groups;typeof t!="function"&&(t=pO(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=r[u],f=i[u],h=f.length,p=_O(t.call(c,c&&c.__data__,u,r)),d=p.length,g=s[u]=new Array(d),m=o[u]=new Array(d),y=l[u]=new Array(h);e(c,f,g,m,y,p,n);for(var v=0,_=0,E,x;v<d;++v)if(E=g[v]){for(v>=_&&(_=v+1);!(x=m[_])&&++_<d;);E._next=x||null}}return o=new re(o,r),o._enter=s,o._exit=l,o}function _O(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xO(){return new re(this._exit||this._groups.map(tp),this._parents)}function bO(t,n,e){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?a.remove():e(a),r&&i?r.merge(i).order():i}function OO(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=e[l],c=r[l],f=u.length,h=s[l]=new Array(f),p,d=0;d<f;++d)(p=u[d]||c[d])&&(h[d]=p);for(;l<i;++l)s[l]=e[l];return new re(s,this._parents)}function TO(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function wO(t){t||(t=EO);function n(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a){for(var o=e[a],s=o.length,l=i[a]=new Array(s),u,c=0;c<s;++c)(u=o[c])&&(l[c]=u);l.sort(n)}return new re(i,this._parents).order()}function EO(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function SO(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function MO(){return Array.from(this)}function AO(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function CO(){let t=0;for(const n of this)++t;return t}function DO(){return!this.node()}function LO(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function PO(t){return function(){this.removeAttribute(t)}}function RO(t){return function(){this.removeAttributeNS(t.space,t.local)}}function IO(t,n){return function(){this.setAttribute(t,n)}}function kO(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function NO(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function BO(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function UO(t,n){var e=xo(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?RO:PO:typeof n=="function"?e.local?BO:NO:e.local?kO:IO)(e,n))}function ep(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function $O(t){return function(){this.style.removeProperty(t)}}function VO(t,n,e){return function(){this.style.setProperty(t,n,e)}}function HO(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function FO(t,n,e){return arguments.length>1?this.each((n==null?$O:typeof n=="function"?HO:VO)(t,n,e??"")):yr(this.node(),t)}function yr(t,n){return t.style.getPropertyValue(n)||ep(t).getComputedStyle(t,null).getPropertyValue(n)}function GO(t){return function(){delete this[t]}}function zO(t,n){return function(){this[t]=n}}function WO(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function jO(t,n){return arguments.length>1?this.each((n==null?GO:typeof n=="function"?WO:zO)(t,n)):this.node()[t]}function np(t){return t.trim().split(/^|\s+/)}function fu(t){return t.classList||new rp(t)}function rp(t){this._node=t,this._names=np(t.getAttribute("class")||"")}rp.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ip(t,n){for(var e=fu(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function ap(t,n){for(var e=fu(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function qO(t){return function(){ip(this,t)}}function YO(t){return function(){ap(this,t)}}function XO(t,n){return function(){(n.apply(this,arguments)?ip:ap)(this,t)}}function ZO(t,n){var e=np(t+"");if(arguments.length<2){for(var r=fu(this.node()),i=-1,a=e.length;++i<a;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?XO:n?qO:YO)(e,n))}function KO(){this.textContent=""}function QO(t){return function(){this.textContent=t}}function JO(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function tT(t){return arguments.length?this.each(t==null?KO:(typeof t=="function"?JO:QO)(t)):this.node().textContent}function eT(){this.innerHTML=""}function nT(t){return function(){this.innerHTML=t}}function rT(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function iT(t){return arguments.length?this.each(t==null?eT:(typeof t=="function"?rT:nT)(t)):this.node().innerHTML}function aT(){this.nextSibling&&this.parentNode.appendChild(this)}function oT(){return this.each(aT)}function sT(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lT(){return this.each(sT)}function uT(t){var n=typeof t=="function"?t:Zd(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function cT(){return null}function fT(t,n){var e=typeof t=="function"?t:Zd(t),r=n==null?cT:typeof n=="function"?n:cu(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function hT(){var t=this.parentNode;t&&t.removeChild(this)}function dT(){return this.each(hT)}function pT(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function vT(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function gT(t){return this.select(t?vT:pT)}function mT(t){return arguments.length?this.property("__data__",t):this.node().__data__}function yT(t){return function(n){t.call(this,n,this.__data__)}}function _T(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function xT(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,a;e<i;++e)a=n[e],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):n[++r]=a;++r?n.length=r:delete this.__on}}}function bT(t,n,e){return function(){var r=this.__on,i,a=yT(n);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=e),i.value=n;return}}this.addEventListener(t.type,a,e),i={type:t.type,name:t.name,value:n,listener:a,options:e},r?r.push(i):this.__on=[i]}}function OT(t,n,e){var r=_T(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=n?bT:xT,i=0;i<a;++i)this.each(s(r[i],n,e));return this}function op(t,n,e){var r=ep(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function TT(t,n){return function(){return op(this,t,n)}}function wT(t,n){return function(){return op(this,t,n.apply(this,arguments))}}function ET(t,n){return this.each((typeof n=="function"?wT:TT)(t,n))}function*ST(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var sp=[null];function re(t,n){this._groups=t,this._parents=n}function Di(){return new re([[document.documentElement]],sp)}function MT(){return this}re.prototype=Di.prototype={constructor:re,select:Jb,selectAll:rO,selectChild:sO,selectChildren:fO,filter:hO,data:yO,enter:dO,exit:xO,join:bO,merge:OO,selection:MT,order:TO,sort:wO,call:SO,nodes:MO,node:AO,size:CO,empty:DO,each:LO,attr:UO,style:FO,property:jO,classed:ZO,text:tT,html:iT,raise:oT,lower:lT,append:uT,insert:fT,remove:dT,clone:gT,datum:mT,on:OT,dispatch:ET,[Symbol.iterator]:ST};function B(t){return typeof t=="string"?new re([[document.querySelector(t)]],[document.documentElement]):new re([[t]],sp)}function AT(t){let n;for(;n=t.sourceEvent;)t=n;return t}function Sn(t,n){if(t=AT(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}var Ge=Ox,hi=Xb;function CT(t,n,e){var r=null;return function(){var i=this,a=arguments;i.mousePosition=Sn(a[0],e),clearTimeout(r),r=setTimeout(function(){t.apply(i,a)},n)}}function Mt(t,n){var e,r,i=Ge(t),a=Object.keys(n.axes||{});!((r=(e=n)===null||e===void 0?void 0:e.toolbar)===null||r===void 0)&&r.controls&&delete i.toolbar.controls,a.length===0&&delete i.axes;for(var o in i.axes)if(a.includes(o)){var s=n.axes[o];(s.primary||s.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/docs-tutorials--tabular-data-format");var l=s.mapsTo;if(l==null){var u=s.scaleType;u==null?s.mapsTo="value":u===K.TIME?s.mapsTo="date":u===K.LABELS&&(s.mapsTo="key")}}else delete i.axes[o];return hu(i,n),et(i,n)}function Ne(t){if(t){var n=/translate\([0-9]+\.?[0-9]*,[0-9]+\.?[0-9]*\)/,e=t.getAttribute("transform").match(n);if(!e)return null;if(e[0]){var r=e[0].replace(/translate\(/,"").replace(/\)/,"").split(",");return{tx:r[0],ty:r[1]}}return null}}function $r(t){var n=/\(([^)]+)\)/,e=n.exec(t)[1],r=e.split(",");return{x:parseFloat(r[0]),y:parseFloat(r[1])}}function Uc(t,n,e){e===void 0&&(e="value");var r=t/n.reduce(function(i,a){return i+a[e]},0)*100;return r%1!==0?parseFloat(r.toFixed(1)):r}function di(t,n,e){if(e>t.length)return t;if(n===le.MID_LINE)return t.substr(0,e/2)+"..."+t.substr(-e/2);if(n===le.FRONT_LINE)return"..."+t.substr(-e);if(n===le.END_LINE)return t.substr(0,e)+"..."}function hu(t,n){var e=b(t,"legend","additionalItems"),r=b(n,"legend","additionalItems");if(e&&r){var i=r.map(function(s){return s.type}),a=e.map(function(s){return s.type}),o=zh.filter(function(s){return a.includes(s.type)&&!i.includes(s.type)});t.legend.additionalItems=o,n.legend.additionalItems=Yb(o,r,"name")}}var b=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=t;if(r){for(var i=0,a=n;i<a.length;i++){var o=a[i];if(r[o]!==null&&r[o]!==void 0)r=r[o];else return null}return r}return null},lp=function(t,n){return n===Pt.HORIZONTAL?{y0:t.x0,y1:t.x1,x0:t.y0,x1:t.y1}:t},zt=function(t,n){var e=lp(t,n),r=e.x0,i=e.x1,a=e.y0,o=e.y1;return"M"+r+","+a+"L"+r+","+o+"L"+i+","+o+"L"+i+","+a+"L"+r+","+a};function He(t,n,e){return e===Pt.VERTICAL?[t,n]:[n,t]}var DT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function LT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function PT(t){if(t.__esModule)return t;var n=t.default;if(typeof n=="function"){var e=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var a=Function.bind.apply(n,i);return new a}return n.apply(this,arguments)};e.prototype=n.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),e}var Oa={},RT={get exports(){return Oa},set exports(t){Oa=t}},Ta={},IT={get exports(){return Ta},set exports(t){Ta=t}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function r(i,a,o){o=o||{};var s;return typeof e[i]=="string"?s=e[i]:a===1?s=e[i].one:s=e[i].other.replace("{{count}}",a),o.addSuffix?o.comparison>0?"in "+s:s+" ago":s}t.exports=n.default})(IT,Ta);var wa={},kT={get exports(){return wa},set exports(t){wa=t}},Ea={},NT={get exports(){return Ea},set exports(t){Ea=t}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=e;function e(r){return function(i){var a=i||{},o=a.width?String(a.width):r.defaultWidth,s=r.formats[o]||r.formats[r.defaultWidth];return s}}t.exports=n.default})(NT,Ea);(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=r(Ea);function r(u){return u&&u.__esModule?u:{default:u}}var i={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},a={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},o={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},s={date:(0,e.default)({formats:i,defaultWidth:"full"}),time:(0,e.default)({formats:a,defaultWidth:"full"}),dateTime:(0,e.default)({formats:o,defaultWidth:"full"})},l=s;n.default=l,t.exports=n.default})(kT,wa);var Sa={},BT={get exports(){return Sa},set exports(t){Sa=t}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function r(i,a,o,s){return e[i]}t.exports=n.default})(BT,Sa);var Ma={},UT={get exports(){return Ma},set exports(t){Ma=t}},Aa={},$T={get exports(){return Aa},set exports(t){Aa=t}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=e;function e(r){return function(i,a){var o=a||{},s=o.context?String(o.context):"standalone",l;if(s==="formatting"&&r.formattingValues){var u=r.defaultFormattingWidth||r.defaultWidth,c=o.width?String(o.width):u;l=r.formattingValues[c]||r.formattingValues[u]}else{var f=r.defaultWidth,h=o.width?String(o.width):r.defaultWidth;l=r.values[h]||r.values[f]}var p=r.argumentCallback?r.argumentCallback(i):i;return l[p]}}t.exports=n.default})($T,Aa);(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=r(Aa);function r(p){return p&&p.__esModule?p:{default:p}}var i={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},a={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},o={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},s={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},l={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},u={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function c(p,d){var g=Number(p),m=g%100;if(m>20||m<10)switch(m%10){case 1:return g+"st";case 2:return g+"nd";case 3:return g+"rd"}return g+"th"}var f={ordinalNumber:c,era:(0,e.default)({values:i,defaultWidth:"wide"}),quarter:(0,e.default)({values:a,defaultWidth:"wide",argumentCallback:function(p){return Number(p)-1}}),month:(0,e.default)({values:o,defaultWidth:"wide"}),day:(0,e.default)({values:s,defaultWidth:"wide"}),dayPeriod:(0,e.default)({values:l,defaultWidth:"wide",formattingValues:u,defaultFormattingWidth:"wide"})},h=f;n.default=h,t.exports=n.default})(UT,Ma);var Ca={},VT={get exports(){return Ca},set exports(t){Ca=t}},Da={},HT={get exports(){return Da},set exports(t){Da=t}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=e;function e(r){return function(i,a){var o=String(i),s=a||{},l=o.match(r.matchPattern);if(!l)return null;var u=l[0],c=o.match(r.parsePattern);if(!c)return null;var f=r.valueCallback?r.valueCallback(c[0]):c[0];return f=s.valueCallback?s.valueCallback(f):f,{value:f,rest:o.slice(u.length)}}}t.exports=n.default})(HT,Da);var La={},FT={get exports(){return La},set exports(t){La=t}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=e;function e(a){return function(o,s){var l=String(o),u=s||{},c=u.width,f=c&&a.matchPatterns[c]||a.matchPatterns[a.defaultMatchWidth],h=l.match(f);if(!h)return null;var p=h[0],d=c&&a.parsePatterns[c]||a.parsePatterns[a.defaultParseWidth],g;return Object.prototype.toString.call(d)==="[object Array]"?g=i(d,function(m){return m.test(l)}):g=r(d,function(m){return m.test(l)}),g=a.valueCallback?a.valueCallback(g):g,g=u.valueCallback?u.valueCallback(g):g,{value:g,rest:l.slice(p.length)}}}function r(a,o){for(var s in a)if(a.hasOwnProperty(s)&&o(a[s]))return s}function i(a,o){for(var s=0;s<a.length;s++)if(o(a[s]))return s}t.exports=n.default})(FT,La);(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=i(Da),r=i(La);function i(_){return _&&_.__esModule?_:{default:_}}var a=/^(\d+)(th|st|nd|rd)?/i,o=/\d+/i,s={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},l={any:[/^b/i,/^(a|c)/i]},u={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},c={any:[/1/i,/2/i,/3/i,/4/i]},f={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},h={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},p={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},d={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},g={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},m={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},y={ordinalNumber:(0,e.default)({matchPattern:a,parsePattern:o,valueCallback:function(_){return parseInt(_,10)}}),era:(0,r.default)({matchPatterns:s,defaultMatchWidth:"wide",parsePatterns:l,defaultParseWidth:"any"}),quarter:(0,r.default)({matchPatterns:u,defaultMatchWidth:"wide",parsePatterns:c,defaultParseWidth:"any",valueCallback:function(_){return _+1}}),month:(0,r.default)({matchPatterns:f,defaultMatchWidth:"wide",parsePatterns:h,defaultParseWidth:"any"}),day:(0,r.default)({matchPatterns:p,defaultMatchWidth:"wide",parsePatterns:d,defaultParseWidth:"any"}),dayPeriod:(0,r.default)({matchPatterns:g,defaultMatchWidth:"any",parsePatterns:m,defaultParseWidth:"any"})},v=y;n.default=v,t.exports=n.default})(VT,Ca);(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=s(Ta),r=s(wa),i=s(Sa),a=s(Ma),o=s(Ca);function s(c){return c&&c.__esModule?c:{default:c}}var l={code:"en-US",formatDistance:e.default,formatLong:r.default,formatRelative:i.default,localize:a.default,match:o.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},u=l;n.default=u,t.exports=n.default})(RT,Oa);const GT=LT(Oa);var zT=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},Zn={type:le.END_LINE,threshold:16,numCharacter:14},WT={enabled:!0,position:rr.BOTTOM,clickable:!0,truncation:Zn,alignment:Lt.LEFT,order:null,additionalItems:[]},up={x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},cp={enabled:!0},du={enabled:!0,showTotal:!0,truncation:Zn,groupLabel:"Group"},fp={top:{visible:!0,includeZero:!0,truncation:Zn},bottom:{visible:!0,includeZero:!0,truncation:Zn},left:{visible:!0,includeZero:!0,truncation:Zn},right:{visible:!0,includeZero:!0,truncation:Zn}},Li={addSpaceOnEdges:1,showDayName:!1,localeObject:GT,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}},jT=typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled),jt={width:null,height:null,resizable:!0,theme:Ks.WHITE,tooltip:du,legend:WT,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:zT([{type:Tt.SHOW_AS_DATATABLE}],jT?[{type:Tt.MAKE_FULLSCREEN}]:[],[{type:Tt.EXPORT_CSV},{type:Tt.EXPORT_PNG},{type:Tt.EXPORT_JPG}])}},Pi=et({},jt,{axes:fp,timeScale:Li,grid:up,ruler:cp,zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:he.GRAPH_VIEW}}}),Mn=et({},Pi,{bars:{maxWidth:16,spacingFactor:.25},timeScale:et(Li,{addSpaceOnEdges:1})}),qT=et({},Mn,{}),YT=et({},Mn,{}),XT=et({},Mn,{bars:et({},Mn.bars,{dividerSize:1.5})}),ZT=et({},Mn,{}),pu=et({},Pi,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),KT=pu,hp=et({},pu,{points:{radius:3,filled:!1,enabled:!0}}),dp=et({},hp,{timeScale:et(Li,{addSpaceOnEdges:0})}),QT=dp,JT=et({},Pi,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:function(t,n){var e=Math.min(t.width,t.height);return[e*3/400,e*25/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:Ct.RADIUS,name:"Radius"}]}}),tw=et({},Pi,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:Ct.AREA,name:"Poor area"},{type:Ct.AREA,name:"Satisfactory area"},{type:Ct.AREA,name:"Great area"},{type:Ct.QUARTILE,name:"Quartiles"}]}}),ew=et({},Mn,{bars:{dividerSize:1.5},timeScale:et(Li,{addSpaceOnEdges:0})}),nw=et({},jt,{tooltip:et({},du,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:function(t,n){var e=Math.min(t.width,t.height);return[e*20/400,e*75/400]},wordMapsTo:"word"}}),pp=et({},jt,{pie:{labels:{formatter:null,enabled:!0},alignment:Lt.LEFT,sortFunction:null,valueMapsTo:"value"}}),rw=et({},jt,{legend:{enabled:!1},gauge:{type:bn.SEMI,arcWidth:16,deltaArrow:{size:function(t){return t/8},enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:function(t){return t/8},valueFontSize:function(t){return t/2.5},numberFormatter:function(t){return t.toFixed(2)%1!==0?t.toFixed(2).toLocaleString():t.toFixed().toLocaleString()},alignment:Lt.LEFT}}),iw=et({},pp,{donut:{center:{numberFontSize:function(t){return Math.min(t/100*24,24)+"px"},titleFontSize:function(t){return Math.min(t/100*15,15)+"px"},titleYPosition:function(t){return Math.min(t/80*20,20)},numberFormatter:function(t){return Math.floor(t).toLocaleString()}},alignment:Lt.LEFT}}),vp=et({},jt,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}}),aw=et({},vp,{legend:{enabled:!0}}),ow=et({},jt,{radar:{axes:{angle:"key",value:"value"},alignment:Lt.LEFT},tooltip:{gridline:{enabled:!0},valueFormatter:function(t){return t??"N/A"}}}),sw=et({},Mn,{comboChartTypes:[]}),lw=et({tree:{type:va.TREE}},jt,{}),uw=et({},jt,{data:et(jt.data,{groupMapsTo:"name"})}),cw=et({},jt,yn,{data:et(jt.data,{groupMapsTo:"name"})}),fw=et({},jt,{alluvial:{data:et(jt.data,{groupMapsTo:"source"}),nodeAlignment:Lt.CENTER,nodePadding:24,monochrome:!1,nodes:[]}}),hw=et({},jt,{axes:fp,heatmap:{divider:{state:ir.AUTO},colorLegend:{type:"linear"}}}),_t={chart:jt,axisChart:Pi,simpleBarChart:qT,groupedBarChart:YT,stackedBarChart:XT,boxplotChart:ZT,bubbleChart:JT,bulletChart:tw,histogramChart:ew,lineChart:hp,areaChart:dp,stackedAreaChart:QT,scatterChart:pu,lollipopChart:KT,pieChart:pp,donutChart:iw,meterChart:vp,proportionalMeterChart:aw,radarChart:ow,gaugeChart:rw,comboChart:sw,treeChart:lw,treemapChart:uw,circlePackChart:cw,wordCloudChart:nw,alluvialChart:fw,heatmapChart:hw};const gp=Object.freeze(Object.defineProperty({__proto__:null,alluvial:oe,area:Oe,axis:Ue,baseTooltip:du,boxplot:Qt,canvasZoomSettings:ar,carbonPrefix:Wt,circlePack:yn,color:Zl,defaultLegendAdditionalItems:zh,grid:up,heatmap:Qs,histogram:Fh,legend:St,lines:be,meter:kt,options:_t,pie:yt,radar:an,ruler:cp,spacers:Js,timeScale:Li,toolbar:_g,tooltips:Gh,transitions:tl,zoomBar:Yt},Symbol.toStringTag,{value:"Module"}));function Tn(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function dw(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function vu(t){let n,e,r;t.length!==2?(n=Tn,e=(s,l)=>Tn(t(s),l),r=(s,l)=>t(s)-l):(n=t===Tn||t===dw?t:pw,e=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(n(l,l)!==0)return c;do{const f=u+c>>>1;e(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(n(l,l)!==0)return c;do{const f=u+c>>>1;e(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function pw(){return 0}function vw(t){return t===null?NaN:+t}function*gw(t,n){if(n===void 0)for(let e of t)e!=null&&(e=+e)>=e&&(yield e);else{let e=-1;for(let r of t)(r=n(r,++e,t))!=null&&(r=+r)>=r&&(yield r)}}const mw=vu(Tn),yw=mw.right;vu(vw).center;const gu=yw;function _w(t,n){let e=0;if(n===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++e;else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(i=+i)>=i&&++e}return e}function we(t,n){let e,r;if(n===void 0)for(const i of t)i!=null&&(e===void 0?i>=i&&(e=r=i):(e>i&&(e=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=n(a,++i,t))!=null&&(e===void 0?a>=a&&(e=r=a):(e>a&&(e=a),r<a&&(r=a)))}return[e,r]}class $c extends Map{constructor(n,e=Ow){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(Vc(this,n))}has(n){return super.has(Vc(this,n))}set(n,e){return super.set(xw(this,n),e)}delete(n){return super.delete(bw(this,n))}}function Vc({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function xw({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function bw({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function Ow(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Tw(t){return t}function ww(t=Tn){if(t===Tn)return mp;if(typeof t!="function")throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||r===0?r:(t(e,e)===0)-(t(n,n)===0)}}function mp(t,n){return(t==null||!(t>=t))-(n==null||!(n>=n))||(t<n?-1:t>n?1:0)}var Ew=Array.prototype,Sw=Ew.slice;function Go(t){return()=>t}const Mw=Math.sqrt(50),Aw=Math.sqrt(10),Cw=Math.sqrt(2);function Pa(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Mw?10:a>=Aw?5:a>=Cw?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),l=Math.round(n*u),s/u<t&&++s,l/u>n&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),l=Math.round(n/u),s*u<t&&++s,l*u>n&&--l),l<s&&.5<=e&&e<2?Pa(t,n,e*2):[s,l,u]}function Ra(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,a,o]=r?Pa(n,t,e):Pa(t,n,e);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function _r(t,n,e){return n=+n,t=+t,e=+e,Pa(t,n,e)[2]}function fl(t,n,e){n=+n,t=+t,e=+e;const r=n<t,i=r?_r(n,t,e):_r(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function Dw(t,n,e){let r;for(;;){const i=_r(t,n,e);if(i===r||i===0||!isFinite(i))return[t,n];i>0?(t=Math.floor(t/i)*i,n=Math.ceil(n/i)*i):i<0&&(t=Math.ceil(t*i)/i,n=Math.floor(n*i)/i),r=i}}function Lw(t){return Math.max(1,Math.ceil(Math.log(_w(t))/Math.LN2)+1)}function Pw(){var t=Tw,n=we,e=Lw;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,u=new Array(o);for(a=0;a<o;++a)u[a]=t(i[a],a,i);var c=n(u),f=c[0],h=c[1],p=e(u,f,h);if(!Array.isArray(p)){const _=h,E=+p;if(n===we&&([f,h]=Dw(f,h,E)),p=Ra(f,h,E),p[0]<=f&&(l=_r(f,h,E)),p[p.length-1]>=h)if(_>=h&&n===we){const x=_r(f,h,E);isFinite(x)&&(x>0?h=(Math.floor(h/x)+1)*x:x<0&&(h=(Math.ceil(h*-x)+1)/-x))}else p.pop()}for(var d=p.length,g=0,m=d;p[g]<=f;)++g;for(;p[m-1]>h;)--m;(g||m<d)&&(p=p.slice(g,m),d=m-g);var y=new Array(d+1),v;for(a=0;a<=d;++a)v=y[a]=[],v.x0=a>0?p[a-1]:f,v.x1=a<d?p[a]:h;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=u[a])!=null&&f<=s&&s<=h&&y[Math.min(d,Math.floor((s-f)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=u[a])!=null&&f<=s&&s<=h){const _=Math.floor((f-s)*l);y[Math.min(d,_+(p[_]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=u[a])!=null&&f<=s&&s<=h&&y[gu(p,s,0,d)].push(i[a]);return y}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Go(i),r):t},r.domain=function(i){return arguments.length?(n=typeof i=="function"?i:Go([i[0],i[1]]),r):n},r.thresholds=function(i){return arguments.length?(e=typeof i=="function"?i:Go(Array.isArray(i)?Sw.call(i):i),r):e},r}function An(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function ln(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e>i||e===void 0&&i>=i)&&(e=i)}return e}function yp(t,n,e=0,r=1/0,i){if(n=Math.floor(n),e=Math.floor(Math.max(0,e)),r=Math.floor(Math.min(t.length-1,r)),!(e<=n&&n<=r))return t;for(i=i===void 0?mp:ww(i);r>e;){if(r-e>600){const l=r-e+1,u=n-e+1,c=Math.log(l),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(e,Math.floor(n-u*f/l+h)),d=Math.min(r,Math.floor(n+(l-u)*f/l+h));yp(t,n,p,d,i)}const a=t[n];let o=e,s=r;for(Lr(t,e,n),i(t[r],a)>0&&Lr(t,e,r);o<s;){for(Lr(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[e],a)===0?Lr(t,e,s):(++s,Lr(t,s,r)),s<=n&&(e=s+1),n<=s&&(r=s-1)}return t}function Lr(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function zo(t,n,e){if(t=Float64Array.from(gw(t,e)),!(!(r=t.length)||isNaN(n=+n))){if(n<=0||r<2)return ln(t);if(n>=1)return An(t);var r,i=(r-1)*n,a=Math.floor(i),o=An(yp(t,a).subarray(0,a+1)),s=ln(t.subarray(a+1));return o+(s-o)*(i-a)}}function Rw(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((n-t)/e))|0,a=new Array(i);++r<i;)a[r]=t+r*e;return a}function Ar(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}const Hc=Symbol("implicit");function bo(){var t=new $c,n=[],e=[],r=Hc;function i(a){let o=t.get(a);if(o===void 0){if(r!==Hc)return r;t.set(a,o=n.push(a)-1)}return e[o%e.length]}return i.domain=function(a){if(!arguments.length)return n.slice();n=[],t=new $c;for(const o of a)t.has(o)||t.set(o,n.push(o)-1);return i},i.range=function(a){return arguments.length?(e=Array.from(a),i):e.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return bo(n,e).unknown(r)},Ar.apply(i,arguments),i}function Ri(){var t=bo().unknown(void 0),n=t.domain,e=t.range,r=0,i=1,a,o,s=!1,l=0,u=0,c=.5;delete t.unknown;function f(){var h=n().length,p=i<r,d=p?i:r,g=p?r:i;a=(g-d)/Math.max(1,h-l+u*2),s&&(a=Math.floor(a)),d+=(g-d-a*(h-l))*c,o=a*(1-l),s&&(d=Math.round(d),o=Math.round(o));var m=Rw(h).map(function(y){return d+a*y});return e(p?m.reverse():m)}return t.domain=function(h){return arguments.length?(n(h),f()):n()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},t.copy=function(){return Ri(n(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},Ar.apply(f(),arguments)}function mu(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function _p(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Ii(){}var pi=.7,Ia=1/pi,sr="\\s*([+-]?\\d+)\\s*",vi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Iw=/^#([0-9a-f]{3,8})$/,kw=new RegExp(`^rgb\\(${sr},${sr},${sr}\\)$`),Nw=new RegExp(`^rgb\\(${Ee},${Ee},${Ee}\\)$`),Bw=new RegExp(`^rgba\\(${sr},${sr},${sr},${vi}\\)$`),Uw=new RegExp(`^rgba\\(${Ee},${Ee},${Ee},${vi}\\)$`),$w=new RegExp(`^hsl\\(${vi},${Ee},${Ee}\\)$`),Vw=new RegExp(`^hsla\\(${vi},${Ee},${Ee},${vi}\\)$`),Fc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mu(Ii,ze,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Gc,formatHex:Gc,formatHex8:Hw,formatHsl:Fw,formatRgb:zc,toString:zc});function Gc(){return this.rgb().formatHex()}function Hw(){return this.rgb().formatHex8()}function Fw(){return xp(this).formatHsl()}function zc(){return this.rgb().formatRgb()}function ze(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Iw.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Wc(n):e===3?new Xt(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?Fi(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?Fi(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=kw.exec(t))?new Xt(n[1],n[2],n[3],1):(n=Nw.exec(t))?new Xt(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Bw.exec(t))?Fi(n[1],n[2],n[3],n[4]):(n=Uw.exec(t))?Fi(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=$w.exec(t))?Yc(n[1],n[2]/100,n[3]/100,1):(n=Vw.exec(t))?Yc(n[1],n[2]/100,n[3]/100,n[4]):Fc.hasOwnProperty(t)?Wc(Fc[t]):t==="transparent"?new Xt(NaN,NaN,NaN,0):null}function Wc(t){return new Xt(t>>16&255,t>>8&255,t&255,1)}function Fi(t,n,e,r){return r<=0&&(t=n=e=NaN),new Xt(t,n,e,r)}function Gw(t){return t instanceof Ii||(t=ze(t)),t?(t=t.rgb(),new Xt(t.r,t.g,t.b,t.opacity)):new Xt}function hl(t,n,e,r){return arguments.length===1?Gw(t):new Xt(t,n,e,r??1)}function Xt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}mu(Xt,hl,_p(Ii,{brighter(t){return t=t==null?Ia:Math.pow(Ia,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?pi:Math.pow(pi,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xt(wn(this.r),wn(this.g),wn(this.b),ka(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jc,formatHex:jc,formatHex8:zw,formatRgb:qc,toString:qc}));function jc(){return`#${On(this.r)}${On(this.g)}${On(this.b)}`}function zw(){return`#${On(this.r)}${On(this.g)}${On(this.b)}${On((isNaN(this.opacity)?1:this.opacity)*255)}`}function qc(){const t=ka(this.opacity);return`${t===1?"rgb(":"rgba("}${wn(this.r)}, ${wn(this.g)}, ${wn(this.b)}${t===1?")":`, ${t})`}`}function ka(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function On(t){return t=wn(t),(t<16?"0":"")+t.toString(16)}function Yc(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new de(t,n,e,r)}function xp(t){if(t instanceof de)return new de(t.h,t.s,t.l,t.opacity);if(t instanceof Ii||(t=ze(t)),!t)return new de;if(t instanceof de)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),o=NaN,s=a-i,l=(a+i)/2;return s?(n===a?o=(e-r)/s+(e<r)*6:e===a?o=(r-n)/s+2:o=(n-e)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new de(o,s,l,t.opacity)}function yu(t,n,e,r){return arguments.length===1?xp(t):new de(t,n,e,r??1)}function de(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}mu(de,yu,_p(Ii,{brighter(t){return t=t==null?Ia:Math.pow(Ia,t),new de(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pi:Math.pow(pi,t),new de(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Xt(Wo(t>=240?t-240:t+120,i,r),Wo(t,i,r),Wo(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new de(Xc(this.h),Gi(this.s),Gi(this.l),ka(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ka(this.opacity);return`${t===1?"hsl(":"hsla("}${Xc(this.h)}, ${Gi(this.s)*100}%, ${Gi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Xc(t){return t=(t||0)%360,t<0?t+360:t}function Gi(t){return Math.max(0,Math.min(1,t||0))}function Wo(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const _u=t=>()=>t;function Ww(t,n){return function(e){return t+e*n}}function jw(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function qw(t){return(t=+t)==1?bp:function(n,e){return e-n?jw(n,e,t):_u(isNaN(n)?e:n)}}function bp(t,n){var e=n-t;return e?Ww(t,e):_u(isNaN(t)?n:t)}const Na=function t(n){var e=qw(n);function r(i,a){var o=e((i=hl(i)).r,(a=hl(a)).r),s=e(i.g,a.g),l=e(i.b,a.b),u=bp(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function Yw(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(a){for(i=0;i<e;++i)r[i]=t[i]*(1-a)+n[i]*a;return r}}function Xw(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Zw(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),a=new Array(e),o;for(o=0;o<r;++o)i[o]=ki(t[o],n[o]);for(;o<e;++o)a[o]=n[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Kw(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function te(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Qw(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=ki(t[i],n[i]):r[i]=n[i];return function(a){for(i in e)r[i]=e[i](a);return r}}var dl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jo=new RegExp(dl.source,"g");function Jw(t){return function(){return t}}function tE(t){return function(n){return t(n)+""}}function Op(t,n){var e=dl.lastIndex=jo.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",n=n+"";(r=dl.exec(t))&&(i=jo.exec(n));)(a=i.index)>e&&(a=n.slice(e,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:te(r,i)})),e=jo.lastIndex;return e<n.length&&(a=n.slice(e),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?tE(l[0].x):Jw(n):(n=l.length,function(u){for(var c=0,f;c<n;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function ki(t,n){var e=typeof n,r;return n==null||e==="boolean"?_u(n):(e==="number"?te:e==="string"?(r=ze(n))?(n=r,Na):Op:n instanceof ze?Na:n instanceof Date?Kw:Xw(n)?Yw:Array.isArray(n)?Zw:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Qw:te)(t,n)}function Tp(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var Zc=180/Math.PI,pl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wp(t,n,e,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+n*n))&&(t/=o,n/=o),(l=t*e+n*r)&&(e-=t*l,r-=n*l),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,l/=s),t*r<n*e&&(t=-t,n=-n,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(n,t)*Zc,skewX:Math.atan(l)*Zc,scaleX:o,scaleY:s}}var zi;function eE(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?pl:wp(n.a,n.b,n.c,n.d,n.e,n.f)}function nE(t){return t==null||(zi||(zi=document.createElementNS("http://www.w3.org/2000/svg","g")),zi.setAttribute("transform",t),!(t=zi.transform.baseVal.consolidate()))?pl:(t=t.matrix,wp(t.a,t.b,t.c,t.d,t.e,t.f))}function Ep(t,n,e,r){function i(u){return u.length?u.pop()+" ":""}function a(u,c,f,h,p,d){if(u!==f||c!==h){var g=p.push("translate(",null,n,null,e);d.push({i:g-4,x:te(u,f)},{i:g-2,x:te(c,h)})}else(f||h)&&p.push("translate("+f+n+h+e)}function o(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:te(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(u,c,f,h){u!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:te(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,h,p,d){if(u!==f||c!==h){var g=p.push(i(p)+"scale(",null,",",null,")");d.push({i:g-4,x:te(u,f)},{i:g-2,x:te(c,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=t(u),c=t(c),a(u.translateX,u.translateY,c.translateX,c.translateY,f,h),o(u.rotate,c.rotate,f,h),s(u.skewX,c.skewX,f,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(p){for(var d=-1,g=h.length,m;++d<g;)f[(m=h[d]).i]=m.x(p);return f.join("")}}}var rE=Ep(eE,"px, ","px)","deg)"),iE=Ep(nE,", ",")",")");function aE(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e}function oE(t){return function(){return t}}function sE(t){return+t}var Kc=[0,1];function Kn(t){return t}function vl(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:oE(isNaN(n)?NaN:.5)}function lE(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function uE(t,n,e){var r=t[0],i=t[1],a=n[0],o=n[1];return i<r?(r=vl(i,r),a=e(o,a)):(r=vl(r,i),a=e(a,o)),function(s){return a(r(s))}}function cE(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<r;)i[o]=vl(t[o],t[o+1]),a[o]=e(n[o],n[o+1]);return function(s){var l=gu(t,s,1,r)-1;return a[l](i[l](s))}}function xu(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Sp(){var t=Kc,n=Kc,e=ki,r,i,a,o=Kn,s,l,u;function c(){var h=Math.min(t.length,n.length);return o!==Kn&&(o=lE(t[0],t[h-1])),s=h>2?cE:uE,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=s(t.map(r),n,e)))(r(o(h)))}return f.invert=function(h){return o(i((u||(u=s(n,t.map(r),te)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,sE),c()):t.slice()},f.range=function(h){return arguments.length?(n=Array.from(h),c()):n.slice()},f.rangeRound=function(h){return n=Array.from(h),e=Tp,c()},f.clamp=function(h){return arguments.length?(o=h?!0:Kn,c()):o!==Kn},f.interpolate=function(h){return arguments.length?(e=h,c()):e},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,p){return r=h,i=p,c()}}function Mp(){return Sp()(Kn,Kn)}function fE(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ba(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function xr(t){return t=Ba(Math.abs(t)),t?t[1]:NaN}function hE(t,n){return function(e,r){for(var i=e.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}}function dE(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var pE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gi(t){if(!(n=pE.exec(t)))throw new Error("invalid format: "+t);var n;return new bu({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}gi.prototype=bu.prototype;function bu(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}bu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vE(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Ap;function gE(t,n){var e=Ba(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(Ap=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ba(t,Math.max(0,n+a-1))[0]}function Qc(t,n){var e=Ba(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Jc={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:fE,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Qc(t*100,n),r:Qc,s:gE,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function tf(t){return t}var ef=Array.prototype.map,nf=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function mE(t){var n=t.grouping===void 0||t.thousands===void 0?tf:hE(ef.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?tf:dE(ef.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=gi(f);var h=f.fill,p=f.align,d=f.sign,g=f.symbol,m=f.zero,y=f.width,v=f.comma,_=f.precision,E=f.trim,x=f.type;x==="n"?(v=!0,x="g"):Jc[x]||(_===void 0&&(_=12),E=!0,x="g"),(m||h==="0"&&p==="=")&&(m=!0,h="0",p="=");var O=g==="$"?e:g==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",P=g==="$"?r:/[%p]/.test(x)?o:"",S=Jc[x],A=/[defgprs%]/.test(x);_=_===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function I(w){var N=O,T=P,R,C,D;if(x==="c")T=S(w)+T,w="";else{w=+w;var k=w<0||1/w<0;if(w=isNaN(w)?l:S(Math.abs(w),_),E&&(w=vE(w)),k&&+w==0&&d!=="+"&&(k=!1),N=(k?d==="("?d:s:d==="-"||d==="("?"":d)+N,T=(x==="s"?nf[8+Ap/3]:"")+T+(k&&d==="("?")":""),A){for(R=-1,C=w.length;++R<C;)if(D=w.charCodeAt(R),48>D||D>57){T=(D===46?i+w.slice(R+1):w.slice(R))+T,w=w.slice(0,R);break}}}v&&!m&&(w=n(w,1/0));var $=N.length+w.length+T.length,L=$<y?new Array(y-$+1).join(h):"";switch(v&&m&&(w=n(L+w,L.length?y-T.length:1/0),L=""),p){case"<":w=N+w+T+L;break;case"=":w=N+L+w+T;break;case"^":w=L.slice(0,$=L.length>>1)+N+w+T+L.slice($);break;default:w=L+N+w+T;break}return a(w)}return I.toString=function(){return f+""},I}function c(f,h){var p=u((f=gi(f),f.type="f",f)),d=Math.max(-8,Math.min(8,Math.floor(xr(h)/3)))*3,g=Math.pow(10,-d),m=nf[8+d/3];return function(y){return p(g*y)+m}}return{format:u,formatPrefix:c}}var Wi,Ou,Cp;yE({thousands:",",grouping:[3],currency:["$",""]});function yE(t){return Wi=mE(t),Ou=Wi.format,Cp=Wi.formatPrefix,Wi}function _E(t){return Math.max(0,-xr(Math.abs(t)))}function xE(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xr(n)/3)))*3-xr(Math.abs(t)))}function bE(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,xr(n)-xr(t))+1}function OE(t,n,e,r){var i=fl(t,n,e),a;switch(r=gi(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(a=xE(i,o))&&(r.precision=a),Cp(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=bE(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=_E(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ou(r)}function Dp(t){var n=t.domain;return t.ticks=function(e){var r=n();return Ra(r[0],r[r.length-1],e??10)},t.tickFormat=function(e,r){var i=n();return OE(i[0],i[i.length-1],e??10,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);c-- >0;){if(u=_r(o,s,e),u===l)return r[i]=o,r[a]=s,n(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function Ce(){var t=Mp();return t.copy=function(){return xu(t,Ce())},Ar.apply(t,arguments),Dp(t)}function Lp(t,n){t=t.slice();var e=0,r=t.length-1,i=t[e],a=t[r],o;return a<i&&(o=e,e=r,r=o,o=i,i=a,a=o),t[e]=n.floor(i),t[r]=n.ceil(a),t}function rf(t){return Math.log(t)}function af(t){return Math.exp(t)}function TE(t){return-Math.log(-t)}function wE(t){return-Math.exp(-t)}function EE(t){return isFinite(t)?+("1e"+t):t<0?0:t}function SE(t){return t===10?EE:t===Math.E?Math.exp:n=>Math.pow(t,n)}function ME(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}function of(t){return(n,e)=>-t(-n,e)}function AE(t){const n=t(rf,af),e=n.domain;let r=10,i,a;function o(){return i=ME(r),a=SE(r),e()[0]<0?(i=of(i),a=of(a),t(TE,wE)):t(rf,af),n}return n.base=function(s){return arguments.length?(r=+s,o()):r},n.domain=function(s){return arguments.length?(e(s),o()):e()},n.ticks=s=>{const l=e();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let h=i(u),p=i(c),d,g;const m=s==null?10:+s;let y=[];if(!(r%1)&&p-h<m){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(d=1;d<r;++d)if(g=h<0?d/a(-h):d*a(h),!(g<u)){if(g>c)break;y.push(g)}}else for(;h<=p;++h)for(d=r-1;d>=1;--d)if(g=h>0?d/a(-h):d*a(h),!(g<u)){if(g>c)break;y.push(g)}y.length*2<m&&(y=Ra(u,c,m))}else y=Ra(h,p,Math.min(p-h,m)).map(a);return f?y.reverse():y},n.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=gi(l)).precision==null&&(l.trim=!0),l=Ou(l)),s===1/0)return l;const u=Math.max(1,r*s/n.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},n.nice=()=>e(Lp(e(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),n}function Pp(){const t=AE(Sp()).domain([1,10]);return t.copy=()=>xu(t,Pp()).base(t.base()),Ar.apply(t,arguments),t}function Rp(){var t=0,n=1,e=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[gu(r,l,0,e)]:a}function s(){var l=-1;for(r=new Array(e);++l<e;)r[l]=((l+1)*n-(l-e)*t)/(e+1);return o}return o.domain=function(l){return arguments.length?([t,n]=l,t=+t,n=+n,s()):[t,n]},o.range=function(l){return arguments.length?(e=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=e?[r[e-1],n]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Rp().domain([t,n]).range(i).unknown(a)},Ar.apply(Dp(o),arguments)}const qo=new Date,Yo=new Date;function Rt(t,n,e,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),n(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(n(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let u;do l.push(u=new Date(+a)),n(a,s),t(a);while(u<a&&a<o);return l},i.filter=a=>Rt(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;n(o,-1),!a(o););else for(;--s>=0;)for(;n(o,1),!a(o););}),e&&(i.count=(a,o)=>(qo.setTime(+a),Yo.setTime(+o),t(qo),t(Yo),Math.floor(e(qo,Yo))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Ua=Rt(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);Ua.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Rt(n=>{n.setTime(Math.floor(n/t)*t)},(n,e)=>{n.setTime(+n+e*t)},(n,e)=>(e-n)/t):Ua);Ua.range;const $e=1e3,ue=$e*60,Ve=ue*60,We=Ve*24,Tu=We*7,sf=We*30,Xo=We*365,Qn=Rt(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*$e)},(t,n)=>(n-t)/$e,t=>t.getUTCSeconds());Qn.range;const wu=Rt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$e)},(t,n)=>{t.setTime(+t+n*ue)},(t,n)=>(n-t)/ue,t=>t.getMinutes());wu.range;const CE=Rt(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*ue)},(t,n)=>(n-t)/ue,t=>t.getUTCMinutes());CE.range;const Eu=Rt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$e-t.getMinutes()*ue)},(t,n)=>{t.setTime(+t+n*Ve)},(t,n)=>(n-t)/Ve,t=>t.getHours());Eu.range;const DE=Rt(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*Ve)},(t,n)=>(n-t)/Ve,t=>t.getUTCHours());DE.range;const Ni=Rt(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ue)/We,t=>t.getDate()-1);Ni.range;const Su=Rt(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/We,t=>t.getUTCDate()-1);Su.range;const LE=Rt(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/We,t=>Math.floor(t/We));LE.range;function Nn(t){return Rt(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,e)=>{n.setDate(n.getDate()+e*7)},(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*ue)/Tu)}const Oo=Nn(0),$a=Nn(1),PE=Nn(2),RE=Nn(3),br=Nn(4),IE=Nn(5),kE=Nn(6);Oo.range;$a.range;PE.range;RE.range;br.range;IE.range;kE.range;function Bn(t){return Rt(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e*7)},(n,e)=>(e-n)/Tu)}const Ip=Bn(0),Va=Bn(1),NE=Bn(2),BE=Bn(3),Or=Bn(4),UE=Bn(5),$E=Bn(6);Ip.range;Va.range;NE.range;BE.range;Or.range;UE.range;$E.range;const Mu=Rt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Mu.range;const VE=Rt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());VE.range;const je=Rt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());je.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rt(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e*t)});je.range;const Cn=Rt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Cn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rt(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e*t)});Cn.range;function HE(t,n,e,r,i,a){const o=[[Qn,1,$e],[Qn,5,5*$e],[Qn,15,15*$e],[Qn,30,30*$e],[a,1,ue],[a,5,5*ue],[a,15,15*ue],[a,30,30*ue],[i,1,Ve],[i,3,3*Ve],[i,6,6*Ve],[i,12,12*Ve],[r,1,We],[r,2,2*We],[e,1,Tu],[n,1,sf],[n,3,3*sf],[t,1,Xo]];function s(u,c,f){const h=c<u;h&&([u,c]=[c,u]);const p=f&&typeof f.range=="function"?f:l(u,c,f),d=p?p.range(u,+c+1):[];return h?d.reverse():d}function l(u,c,f){const h=Math.abs(c-u)/f,p=vu(([,,m])=>m).right(o,h);if(p===o.length)return t.every(fl(u/Xo,c/Xo,f));if(p===0)return Ua.every(Math.max(fl(u,c,f),1));const[d,g]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return d.every(g)}return[s,l]}const[FE,GE]=HE(je,Mu,Oo,Ni,Eu,wu);function Zo(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ko(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Pr(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function zE(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=Rr(i),c=Ir(i),f=Rr(a),h=Ir(a),p=Rr(o),d=Ir(o),g=Rr(s),m=Ir(s),y=Rr(l),v=Ir(l),_={a:k,A:$,b:L,B:V,c:null,d:df,e:df,f:dS,g:TS,G:ES,H:cS,I:fS,j:hS,L:kp,m:pS,M:vS,p:H,q:j,Q:gf,s:mf,S:gS,u:mS,U:yS,V:_S,w:xS,W:bS,x:null,X:null,y:OS,Y:wS,Z:SS,"%":vf},E={a:tt,A:it,b:lt,B:vt,c:null,d:pf,e:pf,f:DS,g:VS,G:FS,H:MS,I:AS,j:CS,L:Bp,m:LS,M:PS,p:rt,q:ut,Q:gf,s:mf,S:RS,u:IS,U:kS,V:NS,w:BS,W:US,x:null,X:null,y:$S,Y:HS,Z:GS,"%":vf},x={a:I,A:w,b:N,B:T,c:R,d:ff,e:ff,f:oS,g:cf,G:uf,H:hf,I:hf,j:nS,L:aS,m:eS,M:rS,p:A,q:tS,Q:lS,s:uS,S:iS,u:XE,U:ZE,V:KE,w:YE,W:QE,x:C,X:D,y:cf,Y:uf,Z:JE,"%":sS};_.x=O(e,_),_.X=O(r,_),_.c=O(n,_),E.x=O(e,E),E.X=O(r,E),E.c=O(n,E);function O(Y,X){return function(Z){var z=[],pt=-1,ft=0,G=Y.length,q,F,ht;for(Z instanceof Date||(Z=new Date(+Z));++pt<G;)Y.charCodeAt(pt)===37&&(z.push(Y.slice(ft,pt)),(F=lf[q=Y.charAt(++pt)])!=null?q=Y.charAt(++pt):F=q==="e"?" ":"0",(ht=X[q])&&(q=ht(Z,F)),z.push(q),ft=pt+1);return z.push(Y.slice(ft,pt)),z.join("")}}function P(Y,X){return function(Z){var z=Pr(1900,void 0,1),pt=S(z,Y,Z+="",0),ft,G;if(pt!=Z.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(X&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(ft=Ko(Pr(z.y,0,1)),G=ft.getUTCDay(),ft=G>4||G===0?Va.ceil(ft):Va(ft),ft=Su.offset(ft,(z.V-1)*7),z.y=ft.getUTCFullYear(),z.m=ft.getUTCMonth(),z.d=ft.getUTCDate()+(z.w+6)%7):(ft=Zo(Pr(z.y,0,1)),G=ft.getDay(),ft=G>4||G===0?$a.ceil(ft):$a(ft),ft=Ni.offset(ft,(z.V-1)*7),z.y=ft.getFullYear(),z.m=ft.getMonth(),z.d=ft.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),G="Z"in z?Ko(Pr(z.y,0,1)).getUTCDay():Zo(Pr(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(G+5)%7:z.w+z.U*7-(G+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,Ko(z)):Zo(z)}}function S(Y,X,Z,z){for(var pt=0,ft=X.length,G=Z.length,q,F;pt<ft;){if(z>=G)return-1;if(q=X.charCodeAt(pt++),q===37){if(q=X.charAt(pt++),F=x[q in lf?X.charAt(pt++):q],!F||(z=F(Y,Z,z))<0)return-1}else if(q!=Z.charCodeAt(z++))return-1}return z}function A(Y,X,Z){var z=u.exec(X.slice(Z));return z?(Y.p=c.get(z[0].toLowerCase()),Z+z[0].length):-1}function I(Y,X,Z){var z=p.exec(X.slice(Z));return z?(Y.w=d.get(z[0].toLowerCase()),Z+z[0].length):-1}function w(Y,X,Z){var z=f.exec(X.slice(Z));return z?(Y.w=h.get(z[0].toLowerCase()),Z+z[0].length):-1}function N(Y,X,Z){var z=y.exec(X.slice(Z));return z?(Y.m=v.get(z[0].toLowerCase()),Z+z[0].length):-1}function T(Y,X,Z){var z=g.exec(X.slice(Z));return z?(Y.m=m.get(z[0].toLowerCase()),Z+z[0].length):-1}function R(Y,X,Z){return S(Y,n,X,Z)}function C(Y,X,Z){return S(Y,e,X,Z)}function D(Y,X,Z){return S(Y,r,X,Z)}function k(Y){return o[Y.getDay()]}function $(Y){return a[Y.getDay()]}function L(Y){return l[Y.getMonth()]}function V(Y){return s[Y.getMonth()]}function H(Y){return i[+(Y.getHours()>=12)]}function j(Y){return 1+~~(Y.getMonth()/3)}function tt(Y){return o[Y.getUTCDay()]}function it(Y){return a[Y.getUTCDay()]}function lt(Y){return l[Y.getUTCMonth()]}function vt(Y){return s[Y.getUTCMonth()]}function rt(Y){return i[+(Y.getUTCHours()>=12)]}function ut(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var X=O(Y+="",_);return X.toString=function(){return Y},X},parse:function(Y){var X=P(Y+="",!1);return X.toString=function(){return Y},X},utcFormat:function(Y){var X=O(Y+="",E);return X.toString=function(){return Y},X},utcParse:function(Y){var X=P(Y+="",!0);return X.toString=function(){return Y},X}}}var lf={"-":"",_:" ",0:"0"},Nt=/^\s*\d+/,WE=/^%/,jE=/[\\^$*+?|[\]().{}]/g;function dt(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<e?new Array(e-a+1).join(n)+i:i)}function qE(t){return t.replace(jE,"\\$&")}function Rr(t){return new RegExp("^(?:"+t.map(qE).join("|")+")","i")}function Ir(t){return new Map(t.map((n,e)=>[n.toLowerCase(),e]))}function YE(t,n,e){var r=Nt.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function XE(t,n,e){var r=Nt.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function ZE(t,n,e){var r=Nt.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function KE(t,n,e){var r=Nt.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function QE(t,n,e){var r=Nt.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function uf(t,n,e){var r=Nt.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function cf(t,n,e){var r=Nt.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function JE(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function tS(t,n,e){var r=Nt.exec(n.slice(e,e+1));return r?(t.q=r[0]*3-3,e+r[0].length):-1}function eS(t,n,e){var r=Nt.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function ff(t,n,e){var r=Nt.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function nS(t,n,e){var r=Nt.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function hf(t,n,e){var r=Nt.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function rS(t,n,e){var r=Nt.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function iS(t,n,e){var r=Nt.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function aS(t,n,e){var r=Nt.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function oS(t,n,e){var r=Nt.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function sS(t,n,e){var r=WE.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function lS(t,n,e){var r=Nt.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function uS(t,n,e){var r=Nt.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function df(t,n){return dt(t.getDate(),n,2)}function cS(t,n){return dt(t.getHours(),n,2)}function fS(t,n){return dt(t.getHours()%12||12,n,2)}function hS(t,n){return dt(1+Ni.count(je(t),t),n,3)}function kp(t,n){return dt(t.getMilliseconds(),n,3)}function dS(t,n){return kp(t,n)+"000"}function pS(t,n){return dt(t.getMonth()+1,n,2)}function vS(t,n){return dt(t.getMinutes(),n,2)}function gS(t,n){return dt(t.getSeconds(),n,2)}function mS(t){var n=t.getDay();return n===0?7:n}function yS(t,n){return dt(Oo.count(je(t)-1,t),n,2)}function Np(t){var n=t.getDay();return n>=4||n===0?br(t):br.ceil(t)}function _S(t,n){return t=Np(t),dt(br.count(je(t),t)+(je(t).getDay()===4),n,2)}function xS(t){return t.getDay()}function bS(t,n){return dt($a.count(je(t)-1,t),n,2)}function OS(t,n){return dt(t.getFullYear()%100,n,2)}function TS(t,n){return t=Np(t),dt(t.getFullYear()%100,n,2)}function wS(t,n){return dt(t.getFullYear()%1e4,n,4)}function ES(t,n){var e=t.getDay();return t=e>=4||e===0?br(t):br.ceil(t),dt(t.getFullYear()%1e4,n,4)}function SS(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+dt(n/60|0,"0",2)+dt(n%60,"0",2)}function pf(t,n){return dt(t.getUTCDate(),n,2)}function MS(t,n){return dt(t.getUTCHours(),n,2)}function AS(t,n){return dt(t.getUTCHours()%12||12,n,2)}function CS(t,n){return dt(1+Su.count(Cn(t),t),n,3)}function Bp(t,n){return dt(t.getUTCMilliseconds(),n,3)}function DS(t,n){return Bp(t,n)+"000"}function LS(t,n){return dt(t.getUTCMonth()+1,n,2)}function PS(t,n){return dt(t.getUTCMinutes(),n,2)}function RS(t,n){return dt(t.getUTCSeconds(),n,2)}function IS(t){var n=t.getUTCDay();return n===0?7:n}function kS(t,n){return dt(Ip.count(Cn(t)-1,t),n,2)}function Up(t){var n=t.getUTCDay();return n>=4||n===0?Or(t):Or.ceil(t)}function NS(t,n){return t=Up(t),dt(Or.count(Cn(t),t)+(Cn(t).getUTCDay()===4),n,2)}function BS(t){return t.getUTCDay()}function US(t,n){return dt(Va.count(Cn(t)-1,t),n,2)}function $S(t,n){return dt(t.getUTCFullYear()%100,n,2)}function VS(t,n){return t=Up(t),dt(t.getUTCFullYear()%100,n,2)}function HS(t,n){return dt(t.getUTCFullYear()%1e4,n,4)}function FS(t,n){var e=t.getUTCDay();return t=e>=4||e===0?Or(t):Or.ceil(t),dt(t.getUTCFullYear()%1e4,n,4)}function GS(){return"+0000"}function vf(){return"%"}function gf(t){return+t}function mf(t){return Math.floor(+t/1e3)}var Hn,$p;zS({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zS(t){return Hn=zE(t),$p=Hn.format,Hn.parse,Hn.utcFormat,Hn.utcParse,Hn}function WS(t){return new Date(t)}function jS(t){return t instanceof Date?+t:+new Date(+t)}function Vp(t,n,e,r,i,a,o,s,l,u){var c=Mp(),f=c.invert,h=c.domain,p=u(".%L"),d=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),_=u("%B"),E=u("%Y");function x(O){return(l(O)<O?p:s(O)<O?d:o(O)<O?g:a(O)<O?m:r(O)<O?i(O)<O?y:v:e(O)<O?_:E)(O)}return c.invert=function(O){return new Date(f(O))},c.domain=function(O){return arguments.length?h(Array.from(O,jS)):h().map(WS)},c.ticks=function(O){var P=h();return t(P[0],P[P.length-1],O??10)},c.tickFormat=function(O,P){return P==null?x:u(P)},c.nice=function(O){var P=h();return(!O||typeof O.range!="function")&&(O=n(P[0],P[P.length-1],O??10)),O?h(Lp(P,O)):c},c.copy=function(){return xu(c,Vp(t,n,e,r,i,a,o,s,l,u))},c}function Hp(){return Ar.apply(Vp(FE,GE,je,Mu,Oo,Ni,Eu,wu,Qn,$p).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function at(t){return function(){return t}}const yf=Math.abs,$t=Math.atan2,hn=Math.cos,qS=Math.max,Qo=Math.min,ye=Math.sin,Jn=Math.sqrt,Ft=1e-12,mi=Math.PI,Ha=mi/2,ea=2*mi;function YS(t){return t>1?0:t<-1?mi:Math.acos(t)}function _f(t){return t>=1?Ha:t<=-1?-Ha:Math.asin(t)}const gl=Math.PI,ml=2*gl,vn=1e-6,XS=ml-vn;function Fp(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function ZS(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return Fp;const e=10**n;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}let KS=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?Fp:ZS(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,r,i){this._append`Q${+n},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(n,e,r,i,a,o){this._append`C${+n},${+e},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(n,e,r,i,a){if(n=+n,e=+e,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-n,u=i-e,c=o-n,f=s-e,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(h>vn)if(!(Math.abs(f*l-u*c)>vn)||!a)this._append`L${this._x1=n},${this._y1=e}`;else{let p=r-o,d=i-s,g=l*l+u*u,m=p*p+d*d,y=Math.sqrt(g),v=Math.sqrt(h),_=a*Math.tan((gl-Math.acos((g+h-m)/(2*y*v)))/2),E=_/v,x=_/y;Math.abs(E-1)>vn&&this._append`L${n+E*c},${e+E*f}`,this._append`A${a},${a},0,0,${+(f*p>c*d)},${this._x1=n+x*l},${this._y1=e+x*u}`}}arc(n,e,r,i,a,o){if(n=+n,e=+e,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=n+s,c=e+l,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>vn||Math.abs(this._y1-c)>vn)&&this._append`L${u},${c}`,r&&(h<0&&(h=h%ml+ml),h>XS?this._append`A${r},${r},0,1,${f},${n-s},${e-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:h>vn&&this._append`A${r},${r},0,${+(h>=gl)},${f},${this._x1=n+r*Math.cos(a)},${this._y1=e+r*Math.sin(a)}`)}rect(n,e,r,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function To(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(e==null)n=null;else{const r=Math.floor(e);if(!(r>=0))throw new RangeError(`invalid digits: ${e}`);n=r}return t},()=>new KS(n)}function QS(t){return t.innerRadius}function JS(t){return t.outerRadius}function tM(t){return t.startAngle}function eM(t){return t.endAngle}function nM(t){return t&&t.padAngle}function rM(t,n,e,r,i,a,o,s){var l=e-t,u=r-n,c=o-i,f=s-a,h=f*l-c*u;if(!(h*h<Ft))return h=(c*(n-a)-f*(t-i))/h,[t+h*l,n+h*u]}function ji(t,n,e,r,i,a,o){var s=t-e,l=n-r,u=(o?a:-a)/Jn(s*s+l*l),c=u*l,f=-u*s,h=t+c,p=n+f,d=e+c,g=r+f,m=(h+d)/2,y=(p+g)/2,v=d-h,_=g-p,E=v*v+_*_,x=i-a,O=h*g-d*p,P=(_<0?-1:1)*Jn(qS(0,x*x*E-O*O)),S=(O*_-v*P)/E,A=(-O*v-_*P)/E,I=(O*_+v*P)/E,w=(-O*v+_*P)/E,N=S-m,T=A-y,R=I-m,C=w-y;return N*N+T*T>R*R+C*C&&(S=I,A=w),{cx:S,cy:A,x01:-c,y01:-f,x11:S*(i/x-1),y11:A*(i/x-1)}}function yi(){var t=QS,n=JS,e=at(0),r=null,i=tM,a=eM,o=nM,s=null,l=To(u);function u(){var c,f,h=+t.apply(this,arguments),p=+n.apply(this,arguments),d=i.apply(this,arguments)-Ha,g=a.apply(this,arguments)-Ha,m=yf(g-d),y=g>d;if(s||(s=c=l()),p<h&&(f=p,p=h,h=f),!(p>Ft))s.moveTo(0,0);else if(m>ea-Ft)s.moveTo(p*hn(d),p*ye(d)),s.arc(0,0,p,d,g,!y),h>Ft&&(s.moveTo(h*hn(g),h*ye(g)),s.arc(0,0,h,g,d,y));else{var v=d,_=g,E=d,x=g,O=m,P=m,S=o.apply(this,arguments)/2,A=S>Ft&&(r?+r.apply(this,arguments):Jn(h*h+p*p)),I=Qo(yf(p-h)/2,+e.apply(this,arguments)),w=I,N=I,T,R;if(A>Ft){var C=_f(A/h*ye(S)),D=_f(A/p*ye(S));(O-=C*2)>Ft?(C*=y?1:-1,E+=C,x-=C):(O=0,E=x=(d+g)/2),(P-=D*2)>Ft?(D*=y?1:-1,v+=D,_-=D):(P=0,v=_=(d+g)/2)}var k=p*hn(v),$=p*ye(v),L=h*hn(x),V=h*ye(x);if(I>Ft){var H=p*hn(_),j=p*ye(_),tt=h*hn(E),it=h*ye(E),lt;if(m<mi)if(lt=rM(k,$,tt,it,H,j,L,V)){var vt=k-lt[0],rt=$-lt[1],ut=H-lt[0],Y=j-lt[1],X=1/ye(YS((vt*ut+rt*Y)/(Jn(vt*vt+rt*rt)*Jn(ut*ut+Y*Y)))/2),Z=Jn(lt[0]*lt[0]+lt[1]*lt[1]);w=Qo(I,(h-Z)/(X-1)),N=Qo(I,(p-Z)/(X+1))}else w=N=0}P>Ft?N>Ft?(T=ji(tt,it,k,$,p,N,y),R=ji(H,j,L,V,p,N,y),s.moveTo(T.cx+T.x01,T.cy+T.y01),N<I?s.arc(T.cx,T.cy,N,$t(T.y01,T.x01),$t(R.y01,R.x01),!y):(s.arc(T.cx,T.cy,N,$t(T.y01,T.x01),$t(T.y11,T.x11),!y),s.arc(0,0,p,$t(T.cy+T.y11,T.cx+T.x11),$t(R.cy+R.y11,R.cx+R.x11),!y),s.arc(R.cx,R.cy,N,$t(R.y11,R.x11),$t(R.y01,R.x01),!y))):(s.moveTo(k,$),s.arc(0,0,p,v,_,!y)):s.moveTo(k,$),!(h>Ft)||!(O>Ft)?s.lineTo(L,V):w>Ft?(T=ji(L,V,H,j,h,-w,y),R=ji(k,$,tt,it,h,-w,y),s.lineTo(T.cx+T.x01,T.cy+T.y01),w<I?s.arc(T.cx,T.cy,w,$t(T.y01,T.x01),$t(R.y01,R.x01),!y):(s.arc(T.cx,T.cy,w,$t(T.y01,T.x01),$t(T.y11,T.x11),!y),s.arc(0,0,h,$t(T.cy+T.y11,T.cx+T.x11),$t(R.cy+R.y11,R.cx+R.x11),y),s.arc(R.cx,R.cy,w,$t(R.y11,R.x11),$t(R.y01,R.x01),!y))):s.arc(0,0,h,x,E,y)}if(s.closePath(),c)return s=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-mi/2;return[hn(f)*c,ye(f)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:at(+c),u):t},u.outerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:at(+c),u):n},u.cornerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:at(+c),u):e},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:at(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:at(+c),u):i},u.endAngle=function(c){return arguments.length?(a=typeof c=="function"?c:at(+c),u):a},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:at(+c),u):o},u.context=function(c){return arguments.length?(s=c??null,u):s},u}var iM=Array.prototype.slice;function wo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Gp(t){this._context=t}Gp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function Eo(t){return new Gp(t)}function Au(t){return t[0]}function Cu(t){return t[1]}function So(t,n){var e=at(!0),r=null,i=Eo,a=null,o=To(s);t=typeof t=="function"?t:t===void 0?Au:at(t),n=typeof n=="function"?n:n===void 0?Cu:at(n);function s(l){var u,c=(l=wo(l)).length,f,h=!1,p;for(r==null&&(a=i(p=o())),u=0;u<=c;++u)!(u<c&&e(f=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,u,l),+n(f,u,l));if(p)return a=null,p+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:at(+l),s):t},s.y=function(l){return arguments.length?(n=typeof l=="function"?l:at(+l),s):n},s.defined=function(l){return arguments.length?(e=typeof l=="function"?l:at(!!l),s):e},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function Du(t,n,e){var r=null,i=at(!0),a=null,o=Eo,s=null,l=To(u);t=typeof t=="function"?t:t===void 0?Au:at(+t),n=typeof n=="function"?n:at(n===void 0?0:+n),e=typeof e=="function"?e:e===void 0?Cu:at(+e);function u(f){var h,p,d,g=(f=wo(f)).length,m,y=!1,v,_=new Array(g),E=new Array(g);for(a==null&&(s=o(v=l())),h=0;h<=g;++h){if(!(h<g&&i(m=f[h],h,f))===y)if(y=!y)p=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=h-1;d>=p;--d)s.point(_[d],E[d]);s.lineEnd(),s.areaEnd()}y&&(_[h]=+t(m,h,f),E[h]=+n(m,h,f),s.point(r?+r(m,h,f):_[h],e?+e(m,h,f):E[h]))}if(v)return s=null,v+""||null}function c(){return So().defined(i).curve(o).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:at(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:at(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:at(+f),u):r},u.y=function(f){return arguments.length?(n=typeof f=="function"?f:at(+f),e=null,u):n},u.y0=function(f){return arguments.length?(n=typeof f=="function"?f:at(+f),u):n},u.y1=function(f){return arguments.length?(e=f==null?null:typeof f=="function"?f:at(+f),u):e},u.lineX0=u.lineY0=function(){return c().x(t).y(n)},u.lineY1=function(){return c().x(t).y(e)},u.lineX1=function(){return c().x(r).y(n)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:at(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,a!=null&&(s=o(a)),u):o},u.context=function(f){return arguments.length?(f==null?a=s=null:s=o(a=f),u):a},u}function aM(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function oM(t){return t}function sM(){var t=oM,n=aM,e=null,r=at(0),i=at(ea),a=at(0);function o(s){var l,u=(s=wo(s)).length,c,f,h=0,p=new Array(u),d=new Array(u),g=+r.apply(this,arguments),m=Math.min(ea,Math.max(-ea,i.apply(this,arguments)-g)),y,v=Math.min(Math.abs(m)/u,a.apply(this,arguments)),_=v*(m<0?-1:1),E;for(l=0;l<u;++l)(E=d[p[l]=l]=+t(s[l],l,s))>0&&(h+=E);for(n!=null?p.sort(function(x,O){return n(d[x],d[O])}):e!=null&&p.sort(function(x,O){return e(s[x],s[O])}),l=0,f=h?(m-u*_)/h:0;l<u;++l,g=y)c=p[l],E=d[c],y=g+(E>0?E*f:0)+_,d[c]={data:s[c],index:l,value:E,startAngle:g,endAngle:y,padAngle:v};return d}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:at(+s),o):t},o.sortValues=function(s){return arguments.length?(n=s,e=null,o):n},o.sort=function(s){return arguments.length?(e=s,n=null,o):e},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:at(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:at(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:at(+s),o):a},o}var lM=Wp(Eo);function zp(t){this._curve=t}zp.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function Wp(t){function n(e){return new zp(t(e))}return n._curve=t,n}function uM(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(e){return arguments.length?n(Wp(e)):n()._curve},t}function cM(){return uM(So().curve(lM))}class fM{constructor(n,e){this._context=n,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,e){switch(n=+n,e=+e,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,e,n,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,n,this._y0,n,e);break}}this._x0=n,this._y0=e}}function hM(t){return new fM(t,!0)}function dM(t){return t.source}function pM(t){return t.target}function vM(t){let n=dM,e=pM,r=Au,i=Cu,a=null,o=null,s=To(l);function l(){let u;const c=iM.call(arguments),f=n.apply(this,c),h=e.apply(this,c);if(a==null&&(o=t(u=s())),o.lineStart(),c[0]=f,o.point(+r.apply(this,c),+i.apply(this,c)),c[0]=h,o.point(+r.apply(this,c),+i.apply(this,c)),o.lineEnd(),u)return o=null,u+""||null}return l.source=function(u){return arguments.length?(n=u,l):n},l.target=function(u){return arguments.length?(e=u,l):e},l.x=function(u){return arguments.length?(r=typeof u=="function"?u:at(+u),l):r},l.y=function(u){return arguments.length?(i=typeof u=="function"?u:at(+u),l):i},l.context=function(u){return arguments.length?(u==null?a=o=null:o=t(a=u),l):a},l}function gM(){return vM(hM)}function un(){}function Fa(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function Mo(t){this._context=t}Mo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fa(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function mM(t){return new Mo(t)}function jp(t){this._context=t}jp.prototype={areaStart:un,areaEnd:un,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Fa(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function yM(t){return new jp(t)}function qp(t){this._context=t}qp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:Fa(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function _M(t){return new qp(t)}function Yp(t,n){this._basis=new Mo(t),this._beta=n}Yp.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r=t[0],i=n[0],a=t[e]-r,o=n[e]-i,s=-1,l;++s<=e;)l=s/e,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+l*a),this._beta*n[s]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};const xM=function t(n){function e(r){return n===1?new Mo(r):new Yp(r,n)}return e.beta=function(r){return t(+r)},e}(.85);function Ga(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Lu(t,n){this._context=t,this._k=(1-n)/6}Lu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ga(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Ga(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const bM=function t(n){function e(r){return new Lu(r,n)}return e.tension=function(r){return t(+r)},e}(0);function Pu(t,n){this._context=t,this._k=(1-n)/6}Pu.prototype={areaStart:un,areaEnd:un,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Ga(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const OM=function t(n){function e(r){return new Pu(r,n)}return e.tension=function(r){return t(+r)},e}(0);function Ru(t,n){this._context=t,this._k=(1-n)/6}Ru.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ga(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const TM=function t(n){function e(r){return new Ru(r,n)}return e.tension=function(r){return t(+r)},e}(0);function Iu(t,n,e){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Ft){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Ft){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-n*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-e*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function Xp(t,n){this._context=t,this._alpha=n}Xp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Iu(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const wM=function t(n){function e(r){return n?new Xp(r,n):new Lu(r,0)}return e.alpha=function(r){return t(+r)},e}(.5);function Zp(t,n){this._context=t,this._alpha=n}Zp.prototype={areaStart:un,areaEnd:un,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Iu(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const EM=function t(n){function e(r){return n?new Zp(r,n):new Pu(r,0)}return e.alpha=function(r){return t(+r)},e}(.5);function Kp(t,n){this._context=t,this._alpha=n}Kp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Iu(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const SM=function t(n){function e(r){return n?new Kp(r,n):new Ru(r,0)}return e.alpha=function(r){return t(+r)},e}(.5);function Qp(t){this._context=t}Qp.prototype={areaStart:un,areaEnd:un,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function Jp(t){return new Qp(t)}function xf(t){return t<0?-1:1}function bf(t,n,e){var r=t._x1-t._x0,i=n-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(e-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(xf(a)+xf(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Of(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Jo(t,n,e){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*n,a-s,o-s*e,a,o)}function za(t){this._context=t}za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jo(this,this._t0,Of(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Jo(this,Of(this,e=bf(this,t,n)),e);break;default:Jo(this,this._t0,e=bf(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}};function tv(t){this._context=new ev(t)}(tv.prototype=Object.create(za.prototype)).point=function(t,n){za.prototype.point.call(this,n,t)};function ev(t){this._context=t}ev.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,a){this._context.bezierCurveTo(n,t,r,e,a,i)}};function MM(t){return new za(t)}function AM(t){return new tv(t)}function nv(t){this._context=t}nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),e===2)this._context.lineTo(t[1],n[1]);else for(var r=Tf(t),i=Tf(n),a=0,o=1;o<e;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],n[o]);(this._line||this._line!==0&&e===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};function Tf(t){var n,e=t.length-1,r,i=new Array(e),a=new Array(e),o=new Array(e);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],n=1;n<e-1;++n)i[n]=1,a[n]=4,o[n]=4*t[n]+2*t[n+1];for(i[e-1]=2,a[e-1]=7,o[e-1]=8*t[e-1]+t[e],n=1;n<e;++n)r=i[n]/a[n-1],a[n]-=r,o[n]-=r*o[n-1];for(i[e-1]=o[e-1]/a[e-1],n=e-2;n>=0;--n)i[n]=(o[n]-i[n+1])/a[n];for(a[e-1]=(t[e]+i[e-1])/2,n=0;n<e-1;++n)a[n]=2*t[n+1]-i[n+1];return[i,a]}function CM(t){return new nv(t)}function Ao(t,n){this._context=t,this._t=n}Ao.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}break}}this._x=t,this._y=n}};function DM(t){return new Ao(t,.5)}function LM(t){return new Ao(t,0)}function PM(t){return new Ao(t,1)}function wf(t,n){if((o=t.length)>1)for(var e=1,r,i,a=t[n[0]],o,s=a.length;e<o;++e)for(i=a,a=t[n[e]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ef(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function RM(t,n){return t[n]}function IM(t){const n=[];return n.key=t,n}function ts(){var t=at([]),n=Ef,e=wf,r=RM;function i(a){var o=Array.from(t.apply(this,arguments),IM),s,l=o.length,u=-1,c;for(const f of a)for(s=0,++u;s<l;++s)(o[s][u]=[0,+r(f,o[s].key,u,a)]).data=f;for(s=0,c=wo(n(o));s<l;++s)o[c[s]].index=s;return e(o,c),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:at(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:at(+a),i):r},i.order=function(a){return arguments.length?(n=a==null?Ef:typeof a=="function"?a:at(Array.from(a)),i):n},i.offset=function(a){return arguments.length?(e=a??wf,i):e},i}function kM(t,n){if((l=t.length)>0)for(var e,r=0,i,a,o,s,l,u=t[n[0]].length;r<u;++r)for(o=s=0,e=0;e<l;++e)(a=(i=t[n[e]][r])[1]-i[0])>0?(i[0]=o,i[1]=o+=a):a<0?(i[1]=s,i[0]=s+=a):(i[0]=0,i[1]=a)}function mt(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&n==="[object Date]"?new Date(t.getTime()):typeof t=="number"||n==="[object Number]"?new Date(t):((typeof t=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function Et(t){if(t===null||t===!0||t===!1)return NaN;var n=Number(t);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function rv(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=mt(t),r=Et(n);return e.setDate(e.getDate()+r),e}function Co(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=mt(t).getTime(),r=Et(n);return new Date(e+r)}var NM=36e5;function iv(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Et(n);return Co(t,e*NM)}var Sf=6e4;function yl(t){var n=new Date(t.getTime()),e=Math.ceil(n.getTimezoneOffset());n.setSeconds(0,0);var r=n.getTime()%Sf;return e*Sf+r}function Mf(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=mt(t);return n.setHours(0,0,0,0),n}var BM=864e5;function UM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Mf(t),r=Mf(n),i=e.getTime()-yl(e),a=r.getTime()-yl(r);return Math.round((i-a)/BM)}var $M=6e4;function _l(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Et(n);return Co(t,e*$M)}function VM(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=mt(t),e=n.getFullYear(),r=n.getMonth(),i=new Date(0);return i.setFullYear(e,r+1,0),i.setHours(0,0,0,0),i.getDate()}function ku(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=mt(t),r=Et(n),i=e.getMonth()+r,a=new Date(0);a.setFullYear(e.getFullYear(),i,1),a.setHours(0,0,0,0);var o=VM(a);return e.setMonth(i,Math.min(o,e.getDate())),e}function xl(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Et(n);return Co(t,e*1e3)}function av(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Et(n);return ku(t,e*12)}function Tr(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=mt(t),r=mt(n),i=e.getTime()-r.getTime();return i<0?-1:i>0?1:i}function HM(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=mt(t);return!isNaN(n)}function FM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=mt(t),r=mt(n),i=e.getFullYear()-r.getFullYear(),a=e.getMonth()-r.getMonth();return i*12+a}function GM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=mt(t),r=mt(n);return e.getFullYear()-r.getFullYear()}function zM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=mt(t),r=mt(n),i=Tr(e,r),a=Math.abs(UM(e,r));e.setDate(e.getDate()-i*a);var o=Tr(e,r)===-i,s=i*(a-o);return s===0?0:s}function Nu(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=mt(t),r=mt(n);return e.getTime()-r.getTime()}var WM=36e5;function jM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Nu(t,n)/WM;return e>0?Math.floor(e):Math.ceil(e)}var qM=6e4;function Af(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Nu(t,n)/qM;return e>0?Math.floor(e):Math.ceil(e)}function YM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=mt(t),r=mt(n),i=Tr(e,r),a=Math.abs(FM(e,r));e.setMonth(e.getMonth()-i*a);var o=Tr(e,r)===-i,s=i*(a-o);return s===0?0:s}function Cf(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Nu(t,n)/1e3;return e>0?Math.floor(e):Math.ceil(e)}function XM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=mt(t),r=mt(n),i=Tr(e,r),a=Math.abs(GM(e,r));e.setFullYear(e.getFullYear()-i*a);var o=Tr(e,r)===-i,s=i*(a-o);return s===0?0:s}var qi={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ZM(t,n,e){e=e||{};var r;return typeof qi[t]=="string"?r=qi[t]:n===1?r=qi[t].one:r=qi[t].other.replace("{{count}}",n),e.addSuffix?e.comparison>0?"in "+r:r+" ago":r}function es(t){return function(n){var e=n||{},r=e.width?String(e.width):t.defaultWidth,i=t.formats[r]||t.formats[t.defaultWidth];return i}}var KM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},QM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},JM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tA={date:es({formats:KM,defaultWidth:"full"}),time:es({formats:QM,defaultWidth:"full"}),dateTime:es({formats:JM,defaultWidth:"full"})};const eA=tA;var nA={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function rA(t,n,e,r){return nA[t]}function kr(t){return function(n,e){var r=e||{},i=r.context?String(r.context):"standalone",a;if(i==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,s=r.width?String(r.width):o;a=t.formattingValues[s]||t.formattingValues[o]}else{var l=t.defaultWidth,u=r.width?String(r.width):t.defaultWidth;a=t.values[u]||t.values[l]}var c=t.argumentCallback?t.argumentCallback(n):n;return a[c]}}var iA={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},aA={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},oA={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},sA={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lA={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uA={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function cA(t,n){var e=Number(t),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}var fA={ordinalNumber:cA,era:kr({values:iA,defaultWidth:"wide"}),quarter:kr({values:aA,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:kr({values:oA,defaultWidth:"wide"}),day:kr({values:sA,defaultWidth:"wide"}),dayPeriod:kr({values:lA,defaultWidth:"wide",formattingValues:uA,defaultFormattingWidth:"wide"})};const hA=fA;function dA(t){return function(n,e){var r=String(n),i=e||{},a=r.match(t.matchPattern);if(!a)return null;var o=a[0],s=r.match(t.parsePattern);if(!s)return null;var l=t.valueCallback?t.valueCallback(s[0]):s[0];return l=i.valueCallback?i.valueCallback(l):l,{value:l,rest:r.slice(o.length)}}}function Nr(t){return function(n,e){var r=String(n),i=e||{},a=i.width,o=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],s=r.match(o);if(!s)return null;var l=s[0],u=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c;return Object.prototype.toString.call(u)==="[object Array]"?c=vA(u,function(f){return f.test(r)}):c=pA(u,function(f){return f.test(r)}),c=t.valueCallback?t.valueCallback(c):c,c=i.valueCallback?i.valueCallback(c):c,{value:c,rest:r.slice(l.length)}}}function pA(t,n){for(var e in t)if(t.hasOwnProperty(e)&&n(t[e]))return e}function vA(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return e}var gA=/^(\d+)(th|st|nd|rd)?/i,mA=/\d+/i,yA={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_A={any:[/^b/i,/^(a|c)/i]},xA={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bA={any:[/1/i,/2/i,/3/i,/4/i]},OA={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},TA={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wA={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},EA={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},SA={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},MA={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},AA={ordinalNumber:dA({matchPattern:gA,parsePattern:mA,valueCallback:function(t){return parseInt(t,10)}}),era:Nr({matchPatterns:yA,defaultMatchWidth:"wide",parsePatterns:_A,defaultParseWidth:"any"}),quarter:Nr({matchPatterns:xA,defaultMatchWidth:"wide",parsePatterns:bA,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Nr({matchPatterns:OA,defaultMatchWidth:"wide",parsePatterns:TA,defaultParseWidth:"any"}),day:Nr({matchPatterns:wA,defaultMatchWidth:"wide",parsePatterns:EA,defaultParseWidth:"any"}),dayPeriod:Nr({matchPatterns:SA,defaultMatchWidth:"any",parsePatterns:MA,defaultParseWidth:"any"})};const CA=AA;var DA={code:"en-US",formatDistance:ZM,formatLong:eA,formatRelative:rA,localize:hA,match:CA,options:{weekStartsOn:0,firstWeekContainsDate:1}};const LA=DA;function PA(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Et(n);return Co(t,-e)}function gt(t,n){for(var e=t<0?"-":"",r=Math.abs(t).toString();r.length<n;)r="0"+r;return e+r}var RA={y:function(t,n){var e=t.getUTCFullYear(),r=e>0?e:1-e;return gt(n==="yy"?r%100:r,n.length)},M:function(t,n){var e=t.getUTCMonth();return n==="M"?String(e+1):gt(e+1,2)},d:function(t,n){return gt(t.getUTCDate(),n.length)},a:function(t,n){var e=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":case"aaa":return e.toUpperCase();case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h:function(t,n){return gt(t.getUTCHours()%12||12,n.length)},H:function(t,n){return gt(t.getUTCHours(),n.length)},m:function(t,n){return gt(t.getUTCMinutes(),n.length)},s:function(t,n){return gt(t.getUTCSeconds(),n.length)},S:function(t,n){var e=n.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,e-3));return gt(i,n.length)}};const tn=RA;var IA=864e5;function kA(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=mt(t),e=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var r=n.getTime(),i=e-r;return Math.floor(i/IA)+1}function Wa(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=1,e=mt(t),r=e.getUTCDay(),i=(r<n?7:0)+r-n;return e.setUTCDate(e.getUTCDate()-i),e.setUTCHours(0,0,0,0),e}function ov(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=mt(t),e=n.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(e+1,0,4),r.setUTCHours(0,0,0,0);var i=Wa(r),a=new Date(0);a.setUTCFullYear(e,0,4),a.setUTCHours(0,0,0,0);var o=Wa(a);return n.getTime()>=i.getTime()?e+1:n.getTime()>=o.getTime()?e:e-1}function NA(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=ov(t),e=new Date(0);e.setUTCFullYear(n,0,4),e.setUTCHours(0,0,0,0);var r=Wa(e);return r}var BA=6048e5;function UA(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=mt(t),e=Wa(n).getTime()-NA(n).getTime();return Math.round(e/BA)+1}function ja(t,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=n||{},r=e.locale,i=r&&r.options&&r.options.weekStartsOn,a=i==null?0:Et(i),o=e.weekStartsOn==null?a:Et(e.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=mt(t),l=s.getUTCDay(),u=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-u),s.setUTCHours(0,0,0,0),s}function sv(t,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=mt(t,n),r=e.getUTCFullYear(),i=n||{},a=i.locale,o=a&&a.options&&a.options.firstWeekContainsDate,s=o==null?1:Et(o),l=i.firstWeekContainsDate==null?s:Et(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(r+1,0,l),u.setUTCHours(0,0,0,0);var c=ja(u,n),f=new Date(0);f.setUTCFullYear(r,0,l),f.setUTCHours(0,0,0,0);var h=ja(f,n);return e.getTime()>=c.getTime()?r+1:e.getTime()>=h.getTime()?r:r-1}function $A(t,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=n||{},r=e.locale,i=r&&r.options&&r.options.firstWeekContainsDate,a=i==null?1:Et(i),o=e.firstWeekContainsDate==null?a:Et(e.firstWeekContainsDate),s=sv(t,n),l=new Date(0);l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0);var u=ja(l,n);return u}var VA=6048e5;function HA(t,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=mt(t),r=ja(e,n).getTime()-$A(e,n).getTime();return Math.round(r/VA)+1}var Fn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},FA={G:function(t,n,e){var r=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(t,n,e){if(n==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return e.ordinalNumber(i,{unit:"year"})}return tn.y(t,n)},Y:function(t,n,e,r){var i=sv(t,r),a=i>0?i:1-i;if(n==="YY"){var o=a%100;return gt(o,2)}return n==="Yo"?e.ordinalNumber(a,{unit:"year"}):gt(a,n.length)},R:function(t,n){var e=ov(t);return gt(e,n.length)},u:function(t,n){var e=t.getUTCFullYear();return gt(e,n.length)},Q:function(t,n,e){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return gt(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,e){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return gt(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,e){var r=t.getUTCMonth();switch(n){case"M":case"MM":return tn.M(t,n);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,e){var r=t.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return gt(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,e,r){var i=HA(t,r);return n==="wo"?e.ordinalNumber(i,{unit:"week"}):gt(i,n.length)},I:function(t,n,e){var r=UA(t);return n==="Io"?e.ordinalNumber(r,{unit:"week"}):gt(r,n.length)},d:function(t,n,e){return n==="do"?e.ordinalNumber(t.getUTCDate(),{unit:"date"}):tn.d(t,n)},D:function(t,n,e){var r=kA(t);return n==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):gt(r,n.length)},E:function(t,n,e){var r=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,e,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return gt(a,2);case"eo":return e.ordinalNumber(a,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,e,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return gt(a,n.length);case"co":return e.ordinalNumber(a,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,e){var r=t.getUTCDay(),i=r===0?7:r;switch(n){case"i":return String(i);case"ii":return gt(i,n.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,e){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(n){case"a":case"aa":case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,e){var r=t.getUTCHours(),i;switch(r===12?i=Fn.noon:r===0?i=Fn.midnight:i=r/12>=1?"pm":"am",n){case"b":case"bb":case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,e){var r=t.getUTCHours(),i;switch(r>=17?i=Fn.evening:r>=12?i=Fn.afternoon:r>=4?i=Fn.morning:i=Fn.night,n){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,e){if(n==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return tn.h(t,n)},H:function(t,n,e){return n==="Ho"?e.ordinalNumber(t.getUTCHours(),{unit:"hour"}):tn.H(t,n)},K:function(t,n,e){var r=t.getUTCHours()%12;return n==="Ko"?e.ordinalNumber(r,{unit:"hour"}):gt(r,n.length)},k:function(t,n,e){var r=t.getUTCHours();return r===0&&(r=24),n==="ko"?e.ordinalNumber(r,{unit:"hour"}):gt(r,n.length)},m:function(t,n,e){return n==="mo"?e.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):tn.m(t,n)},s:function(t,n,e){return n==="so"?e.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):tn.s(t,n)},S:function(t,n){return tn.S(t,n)},X:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return Lf(a);case"XXXX":case"XX":return gn(a);case"XXXXX":case"XXX":default:return gn(a,":")}},x:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"x":return Lf(a);case"xxxx":case"xx":return gn(a);case"xxxxx":case"xxx":default:return gn(a,":")}},O:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Df(a,":");case"OOOO":default:return"GMT"+gn(a,":")}},z:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Df(a,":");case"zzzz":default:return"GMT"+gn(a,":")}},t:function(t,n,e,r){var i=r._originalDate||t,a=Math.floor(i.getTime()/1e3);return gt(a,n.length)},T:function(t,n,e,r){var i=r._originalDate||t,a=i.getTime();return gt(a,n.length)}};function Df(t,n){var e=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),a=r%60;if(a===0)return e+String(i);var o=n||"";return e+String(i)+o+gt(a,2)}function Lf(t,n){if(t%60===0){var e=t>0?"-":"+";return e+gt(Math.abs(t)/60,2)}return gn(t,n)}function gn(t,n){var e=n||"",r=t>0?"-":"+",i=Math.abs(t),a=gt(Math.floor(i/60),2),o=gt(i%60,2);return r+a+e+o}const GA=FA;function Pf(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}}function lv(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}}function zA(t,n){var e=t.match(/(P+)(p+)?/),r=e[1],i=e[2];if(!i)return Pf(t,n);var a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",Pf(r,n)).replace("{{time}}",lv(i,n))}var WA={p:lv,P:zA};const jA=WA;var qA=["D","DD"],YA=["YY","YYYY"];function XA(t){return qA.indexOf(t)!==-1}function ZA(t){return YA.indexOf(t)!==-1}function Rf(t){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if(t==="YY")throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if(t==="D")throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if(t==="DD")throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}var KA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,QA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,JA=/^'([^]*?)'?$/,tC=/''/g,eC=/[a-zA-Z]/;function wr(t,n,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=String(n),i=e||{},a=i.locale||LA,o=a.options&&a.options.firstWeekContainsDate,s=o==null?1:Et(o),l=i.firstWeekContainsDate==null?s:Et(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=a.options&&a.options.weekStartsOn,c=u==null?0:Et(u),f=i.weekStartsOn==null?c:Et(i.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var h=mt(t);if(!HM(h))throw new RangeError("Invalid time value");var p=yl(h),d=PA(h,p),g={firstWeekContainsDate:l,weekStartsOn:f,locale:a,_originalDate:h},m=r.match(QA).map(function(y){var v=y[0];if(v==="p"||v==="P"){var _=jA[v];return _(y,a.formatLong,g)}return y}).join("").match(KA).map(function(y){if(y==="''")return"'";var v=y[0];if(v==="'")return nC(y);var _=GA[v];if(_)return!i.useAdditionalWeekYearTokens&&ZA(y)&&Rf(y),!i.useAdditionalDayOfYearTokens&&XA(y)&&Rf(y),_(d,y,a.localize,g);if(v.match(eC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return y}).join("");return m}function nC(t){return t.match(JA)[1].replace(tC,"'")}function rC(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Et(n);return rv(t,-e)}function iC(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Et(n);return iv(t,-e)}function If(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Et(n);return _l(t,-e)}function aC(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Et(n);return ku(t,-e)}function kf(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Et(n);return xl(t,-e)}function oC(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Et(n);return av(t,-e)}var ns=[["15seconds",15*1e3],["minute",60*1e3],["30minutes",30*60*1e3],["hourly",60*60*1e3],["daily",24*60*60*1e3],["monthly",30*24*60*60*1e3],["quarterly",3*30*24*60*60*1e3],["yearly",12*30*24*60*60*1e3]];function uv(t,n,e,r,i){var a=n===0,o=Number(wr(new Date(t),"c"))===2,s=Number(wr(new Date(t),"q"))===1,l=n!==0?e[n-1]:null;switch(r){case"15seconds":return a||Yi(t)||Br(t,l)||dn(t);case"minute":return a||Yi(t)||Br(t,l)||dn(t);case"30minutes":return a||Yi(t)||Br(t,l)||dn(t);case"hourly":return a||Yi(t)||Br(t,l)||dn(t);case"daily":return i?a||o||dn(t):a||Br(t,l)||dn(t);case"monthly":return a||dn(t);case"quarterly":return a||s;case"yearly":return!1;default:throw new Error(r+" is not a valid time interval.")}}function bl(t,n,e,r,i){var a=i.showDayName,o=r==="daily"&&a?"weekly":r,s=new Date(t),l=b(i,"timeIntervalFormats")[o],u=b(l,"primary"),c=b(l,"secondary"),f=uv(t,n,e,r,a)?u:c;r==="15seconds"&&s.getMilliseconds()!==0&&(f=f.replace("pp","h:mm:ss.SSS a"));var h=i.localeObject;return wr(s,f,{locale:h})}function qa(t){var n=new Date(t);return{M:n.getMonth()+1,d:n.getDate(),H:n.getHours(),m:n.getMinutes(),s:n.getSeconds()}}function sC(t){if(t)return t.slice(1).map(function(n,e){return n-t[e]})}function lC(t){var n=ns.reduce(function(e,r,i){r[0];var a=r[1],o=ns[e][1],s=Math.abs(o-t),l=Math.abs(a-t);return s<l?e:i},0);return ns[n][0]}function Ol(t){if(t.length===1)return"15seconds";var n=sC(t),e=ln(n);return lC(e)}function Yi(t){var n=qa(t),e=n.s,r=n.m,i=n.H;return i===0&&r===0&&e===0}function Br(t,n){var e=qa(t).M,r=qa(n).M;return e!==r}function dn(t){var n=qa(t),e=n.M,r=n.d,i=n.s,a=n.m,o=n.H;return e===1&&r===1&&o===0&&a===0&&i===0}function Nf(t){return t===void 0?"":t.toISOString()}var Ya=globalThis&&globalThis.__assign||function(){return Ya=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ya.apply(this,arguments)},Ze=function(){function t(n){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=n}return t.prototype.getAllDataFromDomain=function(n){if(!this.getData())return null;var e=this.getOptions(),r=this.getData(),i=this.getDataGroups(),a=b(e,"data").groupMapsTo,o=b(e,"axes");return n&&(r=r.filter(function(s){return n.includes(s[a])})),o&&Object.keys(o).forEach(function(s){var l=o[s].mapsTo,u=o[s].scaleType;if((u===K.LINEAR||u===K.LOG)&&(r=r.map(function(p){var d;return Ya(Ya({},p),(d={},d[l]=p[l]===null?p[l]:Number(p[l]),d))})),l&&o[s].domain)if(u===K.LABELS)r=r.filter(function(p){return o[s].domain.includes(p[l])});else{var c=o[s].domain,f=c[0],h=c[1];r=r.filter(function(p){return!(l in p)||p[l]>=f&&p[l]<=h})}}),r.filter(function(s){return i.find(function(l){return l.name===s[a]})})},t.prototype.getDisplayData=function(n){if(!this.get("data"))return null;var e=St.items.status.ACTIVE,r=this.getDataGroups(n),i=this.getOptions().data.groupMapsTo,a=this.getAllDataFromDomain(n);return a.filter(function(o){return r.find(function(s){return s.name===o[i]&&s.status===e})})},t.prototype.getData=function(){return this.get("data")},t.prototype.isDataEmpty=function(){return!this.getData().length},t.prototype.setData=function(n){var e=this.sanitize(Ge(n)),r=this.generateDataGroups(e);return this.set({data:e,dataGroups:r}),e},t.prototype.getDataGroups=function(n){var e=b(this.getOptions(),"data","loading");return e?[]:n?this.get("dataGroups").filter(function(r){return n.includes(r.name)}):this.get("dataGroups")},t.prototype.getActiveDataGroups=function(n){var e=St.items.status.ACTIVE;return this.getDataGroups(n).filter(function(r){return r.status===e})},t.prototype.getDataGroupNames=function(n){var e=this.getDataGroups(n);return e.map(function(r){return r.name})},t.prototype.getActiveDataGroupNames=function(n){var e=this.getActiveDataGroups(n);return e.map(function(r){return r.name})},t.prototype.aggregateBinDataByGroup=function(n){return Ib(n,"group")},t.prototype.getBinConfigurations=function(){var n=this,e=this.getDisplayData(),r=this.getOptions(),i=this.services.cartesianScales.getMainXAxisPosition(),a=this.services.cartesianScales.getDomainIdentifier(),o=r.axes[i],s=r.data.groupMapsTo,l=o.bins,u=l===void 0?Fh.defaultBins:l,c=Array.isArray(u),f=Pw().value(function(m){return m[a]}).thresholds(u)(e);if(c)f[f.length-1].x1=u[u.length-1];else{var h=f[0].x1-f[0].x0;f[f.length-1].x1=+f[f.length-1].x0+h}var p=c?[u[0],u[u.length-1]]:[f[0].x0,f[f.length-1].x1],d=Array.from(new Set(e.map(function(m){return m[s]}))),g=[];return f.forEach(function(m){var y=m.x0+"-"+m.x1,v=n.aggregateBinDataByGroup(m);d.forEach(function(_){g.push({group:_,key:y,value:v[_]||0,bin:m.x0})})}),{bins:f,binsDomain:p}},t.prototype.getBinnedStackedData=function(){var n=this.getOptions(),e=n.data.groupMapsTo,r=this.getActiveDataGroupNames(),i=this.getBinConfigurations().bins,a=this.getDataValuesGroupedByKeys({bins:i});return ts().keys(r)(a).map(function(o,s){return Object.keys(o).filter(function(l){return!isNaN(l)}).map(function(l){var u=o[l];return u[e]=r[s],u})})},t.prototype.getGroupedData=function(n){var e=this.getDisplayData(n),r={},i=this.getOptions().data.groupMapsTo;return e.map(function(a){var o=a[i];r[o]!==null&&r[o]!==void 0?r[o].push(a):r[o]=[a]}),Object.keys(r).map(function(a){return{name:a,data:r[a]}})},t.prototype.getStackKeys=function(n){var e=this,r=n===void 0?{bins:null,groups:null}:n,i=r.bins,a=i===void 0?null:i,o=r.groups,s=o===void 0?null:o,l=this.getOptions(),u=this.getDisplayData(s),c;a?c=a.map(function(p){return p.x0+"-"+p.x1}):c=hi(u.map(function(p){var d=e.services.cartesianScales.getDomainIdentifier(p);return p[d]instanceof Date?Nf(p[d]):p[d]&&typeof p[d].toString=="function"?p[d].toString():p[d]}));var f=this.services.cartesianScales.domainAxisPosition,h=l.axes[f].scaleType;return h===K.TIME?c.sort(function(p,d){var g=new Date(p),m=new Date(d);return g-m}):(h===K.LOG||h===K.LINEAR)&&c.sort(function(p,d){return p-d}),c},t.prototype.getDataValuesGroupedByKeys=function(n){var e=this,r=n.bins,i=r===void 0?null:r,a=n.groups,o=a===void 0?null:a,s=this.getOptions(),l=s.data.groupMapsTo,u=this.getDisplayData(o),c=this.getDataGroupNames(),f=this.getStackKeys({bins:i,groups:o});return i?f.map(function(h){var p=h.split("-"),d=p[0],g=p[1],m={x0:d,x1:g},y=i.find(function(v){return v.x0.toString()===d.toString()});return c.forEach(function(v){m[v]=y.filter(function(_){return _[l]===v}).length}),m}):f.map(function(h){var p={sharedStackKey:h};return c.forEach(function(d){var g=u.find(function(y){var v=e.services.cartesianScales.getDomainIdentifier(y);return y[l]===d&&y.hasOwnProperty(v)&&(y[v]instanceof Date?Nf(y[v])===h:y[v].toString()===h)}),m=e.services.cartesianScales.getRangeIdentifier(p);p[d]=g?g[m]:null}),p})},t.prototype.getStackedData=function(n){var e=n.percentage,r=e===void 0?!1:e,i=n.groups,a=i===void 0?null:i,o=n.divergent,s=o===void 0?!1:o,l=this.getOptions(),u=l.data.groupMapsTo,c=this.getActiveDataGroupNames(a),f=this.getDataValuesGroupedByKeys({groups:a});if(r){var h=Db(f.map(function(d){return[d.sharedStackKey,0]}));f.forEach(function(d){c.forEach(function(g){h[d.sharedStackKey]+=d[g]})}),f.forEach(function(d){c.forEach(function(g){h[d.sharedStackKey]?d[g]=d[g]/h[d.sharedStackKey]*100:d[g]=0})})}var p=s?ts().offset(kM):ts();return p.keys(c)(f).map(function(d,g){return Object.keys(d).filter(function(m){return!isNaN(m)}).map(function(m){var y=d[m];return y[u]=c[g],y})})},t.prototype.getOptions=function(){return this.state.options},t.prototype.set=function(n,e){this.state=Object.assign({},this.state,n);var r=Object.assign({skipUpdate:!1,animate:!0},e);r.skipUpdate||this.update(r.animate)},t.prototype.get=function(n){return n?this.state[n]:this.state},t.prototype.setOptions=function(n){var e=this.getOptions();hu(e,n),this.set({options:et(e,n)})},t.prototype.update=function(n){n===void 0&&(n=!0),this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(M.Model.UPDATE,{animate:n}))},t.prototype.toggleDataLabel=function(n){var e=St.items.status,r=e.ACTIVE,i=e.DISABLED,a=this.getDataGroups(),o=a.some(function(h){return h.status===i}),s=a.filter(function(h){return h.status===r});if(o)if(s.length===1&&s[0].name===n)a.forEach(function(h,p){a[p].status=r});else{var l=a.findIndex(function(h){return h.name===n});a[l].status=a[l].status===i?r:i}else a.forEach(function(h,p){a[p].status=h.name===n?r:i});var u=a.filter(function(h){return h.status===r}),c=this.getOptions(),f=a.some(function(h){return h.status===i});f?c.data.selectedGroups=u.map(function(h){return h.name}):c.data.selectedGroups=[],this.services.events.dispatchEvent(M.Legend.ITEMS_UPDATE,{dataGroups:a}),this.set({dataGroups:a})},t.prototype.getIsFilled=function(n,e,r,i){var a=this.getOptions();return a.getIsFilled?a.getIsFilled(n,e,r,i):i},t.prototype.getFillColor=function(n,e,r){var i=this.getOptions(),a=b(this.colorScale,n);return i.getFillColor?i.getFillColor(n,e,r,a):a},t.prototype.getStrokeColor=function(n,e,r){var i=this.getOptions(),a=b(this.colorScale,n);return i.getStrokeColor?i.getStrokeColor(n,e,r,a):a},t.prototype.isUserProvidedColorScaleValid=function(){var n=b(this.getOptions(),"color","scale"),e=this.getDataGroups();return n==null||Object.keys(n).length==0?!1:e.some(function(r){return Object.keys(n).includes(r.name)})},t.prototype.getColorClassName=function(n){var e=this.colorClassNames(n.dataGroupName),r=n.originalClassName;return n.classNameTypes.forEach(function(i){return r=n.originalClassName?r+" "+i+"-"+e:i+"-"+e}),r},t.prototype.getStatus=function(){return null},t.prototype.getAllDataGroupsNames=function(){return this.allDataGroups},t.prototype.transformToTabularData=function(n){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/docs-tutorials--tabular-data-format");var e=[],r=n.datasets,i=n.labels;return r.forEach(function(a){a.data.forEach(function(o,s){var l,u=b(a,"label");if(u===null){var c=b(i,s);c?l=c:l="Ungrouped"}else l=u;var f={group:l,key:i[s]};isNaN(o)?(f.value=o.value,f.date=o.date):f.value=o,e.push(f)})}),e},t.prototype.getTabularDataArray=function(){return[]},t.prototype.exportToCSV=function(){var n=this.getTabularDataArray().map(function(s){return s.map(function(l){return'"'+(l==="&ndash;"?"–":l)+'"'})}),e="",r="";n.forEach(function(s,l){r=s.join(","),e+=l<n.length?r+`
`:r});var i=this.getOptions(),a="myChart",o=b(i,"fileDownload","fileName");typeof o=="function"&&(a=o("csv")),this.services.files.downloadCSV(e,a+".csv")},t.prototype.getTabularData=function(n){return Array.isArray(n)?n:this.transformToTabularData(n)},t.prototype.sanitize=function(n){return n=this.getTabularData(n),n},t.prototype.updateAllDataGroups=function(){var n=this;this.allDataGroups?this.getDataGroupNames().forEach(function(e){n.allDataGroups.indexOf(e)===-1&&n.allDataGroups.push(e)}):this.allDataGroups=this.getDataGroupNames()},t.prototype.generateDataGroups=function(n){var e=this.getOptions().data.groupMapsTo,r=St.items.status,i=r.ACTIVE,a=r.DISABLED,o=this.getOptions(),s=hi(n.map(function(c){return c[e]}));if(o.data.selectedGroups.length){var l=o.data.selectedGroups.every(function(c){return s.includes(c)});l||(o.data.selectedGroups=[])}var u=function(c){return!o.data.selectedGroups.length||o.data.selectedGroups.includes(c)?i:a};return s.map(function(c){return{name:c,status:u(c)}})},t.prototype.setCustomColorScale=function(){var n=this;if(this.isUserProvidedColorScaleValid()){var e=this.getOptions(),r=b(e,"color","scale");Object.keys(r).forEach(function(a){n.allDataGroups.includes(a)||console.warn('"'+a+'" does not exist in data groups.')});var i=this.allDataGroups.filter(function(a){return r[a]});i.forEach(function(a){return n.colorScale[a]=r[a]})}},t.prototype.setColorClassNames=function(){var n=b(this.getOptions(),"color","pairing"),e=b(n,"numberOfVariants");(!e||e<this.allDataGroups.length)&&(e=this.allDataGroups.length);var r=b(n,"option"),i=Zl.pairingOptions,a=e>5?14:e;r=r<=i[a+"-color"]?r:1;var o=this.allDataGroups.map(function(s,l){return a+"-"+r+"-"+(l%14+1)});this.colorClassNames=bo().range(o).domain(this.allDataGroups)},t}(),Ke=function(){function t(n,e){this.model=n,this.services=e,this.init()}return t.prototype.init=function(){},t.prototype.update=function(){},t.prototype.setModel=function(n){this.model=n},t.prototype.setServices=function(n){this.services=n},t}(),cv=function(){if(typeof Map<"u")return Map;function t(n,e){var r=-1;return n.some(function(i,a){return i[0]===e?(r=a,!0):!1}),r}return function(){function n(){this.__entries__=[]}var e={size:{configurable:!0}};return e.size.get=function(){return this.__entries__.length},n.prototype.get=function(r){var i=t(this.__entries__,r),a=this.__entries__[i];return a&&a[1]},n.prototype.set=function(r,i){var a=t(this.__entries__,r);~a?this.__entries__[a][1]=i:this.__entries__.push([r,i])},n.prototype.delete=function(r){var i=this.__entries__,a=t(i,r);~a&&i.splice(a,1)},n.prototype.has=function(r){return!!~t(this.__entries__,r)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(r,i){var a=this;i===void 0&&(i=null);for(var o=0,s=a.__entries__;o<s.length;o+=1){var l=s[o];r.call(i,l[1],l[0])}},Object.defineProperties(n.prototype,e),n}()}(),Bu=typeof window<"u"&&typeof document<"u"&&window.document===document,Xa=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),uC=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Xa):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),cC=2,fC=function(t,n){var e=!1,r=!1,i=0;function a(){e&&(e=!1,t()),r&&s()}function o(){uC(a)}function s(){var l=Date.now();if(e){if(l-i<cC)return;r=!0}else e=!0,r=!1,setTimeout(o,n);i=l}return s},hC=20,dC=["top","right","bottom","left","width","height","size","weight"],pC=typeof MutationObserver<"u",ve=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=fC(this.refresh.bind(this),hC)};ve.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()};ve.prototype.removeObserver=function(t){var n=this.observers_,e=n.indexOf(t);~e&&n.splice(e,1),!n.length&&this.connected_&&this.disconnect_()};ve.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()};ve.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0};ve.prototype.connect_=function(){!Bu||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),pC?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)};ve.prototype.disconnect_=function(){!Bu||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)};ve.prototype.onTransitionEnd_=function(t){var n=t.propertyName;n===void 0&&(n="");var e=dC.some(function(r){return!!~n.indexOf(r)});e&&this.refresh()};ve.getInstance=function(){return this.instance_||(this.instance_=new ve),this.instance_};ve.instance_=null;var fv=function(t,n){for(var e=0,r=Object.keys(n);e<r.length;e+=1){var i=r[e];Object.defineProperty(t,i,{value:n[i],enumerable:!1,writable:!1,configurable:!0})}return t},Er=function(t){var n=t&&t.ownerDocument&&t.ownerDocument.defaultView;return n||Xa},hv=Do(0,0,0,0);function Za(t){return parseFloat(t)||0}function Bf(t){for(var n=[],e=arguments.length-1;e-- >0;)n[e]=arguments[e+1];return n.reduce(function(r,i){var a=t["border-"+i+"-width"];return r+Za(a)},0)}function vC(t){for(var n=["top","right","bottom","left"],e={},r=0,i=n;r<i.length;r+=1){var a=i[r],o=t["padding-"+a];e[a]=Za(o)}return e}function gC(t){var n=t.getBBox();return Do(0,0,n.width,n.height)}function mC(t){var n=t.clientWidth,e=t.clientHeight;if(!n&&!e)return hv;var r=Er(t).getComputedStyle(t),i=vC(r),a=i.left+i.right,o=i.top+i.bottom,s=Za(r.width),l=Za(r.height);if(r.boxSizing==="border-box"&&(Math.round(s+a)!==n&&(s-=Bf(r,"left","right")+a),Math.round(l+o)!==e&&(l-=Bf(r,"top","bottom")+o)),!_C(t)){var u=Math.round(s+a)-n,c=Math.round(l+o)-e;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return Do(i.left,i.top,s,l)}var yC=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Er(t).SVGGraphicsElement}:function(t){return t instanceof Er(t).SVGElement&&typeof t.getBBox=="function"}}();function _C(t){return t===Er(t).document.documentElement}function xC(t){return Bu?yC(t)?gC(t):mC(t):hv}function bC(t){var n=t.x,e=t.y,r=t.width,i=t.height,a=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return fv(o,{x:n,y:e,width:r,height:i,top:e,right:n+r,bottom:i+e,left:n}),o}function Do(t,n,e,r){return{x:t,y:n,width:e,height:r}}var Uu=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Do(0,0,0,0),this.target=t};Uu.prototype.isActive=function(){var t=xC(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight};Uu.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var OC=function(t,n){var e=bC(n);fv(this,{target:t,contentRect:e})},cn=function(t,n,e){if(this.activeObservations_=[],this.observations_=new cv,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=e};cn.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Er(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new Uu(t)),this.controller_.addObserver(this),this.controller_.refresh())}};cn.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Er(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}};cn.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)};cn.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})};cn.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(e){return new OC(e.target,e.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}};cn.prototype.clearActive=function(){this.activeObservations_.splice(0)};cn.prototype.hasActive=function(){return this.activeObservations_.length>0};var dv=typeof WeakMap<"u"?new WeakMap:new cv,$u=function(t){if(!(this instanceof $u))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=ve.getInstance(),e=new cn(t,n,this);dv.set(this,e)};["observe","unobserve","disconnect"].forEach(function(t){$u.prototype[t]=function(){return(n=dv.get(this))[t].apply(n,arguments);var n}});var TC=function(){return typeof Xa.ResizeObserver<"u"?Xa.ResizeObserver:$u}(),Tl={},wC={get exports(){return Tl},set exports(t){Tl=t}};/*! dom-to-image-more 17-04-2023 */(function(t,n){(function(e){const r=function(){let P=0;return{escape:function(T){return T.replace(/([.*+?^${}()|[]\/\\])/g,"\\$1")},isDataUrl:function(T){return T.search(/^(data:)/)!==-1},canvasToBlob:function(T){return T.toBlob?new Promise(function(R){T.toBlob(R)}):function(R){return new Promise(function(C){var D=p(R.toDataURL().split(",")[1]),k=D.length,$=new Uint8Array(k);for(let L=0;L<k;L++)$[L]=D.charCodeAt(L);C(new Blob([$],{type:"image/png"}))})}(T)},resolveUrl:function(T,R){var C=document.implementation.createHTMLDocument(),D=C.createElement("base"),k=(C.head.appendChild(D),C.createElement("a"));return C.body.appendChild(k),D.href=R,k.href=T,k.href},getAndEncode:function(T){let R=f.impl.urlCache.find(function(C){return C.url===T});return R||(R={url:T,promise:null},f.impl.urlCache.push(R)),R.promise===null&&(f.impl.options.cacheBust&&(T+=(/\?/.test(T)?"&":"?")+new Date().getTime()),R.promise=new Promise(function(C){const D=f.impl.options.httpTimeout,k=new XMLHttpRequest;k.onreadystatechange=function(){if(k.readyState===4)if(k.status!==200)$?C($):V(`cannot fetch resource: ${T}, status: `+k.status);else{const H=new FileReader;H.onloadend=function(){C(H.result)},H.readAsDataURL(k.response)}},k.ontimeout=function(){$?C($):V(`timeout of ${D}ms occured while fetching resource: `+T)},k.responseType="blob",k.timeout=D,f.impl.options.useCredentials&&(k.withCredentials=!0),k.open("GET",T,!0),k.send();let $;var L;function V(H){console.error(H),C("")}f.impl.options.imagePlaceholder&&(L=f.impl.options.imagePlaceholder.split(/,/))&&L[1]&&($=L[1])})),R.promise},uid:function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+P++},delay:function(T){return function(R){return new Promise(function(C){setTimeout(function(){C(R)},T)})}},asArray:function(T){var R=[],C=T.length;for(let D=0;D<C;D++)R.push(T[D]);return R},escapeXhtml:function(T){return T.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(T){return T!=="data:,"?new Promise(function(R,C){const D=new Image;f.impl.options.useCredentials&&(D.crossOrigin="use-credentials"),D.onload=function(){window&&window.requestAnimationFrame?window.requestAnimationFrame(function(){R(D)}):R(D)},D.onerror=C,D.src=T}):Promise.resolve()},width:function(T){var R=N(T,"width");if(!isNaN(R))return R;var R=N(T,"border-left-width"),C=N(T,"border-right-width");return T.scrollWidth+R+C},height:function(T){var R=N(T,"height");if(!isNaN(R))return R;var R=N(T,"border-top-width"),C=N(T,"border-bottom-width");return T.scrollHeight+R+C},getWindow:S,isElement:w,isElementHostForOpenShadowRoot:function(T){return w(T)&&T.shadowRoot!==null},isShadowRoot:A,isInShadowRoot:I,isHTMLElement:function(T){return T instanceof S(T).HTMLElement},isHTMLCanvasElement:function(T){return T instanceof S(T).HTMLCanvasElement},isHTMLInputElement:function(T){return T instanceof S(T).HTMLInputElement},isHTMLImageElement:function(T){return T instanceof S(T).HTMLImageElement},isHTMLLinkElement:function(T){return T instanceof S(T).HTMLLinkElement},isHTMLScriptElement:function(T){return T instanceof S(T).HTMLScriptElement},isHTMLStyleElement:function(T){return T instanceof S(T).HTMLStyleElement},isHTMLTextAreaElement:function(T){return T instanceof S(T).HTMLTextAreaElement},isShadowSlotElement:function(T){return I(T)&&T instanceof S(T).HTMLSlotElement},isSVGElement:function(T){return T instanceof S(T).SVGElement},isSVGRectElement:function(T){return T instanceof S(T).SVGRectElement},isDimensionMissing:function(T){return isNaN(T)||T<=0}};function S(T){return T=T?T.ownerDocument:void 0,(T?T.defaultView:void 0)||e||window}function A(T){return T instanceof S(T).ShadowRoot}function I(T){return T!==null&&Object.prototype.hasOwnProperty.call(T,"getRootNode")&&A(T.getRootNode())}function w(T){return T instanceof S(T).Element}function N(T,R){if(T.nodeType===u){let C=h(T).getPropertyValue(R);if(C.slice(-2)==="px")return C=C.slice(0,-2),parseFloat(C)}return NaN}}(),i=function(){const P=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(w,N,T){return S(w)?Promise.resolve(w).then(A).then(function(R){let C=Promise.resolve(w);return R.forEach(function(D){C=C.then(function(k){return I(k,D,N,T)})}),C}):Promise.resolve(w)},shouldProcess:S,impl:{readUrls:A,inline:I}};function S(w){return w.search(P)!==-1}function A(w){for(var N,T=[];(N=P.exec(w))!==null;)T.push(N[1]);return T.filter(function(R){return!r.isDataUrl(R)})}function I(w,N,T,R){return Promise.resolve(N).then(function(C){return T?r.resolveUrl(C,T):C}).then(R||r.getAndEncode).then(function(C){return w.replace((D=N,new RegExp(`(url\\(['"]?)(${r.escape(D)})(['"]?\\))`,"g")),`$1${C}$3`);var D})}}(),a={resolveAll:function(){return o().then(function(P){return Promise.all(P.map(function(S){return S.resolve()}))}).then(function(P){return P.join(`
`)})},impl:{readAll:o}};function o(){return Promise.resolve(r.asArray(document.styleSheets)).then(function(S){const A=[];return S.forEach(function(I){if(Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(I),"cssRules"))try{r.asArray(I.cssRules||[]).forEach(A.push.bind(A))}catch(w){console.error("domtoimage: Error while reading CSS rules from "+I.href,w.toString())}}),A}).then(function(S){return S.filter(function(A){return A.type===CSSRule.FONT_FACE_RULE}).filter(function(A){return i.shouldProcess(A.style.getPropertyValue("src"))})}).then(function(S){return S.map(P)});function P(S){return{resolve:function(){var A=(S.parentStyleSheet||{}).href;return i.inlineAll(S.cssText,A)},src:function(){return S.style.getPropertyValue("src")}}}}const s={inlineAll:function P(S){if(!r.isElement(S))return Promise.resolve(S);return A(S).then(function(){return r.isHTMLImageElement(S)?l(S).inline():Promise.all(r.asArray(S.childNodes).map(function(I){return P(I)}))});function A(I){const w=["background","background-image"],N=w.map(function(T){const R=I.style.getPropertyValue(T),C=I.style.getPropertyPriority(T);return R?i.inlineAll(R).then(function(D){I.style.setProperty(T,D,C)}):Promise.resolve()});return Promise.all(N).then(function(){return I})}},impl:{newImage:l}};function l(P){return{inline:function(S){return r.isDataUrl(P.src)?Promise.resolve():Promise.resolve(P.src).then(S||r.getAndEncode).then(function(A){return new Promise(function(I){P.onload=I,P.onerror=I,P.src=A})})}}}const u=Node.ELEMENT_NODE||1,c={copyDefaultStyles:!0,imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1,httpTimeout:3e4,styleCaching:"strict"},f={toSvg:d,toPng:function(P,S){return g(P,S).then(function(A){return A.toDataURL()})},toJpeg:function(P,S){return g(P,S).then(function(A){return A.toDataURL("image/jpeg",(S?S.quality:void 0)||1)})},toBlob:function(P,S){return g(P,S).then(r.canvasToBlob)},toPixelData:function(P,S){return g(P,S).then(function(A){return A.getContext("2d").getImageData(0,0,r.width(P),r.height(P)).data})},toCanvas:g,impl:{fontFaces:a,images:s,util:r,inliner:i,urlCache:[],options:{}}},h=(t.exports=f,e.getComputedStyle||window.getComputedStyle),p=e.atob||window.atob;function d(P,S){f.impl.util.getWindow(P);var A=S=S||{};A.copyDefaultStyles===void 0?f.impl.options.copyDefaultStyles=c.copyDefaultStyles:f.impl.options.copyDefaultStyles=A.copyDefaultStyles,A.imagePlaceholder===void 0?f.impl.options.imagePlaceholder=c.imagePlaceholder:f.impl.options.imagePlaceholder=A.imagePlaceholder,A.cacheBust===void 0?f.impl.options.cacheBust=c.cacheBust:f.impl.options.cacheBust=A.cacheBust,A.useCredentials===void 0?f.impl.options.useCredentials=c.useCredentials:f.impl.options.useCredentials=A.useCredentials,A.httpTimeout===void 0?f.impl.options.httpTimeout=c.httpTimeout:f.impl.options.httpTimeout=A.httpTimeout,A.styleCaching===void 0?f.impl.options.styleCaching=c.styleCaching:f.impl.options.styleCaching=A.styleCaching;let I=[];return Promise.resolve(P).then(function(w){if(w.nodeType===u)return w;var N=w,T=w.parentNode,R=document.createElement("span");return T.replaceChild(R,N),R.append(w),I.push({parent:T,child:N,wrapper:R}),R}).then(function(w){return function N(T,R,C,D){const k=R.filter;if(T===m||r.isHTMLScriptElement(T)||r.isHTMLStyleElement(T)||r.isHTMLLinkElement(T)||C!==null&&k&&!k(T))return Promise.resolve();return Promise.resolve(T).then($).then(function(j){return V(j,L(T))}).then(function(j){return H(j,T)});function $(j){return r.isHTMLCanvasElement(j)?r.makeImage(j.toDataURL()):j.cloneNode(!1)}function L(j){return r.isElementHostForOpenShadowRoot(j)?j.shadowRoot:j}function V(j,tt){const it=rt(tt);let lt=Promise.resolve();if(it.length!==0){const ut=h(vt(tt));r.asArray(it).forEach(function(Y){lt=lt.then(function(){return N(Y,R,ut).then(function(X){X&&j.appendChild(X)})})})}return lt.then(function(){return j});function vt(ut){return r.isShadowRoot(ut)?ut.host:ut}function rt(ut){return r.isShadowSlotElement(ut)?ut.assignedNodes():ut.childNodes}}function H(j,tt){return!r.isElement(j)||r.isShadowSlotElement(tt)?Promise.resolve(j):Promise.resolve().then(it).then(lt).then(vt).then(rt).then(function(){return j});function it(){function ut(X,Z){Z.font=X.font,Z.fontFamily=X.fontFamily,Z.fontFeatureSettings=X.fontFeatureSettings,Z.fontKerning=X.fontKerning,Z.fontSize=X.fontSize,Z.fontStretch=X.fontStretch,Z.fontStyle=X.fontStyle,Z.fontVariant=X.fontVariant,Z.fontVariantCaps=X.fontVariantCaps,Z.fontVariantEastAsian=X.fontVariantEastAsian,Z.fontVariantLigatures=X.fontVariantLigatures,Z.fontVariantNumeric=X.fontVariantNumeric,Z.fontVariationSettings=X.fontVariationSettings,Z.fontWeight=X.fontWeight}function Y(X,Z){const z=h(X);z.cssText?(Z.style.cssText=z.cssText,ut(z,Z.style)):(_(R,X,z,C,Z),C===null&&(["inset-block","inset-block-start","inset-block-end"].forEach(pt=>Z.style.removeProperty(pt)),["left","right","top","bottom"].forEach(pt=>{Z.style.getPropertyValue(pt)&&Z.style.setProperty(pt,"0px")})))}Y(tt,j)}function lt(){const ut=r.uid();function Y(X){const Z=h(tt,X),z=Z.getPropertyValue("content");if(z!==""&&z!=="none"){let q=function(){const F=`.${ut}:`+X,ht=(Z.cssText?Pe:ae)();return document.createTextNode(F+`{${ht}}`);function Pe(){return`${Z.cssText} content: ${z};`}function ae(){return r.asArray(Z).map(Qe).join("; ")+";";function Qe(Je){const No=Z.getPropertyValue(Je),Ui=Z.getPropertyPriority(Je)?" !important":"";return Je+": "+No+Ui}}};var pt=q;const ft=j.getAttribute("class")||"",G=(j.setAttribute("class",ft+" "+ut),document.createElement("style"));G.appendChild(q()),j.appendChild(G)}}[":before",":after"].forEach(function(X){Y(X)})}function vt(){r.isHTMLTextAreaElement(tt)&&(j.innerHTML=tt.value),r.isHTMLInputElement(tt)&&j.setAttribute("value",tt.value)}function rt(){r.isSVGElement(j)&&(j.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.isSVGRectElement(j))&&["width","height"].forEach(function(ut){const Y=j.getAttribute(ut);Y&&j.style.setProperty(ut,Y)})}}}(w,S,null)}).then(y).then(v).then(function(w){S.bgcolor&&(w.style.backgroundColor=S.bgcolor),S.width&&(w.style.width=S.width+"px"),S.height&&(w.style.height=S.height+"px"),S.style&&Object.keys(S.style).forEach(function(T){w.style[T]=S.style[T]});let N=null;return typeof S.onclone=="function"&&(N=S.onclone(w)),Promise.resolve(N).then(function(){return w})}).then(function(w){let N=S.width||r.width(w),T=S.height||r.height(w);return Promise.resolve(w).then(function(R){return R.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(R)}).then(r.escapeXhtml).then(function(R){var C=(r.isDimensionMissing(N)?' width="100%"':` width="${N}"`)+(r.isDimensionMissing(T)?' height="100%"':` height="${T}"`);return`<svg xmlns="http://www.w3.org/2000/svg"${(r.isDimensionMissing(N)?"":` width="${N}"`)+(r.isDimensionMissing(T)?"":` height="${T}"`)}><foreignObject${C}>${R}</foreignObject></svg>`}).then(function(R){return"data:image/svg+xml;charset=utf-8,"+R})}).then(function(w){for(;0<I.length;){var N=I.pop();N.parent.replaceChild(N.child,N.wrapper)}return w}).then(function(w){return f.impl.urlCache=[],function(){m&&(document.body.removeChild(m),m=null),E&&clearTimeout(E),E=setTimeout(()=>{E=null,x={}},2e4)}(),w})}function g(P,S){return d(P,S=S||{}).then(r.makeImage).then(function(A){var I=typeof S.scale!="number"?1:S.scale,w=function(T,R){let C=S.width||r.width(T),D=S.height||r.height(T);return r.isDimensionMissing(C)&&(C=r.isDimensionMissing(D)?300:2*D),r.isDimensionMissing(D)&&(D=C/2),T=document.createElement("canvas"),T.width=C*R,T.height=D*R,S.bgcolor&&((R=T.getContext("2d")).fillStyle=S.bgcolor,R.fillRect(0,0,T.width,T.height)),T}(P,I),N=w.getContext("2d");return N.msImageSmoothingEnabled=!1,N.imageSmoothingEnabled=!1,A&&(N.scale(I,I),N.drawImage(A,0,0)),w})}let m=null;function y(P){return a.resolveAll().then(function(S){var A;return S!==""&&(A=document.createElement("style"),P.appendChild(A),A.appendChild(document.createTextNode(S))),P})}function v(P){return s.inlineAll(P).then(function(){return P})}function _(P,S,A,I,w){const N=f.impl.options.copyDefaultStyles?function(R,k){var k=function(L){var V=[];do if(L.nodeType===u){var H=L.tagName;if(V.push(H),O.includes(H))break}while(L=L.parentNode,L);return V}(k),D=function(L){return(R.styleCaching!=="relaxed"?L:L.filter((V,H,j)=>H===0||H===j.length-1)).join(">")}(k);if(x[D])return x[D];var $=function(){if(m)return m.contentWindow;var L=document.characterSet||"UTF-8",V=document.doctype,V=V?(`<!DOCTYPE ${H(V.name)} ${H(V.publicId)} `+H(V.systemId)).trim()+">":"";return(m=document.createElement("iframe")).id="domtoimage-sandbox-"+r.uid(),m.style.visibility="hidden",m.style.position="fixed",document.body.appendChild(m),function(j,tt,it,lt){try{return j.contentWindow.document.write(tt+`<html><head><meta charset='${it}'><title>${lt}</title></head><body></body></html>`),j.contentWindow}catch{}var vt=document.createElement("meta");vt.setAttribute("charset",it);try{var rt=document.implementation.createHTMLDocument(lt),ut=(rt.head.appendChild(vt),tt+rt.documentElement.outerHTML);return j.setAttribute("srcdoc",ut),j.contentWindow}catch{}return j.contentDocument.head.appendChild(vt),j.contentDocument.title=lt,j.contentWindow}(m,V,L,"domtoimage-sandbox");function H(j){var tt;return j?((tt=document.createElement("div")).innerText=j,tt.innerHTML):""}}(),k=function(L,V){let H=L.body;do{var j=V.pop(),j=L.createElement(j);H.appendChild(j),H=j}while(0<V.length);return H.textContent="​",H}($.document,k),$=function(L,V){const H={},j=L.getComputedStyle(V);return r.asArray(j).forEach(function(tt){H[tt]=tt==="width"||tt==="height"?"auto":j.getPropertyValue(tt)}),H}($,k);return function(L){do{var V=L.parentElement;V!==null&&V.removeChild(L),L=V}while(L&&L.tagName!=="BODY")}(k),x[D]=$}(P,S):{},T=w.style;r.asArray(A).forEach(function(R){var C,D=A.getPropertyValue(R),k=N[R],$=I?I.getPropertyValue(R):void 0;(D!==k||I&&D!==$)&&(k=A.getPropertyPriority(R),$=T,D=D,k=k,C=0<=["background-clip"].indexOf(R=R),k?($.setProperty(R,D,k),C&&$.setProperty("-webkit-"+R,D,k)):($.setProperty(R,D),C&&$.setProperty("-webkit-"+R,D)))})}let E=null,x={};const O=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DETAILS","DIALOG","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","SVG","TABLE","UL","math","svg","BODY","HEAD","HTML"]})(DT)})(wC);const Uf=Tl;var EC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$f="DONT_STYLE_ME_css_styles_verifier",U=function(t){EC(n,t);function n(e,r){return t.call(this,e,r)||this}return n.getHTMLElementSize=function(e){return{width:e.clientWidth,height:e.clientHeight}},n.getSVGElementSize=function(e,r){r===void 0&&(r={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}),e.attr||(e=B(e));var i={width:0,height:0},a=function(p){p&&Object.keys(i).forEach(function(d){if(p[d]){var g=p[d],m=parseFloat(g);g&&m>i[d]&&(""+g).indexOf("%")===-1&&(i[d]=m)}})},o={width:e.attr("width"),height:e.attr("height")},s,l,u,c;try{s=e.node().getBBox(),l={width:s.width,height:s.height}}catch{}try{u=e.node().getBoundingClientRect(),c={width:u.width,height:u.height}}catch{}var f={width:e.node().clientWidth,height:e.node().clientHeight};if(r){if(r.useAttrs&&(a(o),i.width>0&&i.height>0))return i;if(r.useClientDimensions&&(a(f),i.width>0&&i.height>0))return f;if(r.useBBox&&(a(l),i.width>0&&i.height>0))return l;if(r.useBoundingRect&&(a(c),i.width>0&&i.height>0))return c}try{var h={width:b(e.node(),"width","baseVal","value"),height:b(e.node(),"height","baseVal","value")};a(h)}catch{a(f),a(l),a(o)}return i},n.appendOrSelect=function(e,r){var i=e.select(""+r);if(i.empty()){var a=r.split("#"),o=void 0,s=void 0;return a.length===2?(o=a[0],a=a[1].split("."),s=a[0]):(a=r.split("."),o=a[0]),e.append(o).attr("id",s).attr("class",a.slice(1).join(" "))}return i},n.prototype.init=function(){this.styleHolderElement(),this.initializeID(),this.addMainContainer(),this.verifyCSSStylesBeingApplied(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()},n.prototype.getChartID=function(){return this.chartID},n.prototype.generateElementIDString=function(e){return"chart-"+this.chartID+"-"+e},n.prototype.initializeID=function(){this.chartID=Math.floor((1+Math.random())*281474976710656).toString(16)},n.prototype.addMainContainer=function(){var e=this.model.getOptions(),r=b(e,"style","prefix"),i=B(this.getHolder()).append("div").classed(Wt+"--"+r+"--chart-wrapper",!0).attr("id","chart-"+this.getChartID()).style("height","100%").style("width","100%");i.append("g").attr("class",$f),this.mainContainer=i.node()},n.prototype.update=function(){this.styleHolderElement()},n.prototype.styleHolderElement=function(){var e=this.getHolder(),r=this.model.getOptions(),i=r.width,a=r.height,o=r.theme;i!==this.width&&(e.style.width=i,this.width=i),a!==this.height&&(e.style.height=a,this.height=a),B(this.getHolder()).classed(Wt+"--chart-holder",!0).attr("data-carbon-theme",o)},n.prototype.getHolder=function(){return this.model.get("holder")},n.prototype.exportToJPG=function(){var e=this,r=this.model.getOptions(),i=this.getHolder(),a=B(i);a.classed("filled",!0),Uf.toJpeg(this.getMainContainer(),{bgcolor:typeof window<"u"?window.getComputedStyle(i).getPropertyValue("background-color"):void 0,quality:1,filter:function(o){return!(o.classList&&o.classList.contains("cds--cc--toolbar"))}}).then(function(o){var s="myChart",l=b(r,"fileDownload","fileName");typeof l=="function"&&(s=l("jpg")),e.services.files.downloadImage(o,s+".jpg"),a.classed("filled",!1)})},n.prototype.exportToPNG=function(){var e=this,r=this.model.getOptions(),i=this.getHolder(),a=B(i);a.classed("filled",!0),Uf.toPng(this.getMainContainer(),{bgcolor:typeof window<"u"?window.getComputedStyle(i).getPropertyValue("background-color"):void 0,quality:1,filter:function(o){return!(o.classList&&o.classList.contains("cds--cc--toolbar"))}}).then(function(o){var s="myChart",l=b(r,"fileDownload","fileName");typeof l=="function"&&(s=l("png")),e.services.files.downloadImage(o,s+".png"),a.classed("filled",!1)}).catch(function(o){console.error("oops, something went wrong!",o)})},n.prototype.toggleFullscreen=function(){var e=this.getHolder(),r=B(e),i=r.classed("fullscreen");i&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},n.prototype.handleFullscreenChange=function(){var e=this;document.addEventListener("fullscreenchange",function(){var r=B(e.getHolder()),i=r.classed("fullscreen");r.classed("fullscreen",!i)})},n.prototype.verifyCSSStylesBeingApplied=function(){var e=this;setTimeout(function(){var r=B(e.mainContainer).select("g."+$f).node(),i=getComputedStyle(r);(i.getPropertyValue("overflow")!=="hidden"||i.getPropertyValue("opacity")!=="0")&&console.error("Missing CSS styles for Carbon Charts. Please read the Carbon Charts getting started guide.")})},n.prototype.setSVGMaxHeight=function(){if(!this.model.getOptions().height){var e=n.getSVGElementSize(B(this.mainContainer),{useBBox:!0}).height,r=B(this.mainContainer).attr("class"),i=B(this.mainContainer).selectAll("."+r+" > svg"),a=0;i.nodes().forEach(function(o){a+=Number(n.getSVGElementSize(B(o),{useBBox:!0}).height)}),a<=e?B(this.mainContainer).attr("height",a):B(this.mainContainer).attr("height","100%")}},n.prototype.getMainContainer=function(){return this.mainContainer},n.prototype.addHolderListeners=function(){var e=this,r=this.getHolder();r&&B(r).on("mouseover",function(){e.services.events.dispatchEvent(M.Chart.MOUSEOVER)}).on("mouseout",function(){e.services.events.dispatchEvent(M.Chart.MOUSEOUT)})},n.prototype.addResizeListener=function(){var e=this,r=this.getHolder();if(r){var i=r.clientWidth,a=r.clientHeight,o=xa(function(l,u){r&&(Math.abs(i-r.clientWidth)>1||Math.abs(a-r.clientHeight)>1)&&(i=r.clientWidth,a=r.clientHeight,e.services.events.dispatchEvent(M.Chart.RESIZE))},12.5),s=new TC(o);s.observe(r)}},n}(Ke),SC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MC=function(t){SC(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(){this.documentFragment=document.createDocumentFragment()},n.prototype.addEventListener=function(e,r){this.documentFragment.addEventListener(e,r)},n.prototype.removeEventListener=function(e,r){this.documentFragment.removeEventListener(e,r)},n.prototype.dispatchEvent=function(e,r){var i;r?i=new CustomEvent(e,{detail:r}):(i=document.createEvent("Event"),i.initEvent(e,!1,!0)),this.documentFragment.dispatchEvent(i)},n}(Ke),AC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),CC=function(t){AC(n,t);function n(e,r){return t.call(this,e,r)||this}return n.prototype.downloadCSV=function(e,r){var i=document.createElement("a"),a="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:a}),r);else if(URL&&"download"in i){var o=URL.createObjectURL(new Blob([e],{type:a}));i.href=o,i.setAttribute("download",r),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}else location.href="data:application/octet-stream,"+encodeURIComponent(e)},n.prototype.downloadImage=function(e,r){var i=document.createElement("a");i.download=r,i.href=e,document.body.appendChild(i),i.click(),document.body.removeChild(i)},n}(Ke),DC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),LC=function(t){DC(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.pendingTransitions={},e}return n.prototype.init=function(){var e=this;this.services.events.addEventListener(M.Model.UPDATE,function(){e.pendingTransitions={}})},n.prototype.setupTransition=function(e){var r=this,i=e.transition,a=e.name,o=e.animate;return this.pendingTransitions[i._id]=i,i.on("end interrupt cancel",function(){delete r.pendingTransitions[i._id]}),this.model.getOptions().animations===!1||o===!1?i.duration(0):i.duration(b(tl,a,"duration")||tl.default.duration)},n.prototype.getPendingTransitions=function(){return this.pendingTransitions},n}(Ke),PC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wl=function(t){PC(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.appendOrUpdateLinearGradient=function(e){var r=e.svg.select("defs linearGradient#"+e.id);r.empty()&&(r=e.svg.append("defs").append("linearGradient").attr("id",e.id).attr("x1",e.x1).attr("x2",e.x2).attr("y1",e.y1).attr("y2",e.y2)),r.selectAll("stop").remove(),r.selectAll("stop").data(e.stops).enter().append("stop").attr("offset",function(i){return i.offset}).style("stop-color",function(i){return i.color}).style("stop-opacity",function(i){return i.opacity})},n.getOffsetRatio=function(e){var r=(Math.abs(e[1])*100/Math.abs(e[0]-e[1])).toFixed(2)+"%";return r},n.getStops=function(e,r){var i=e[0]<0&&e[1]>0,a=[{offset:"0%",color:r,opacity:"0.6"},{offset:"80%",color:r,opacity:"0"}];return i&&(a=[{offset:"0%",color:r,opacity:"0.6"},{offset:n.getOffsetRatio(e),color:r,opacity:"0"},{offset:"100%",color:r,opacity:"0.6"}]),a},n}(Ke),RC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),IC=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e},kC=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},NC=function(t){RC(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.scaleTypes={top:null,right:null,bottom:null,left:null},e.scales={top:null,right:null,bottom:null,left:null},e}return n.prototype.getDomainAxisPosition=function(e){var r=(e===void 0?{}:e).datum,i=r===void 0?null:r,a;if(this.dualAxes&&i){var o=this.model.getOptions(),s=o.data.groupMapsTo,l=b(o,"axes",this.secondaryDomainAxisPosition),u=i[s];if(!((a=l)===null||a===void 0)&&a.correspondingDatasets&&l.correspondingDatasets.includes(u))return this.secondaryDomainAxisPosition}return this.domainAxisPosition},n.prototype.getRangeAxisPosition=function(e){var r=e===void 0?{}:e,i=r.datum,a=i===void 0?null:i,o=r.groups,s=o===void 0?null:o,l;if(this.dualAxes){var u=this.model.getOptions(),c=u.data.groupMapsTo,f=b(u,"axes",this.secondaryRangeAxisPosition),h=void 0;if(a!==null?h=a[c]:s&&s.length>0&&(h=s[0]),!((l=f)===null||l===void 0)&&l.correspondingDatasets&&f.correspondingDatasets.includes(h))return this.secondaryRangeAxisPosition}return this.rangeAxisPosition},n.prototype.getAxisOptions=function(e){return b(this.model.getOptions(),"axes",e)},n.prototype.getDomainAxisOptions=function(){var e=this.getDomainAxisPosition();return this.getAxisOptions(e)},n.prototype.getRangeAxisOptions=function(){var e=this.getRangeAxisPosition();return this.getAxisOptions(e)},n.prototype.getScaleLabel=function(e){var r=this.getAxisOptions(e),i=r.title;return i||(e===W.BOTTOM||e===W.TOP?"x-value":"y-value")},n.prototype.getDomainLabel=function(){return this.getScaleLabel(this.getDomainAxisPosition())},n.prototype.getRangeLabel=function(){return this.getScaleLabel(this.getRangeAxisPosition())},n.prototype.update=function(e){var r=this;this.determineAxisDuality(),this.findDomainAndRangeAxes(),this.determineOrientation();var i=Object.keys(W).map(function(a){return W[a]});i.forEach(function(a){r.scales[a]=r.createScale(a)})},n.prototype.findDomainAndRangeAxes=function(){var e=this.findVerticalAxesPositions(),r=this.findHorizontalAxesPositions(),i=this.findDomainAndRangeAxesPositions(e,r);this.domainAxisPosition=i.primaryDomainAxisPosition,this.rangeAxisPosition=i.primaryRangeAxisPosition,this.isDualAxes()&&(this.secondaryDomainAxisPosition=i.secondaryDomainAxisPosition,this.secondaryRangeAxisPosition=i.secondaryRangeAxisPosition)},n.prototype.determineOrientation=function(){(this.rangeAxisPosition===W.LEFT||this.rangeAxisPosition===W.RIGHT)&&(this.domainAxisPosition===W.BOTTOM||this.domainAxisPosition===W.TOP)?this.orientation=Pt.VERTICAL:this.orientation=Pt.HORIZONTAL},n.prototype.isDualAxes=function(){return this.dualAxes},n.prototype.determineAxisDuality=function(){var e,r,i,a,o=this.model.getOptions(),s=b(o,"axes");(!((e=s[W.LEFT])===null||e===void 0)&&e.correspondingDatasets&&s[W.RIGHT]||!((r=s[W.RIGHT])===null||r===void 0)&&r.correspondingDatasets&&s[W.LEFT]||!((i=s[W.TOP])===null||i===void 0)&&i.correspondingDatasets&&s[W.BOTTOM]||!((a=s[W.BOTTOM])===null||a===void 0)&&a.correspondingDatasets&&s[W.TOP])&&(this.dualAxes=!0)},n.prototype.getCustomDomainValuesByposition=function(e){var r=b(this.model.getOptions(),"axes",e,"domain");if(r&&!Array.isArray(r))throw new Error("Domain in "+e+" axis is not a valid array");if(Array.isArray(r)&&(this.scaleTypes[e]===K.LINEAR||this.scaleTypes[e]===K.TIME)&&r.length!==2)throw new Error("There can only be 2 elements in domain for scale type: "+this.scaleTypes[e]);return r},n.prototype.getOrientation=function(){return this.orientation},n.prototype.getScaleByPosition=function(e){return this.scales[e]},n.prototype.getScaleTypeByPosition=function(e){return this.scaleTypes[e]},n.prototype.getDomainAxisScaleType=function(){var e=this.getDomainAxisPosition();return this.getScaleTypeByPosition(e)},n.prototype.getRangeAxisScaleType=function(){var e=this.getRangeAxisPosition();return this.getScaleTypeByPosition(e)},n.prototype.getDomainScale=function(){return this.scales[this.domainAxisPosition]},n.prototype.getRangeScale=function(){return this.scales[this.rangeAxisPosition]},n.prototype.getMainXAxisPosition=function(){var e=[W.BOTTOM,W.TOP];return[this.domainAxisPosition,this.rangeAxisPosition].find(function(r){return e.indexOf(r)>-1})},n.prototype.getMainYAxisPosition=function(){var e=[W.LEFT,W.RIGHT];return[this.domainAxisPosition,this.rangeAxisPosition].find(function(r){return e.indexOf(r)>-1})},n.prototype.getMainXScale=function(){return this.scales[this.getMainXAxisPosition()]},n.prototype.getMainYScale=function(){return this.scales[this.getMainYAxisPosition()]},n.prototype.getValueFromScale=function(e,r,i,a,o){var s=this.model.getOptions(),l=b(s,"axes"),u=l[i],c=u.mapsTo,f=b(a,c)!==null?a[c]:a,h;switch(r){case K.LABELS:h=e(f)+e.step()/2;break;case K.TIME:h=e(new Date(f));break;default:h=e(f)}return h},n.prototype.getBoundedScaledValues=function(e,r){var i=this.model.getOptions().bounds,a=this.getRangeAxisPosition({datum:e}),o=this.scales[a],s=this.model.getOptions(),l=b(s,"axes"),u=l[a],c=u.mapsTo,f=e[c]!==void 0?e[c]:e,h=[o(b(e,i.upperBoundMapsTo)!==null?e[i.upperBoundMapsTo]:f),o(b(e,i.lowerBoundMapsTo)!==null?e[i.lowerBoundMapsTo]:f)];return h},n.prototype.getValueThroughAxisPosition=function(e,r,i){var a=this.scaleTypes[e],o=this.scales[e];return this.getValueFromScale(o,a,e,r,i)},n.prototype.getDomainValue=function(e,r){var i=this.getDomainAxisPosition({datum:e});return this.getValueThroughAxisPosition(i,e,r)},n.prototype.getRangeValue=function(e,r){var i=this.getRangeAxisPosition({datum:e});return this.getValueThroughAxisPosition(i,e,r)},n.prototype.getMainXScaleType=function(){return this.getScaleTypeByPosition(this.getMainXAxisPosition())},n.prototype.getMainYScaleType=function(){return this.getScaleTypeByPosition(this.getMainYAxisPosition())},n.prototype.getDomainIdentifier=function(e){var r=this.model.getOptions();return b(r,"axes",this.getDomainAxisPosition({datum:e}),"mapsTo")},n.prototype.getRangeIdentifier=function(e){var r=this.model.getOptions();return b(r,"axes",this.getRangeAxisPosition({datum:e}),"mapsTo")},n.prototype.extendsDomain=function(e,r){var i=this.model.getOptions(),a=b(i,"axes",e);if(a.scaleType===K.TIME){var o=b(i,"timeScale","addSpaceOnEdges");return BC(r,o)}else return UC(r,Ue.paddingRatio,a.scaleType)},n.prototype.findVerticalAxesPositions=function(){var e=this.model.getOptions(),r=b(e,"axes"),i=this.isDualAxes();return b(r,W.LEFT)===null&&b(r,W.RIGHT)!==null||b(r,W.RIGHT,"main")===!0||i&&b(r,W.LEFT,"correspondingDatasets")?{primary:W.RIGHT,secondary:W.LEFT}:{primary:W.LEFT,secondary:W.RIGHT}},n.prototype.findHorizontalAxesPositions=function(){var e=this.model.getOptions(),r=b(e,"axes"),i=this.isDualAxes();return b(r,W.BOTTOM)===null&&b(r,W.TOP)!==null||b(r,W.TOP,"main")===!0||i&&b(r,W.BOTTOM,"correspondingDatasets")?{primary:W.TOP,secondary:W.BOTTOM}:{primary:W.BOTTOM,secondary:W.TOP}},n.prototype.findDomainAndRangeAxesPositions=function(e,r){var i=this.model.getOptions(),a=b(i,"axes",e.primary),o=b(i,"axes",r.primary),s=a.scaleType||K.LINEAR,l=o.scaleType||K.LINEAR,u={primaryDomainAxisPosition:null,secondaryDomainAxisPosition:null,primaryRangeAxisPosition:null,secondaryRangeAxisPosition:null};return u.primaryDomainAxisPosition=r.primary,u.primaryRangeAxisPosition=e.primary,u.secondaryDomainAxisPosition=r.secondary,u.secondaryRangeAxisPosition=e.secondary,(!(l===K.LABELS||l===K.TIME)&&s===K.LABELS||s===K.TIME)&&(u.primaryDomainAxisPosition=e.primary,u.primaryRangeAxisPosition=r.primary,u.secondaryDomainAxisPosition=e.secondary,u.secondaryRangeAxisPosition=r.secondary),u},n.prototype.getScaleDomain=function(e){var r=this.model.getOptions(),i=b(r,"axes",e),a=b(r,"bounds"),o=i.includeZero,s=b(i,"scaleType")||K.LINEAR;if(this.model.isDataEmpty())return[];if(i.binned){var l=this.model.getBinConfigurations().bins;return[0,An(l,function(A){return A.length})]}else if(i.limitDomainToBins){var l=this.model.getBinConfigurations().bins,u=this.model.getStackKeys({bins:l});return[u[0].split("-")[0],u[u.length-1].split("-")[1]]}var c=this.model.getDisplayData(),f=i.extendLinearDomainBy,h=i.mapsTo,p=i.percentage,d=i.thresholds,g=Ue.ratio,m=g.reference,y=g.compareTo;if(i.domain)return s===K.LABELS?i.domain:(s===K.TIME&&(i.domain=i.domain.map(function(A){return A.getTime===void 0?new Date(A):A})),this.extendsDomain(e,i.domain));if(p)return[0,100];if(i&&s===K.LABELS)return hi(c.map(function(A){return A[h]}));var v,_,E=this.model.getDataGroupNames();if(s===K.LABELS_RATIO)return c.map(function(A){return A[m]+"/"+A[y]});if(s===K.TIME)_=c.map(function(A){return+new Date(A[h])});else if(a&&r.axes)_=[],c.forEach(function(A){_.push(A[h]),A[a.upperBoundMapsTo]&&_.push(A[a.upperBoundMapsTo]),A[a.lowerBoundMapsTo]&&_.push(A[a.lowerBoundMapsTo])});else if(i.stacked===!0&&E&&e===this.getRangeAxisPosition()){var x=r.data.groupMapsTo,O=this.model.getDataValuesGroupedByKeys({groups:E}),P=c.filter(function(A){return!E.includes(A[x])}),S=[];O.forEach(function(A){A.sharedStackKey;var I=IC(A,["sharedStackKey"]),w=0,N=0;Object.values(I).forEach(function(T){isNaN(T)||(T<0?N+=T:w+=T)}),S.push([N,w])}),_=kC(sd(S),P.map(function(A){return A[h]}))}else _=[],c.forEach(function(A){var I=A[h];Array.isArray(I)&&I.length===2?(_.push(I[0]),_.push(I[1])):(f&&_.push(Math.max(A[h],A[f])),_.push(I))});return s!==K.TIME&&s!==K.LOG&&o&&_.push(0),d&&d.length>0&&d.forEach(function(A){var I=b(A,"value");I!==null&&_.push(I)}),v=we(_),v=this.extendsDomain(e,v),v},n.prototype.createScale=function(e){var r=this.model.getOptions(),i=b(r,"axes",e);if(!i)return null;var a=b(i,"scaleType")||K.LINEAR;this.scaleTypes[e]=a;var o;return a===K.TIME?o=Hp():a===K.LOG?o=Pp().base(i.base||10):a===K.LABELS||a===K.LABELS_RATIO?o=Ri():o=Ce(),o.domain(this.getScaleDomain(e)),o},n.prototype.getHighestDomainThreshold=function(){var e=b(this.model.getOptions(),"axes"),r=this.getDomainAxisPosition(),i=e[r].thresholds;if(!Array.isArray(i)||Array.isArray(i)&&!i.length)return null;var a=this.getDomainScale(),o=i.sort(function(l,u){return u.value-l.value})[0],s=this.getScaleTypeByPosition(r);return s===K.TIME&&(typeof o.value=="string"||o.value.getTime===void 0)&&(o.value=new Date(o.value)),{threshold:o,scaleValue:a(o.value)}},n.prototype.getHighestRangeThreshold=function(){var e=b(this.model.getOptions(),"axes"),r=this.getRangeAxisPosition(),i=e[r].thresholds;if(!Array.isArray(i)||Array.isArray(i)&&!i.length)return null;var a=this.getRangeScale(),o=i.sort(function(s,l){return l.value-s.value})[0];return{threshold:o,scaleValue:a(o.value)}},n}(Ke);function BC(t,n){var e=new Date(t[0]),r=new Date(t[1]);return XM(r,e)>1?[oC(e,n),av(r,n)]:YM(r,e)>1?[aC(e,n),ku(r,n)]:zM(r,e)>1?[rC(e,n),rv(r,n)]:jM(r,e)>1?[iC(e,n),iv(r,n)]:Af(r,e)>30?[If(e,n*30),_l(r,n*30)]:Af(r,e)>1?[If(e,n),_l(r,n)]:Cf(r,e)>15?[kf(e,n*15),xl(r,n*15)]:Cf(r,e)>1?[kf(e,n),xl(r,n)]:[e,r]}function UC(t,n,e){var r=t[0],i=t[1],a=i-r,o=a*n,s=i<=0&&i+o>0?0:i+o,l=r>=0&&r-o<0?0:r-o;if(e===K.LOG&&l<=0){if(r<=0)throw Error("Data must have values greater than 0 if log scale type is used.");l=r}return[l,s]}var $C=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),VC=function(t){$C(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.curveTypes={curveLinear:Eo,curveLinearClosed:Jp,curveBasis:mM,curveBasisClosed:yM,curveBasisOpen:_M,curveBundle:xM,curveCardinal:bM,curveCardinalClosed:OM,curveCardinalOpen:TM,curveCatmullRom:wM,curveCatmullRomClosed:EM,curveCatmullRomOpen:SM,curveMonotoneX:MM,curveMonotoneY:AM,curveNatural:CM,curveStep:DM,curveStepAfter:PM,curveStepBefore:LM},e}return n.prototype.getD3Curve=function(){var e="curveLinear",r=this.model.getOptions().curve;if(r&&(typeof r=="string"?e=r:e=r.name),this.curveTypes[e]){var i=this.curveTypes[e];return r&&Object.keys(r).forEach(function(a){i[a]&&(i=i[a](r[a]))}),i}return console.warn("The curve type '"+e+"' is invalid, using 'curveLinear' instead"),this.curveTypes.curveLinear},n}(Ke),HC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),FC=function(t){HC(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.isZoomBarEnabled=function(){if(!this.services.cartesianScales||!b(this.model.getOptions(),"zoomBar","top","enabled"))return!1;this.services.cartesianScales.findDomainAndRangeAxes();var e=this.services.cartesianScales.getMainXAxisPosition(),r=b(this.model.getOptions(),"axes",e,"scaleType");return e===W.BOTTOM&&r===K.TIME},n.prototype.getZoomBarData=function(){var e=this.model.getZoomBarData();return e&&e.length>1?e:this.model.getDisplayData()},n.prototype.getDefaultZoomBarDomain=function(e){var r=e||this.services.zoom.getZoomBarData(),i=this.services.cartesianScales,a=i.getMainXAxisPosition(),o=i.getDomainIdentifier(),s=b(this.model.getOptions(),"axes",a,"domain");return Array.isArray(s)&&s.length===2?s:i.extendsDomain(a,we(r,function(l){return l[o]}))},n.prototype.handleDomainChange=function(e,r){r===void 0&&(r={dispatchEvent:!0}),this.model.set({zoomDomain:e},{animate:!1}),r.dispatchEvent&&this.services.events.dispatchEvent(M.ZoomDomain.CHANGE,{newDomain:e})},n.prototype.getZoomRatio=function(){return b(this.model.getOptions(),"zoomBar","zoomRatio")},n.prototype.filterDataForRangeAxis=function(e,r){var i=this.model.get("zoomDomain"),a=Object.assign({stacked:!1},r),o=b(this.model.getOptions(),"zoomBar","updateRangeAxis");if(this.isZoomBarEnabled()&&o&&i){var s=a.stacked?"sharedStackKey":this.services.cartesianScales.getDomainIdentifier(),l=e.filter(function(u){return new Date(u[s])>=i[0]&&new Date(u[s])<=i[1]});if(l.length>0)return l}return e},n.prototype.zoomIn=function(e){e===void 0&&(e=this.getZoomRatio());var r=this.model.get("zoomDomain"),i=Yt.handleWidth,a=this.services.cartesianScales.getMainXScale().copy();a.domain(this.getDefaultZoomBarDomain());var o=a(r[0]),s=a(r[1]);if(!(s-o<i+1)){var l=a.range(),u=s-o,c=Math.min((l[1]-l[0])/2*(e/2),u/2),f=o+c,h=s-c;f>=h&&(f=o+u/2-i/2,h=s-u/2+i/2);var p=[a.invert(f),a.invert(h)];(r[0].valueOf()!==p[0].valueOf()||r[1].valueOf()!==p[1].valueOf())&&this.handleDomainChange(p)}},n.prototype.zoomOut=function(e){e===void 0&&(e=this.getZoomRatio());var r=this.model.get("zoomDomain"),i=this.services.cartesianScales.getMainXScale().copy();i.domain(this.getDefaultZoomBarDomain());var a=i(r[0]),o=i(r[1]),s=i.range(),l=(s[1]-s[0])/2*(e/2),u=Math.max(a-l,s[0]),c=Math.min(o+l,s[1]),f=[i.invert(u),i.invert(c)];(r[0].valueOf()!==f[0].valueOf()||r[1].valueOf()!==f[1].valueOf())&&this.handleDomainChange(f)},n.prototype.resetZoomDomain=function(){var e=this.model.get("zoomDomain"),r=this.getDefaultZoomBarDomain();(e[0].valueOf()!==r[0].valueOf()||e[1].valueOf()!==r[1].valueOf())&&this.handleDomainChange(r)},n.prototype.isMinZoomDomain=function(){var e=this.model.get("zoomDomain"),r=this.getDefaultZoomBarDomain();if(!e||!r)return!1;var i=e[1].valueOf()-e[0].valueOf(),a=r[1].valueOf()-r[0].valueOf(),o=b(this.model.getOptions(),"zoomBar","minZoomRatio");return i/a<o},n.prototype.isMaxZoomDomain=function(){var e=this.model.get("zoomDomain"),r=this.getDefaultZoomBarDomain();return!!(e&&r&&e[0].valueOf()===r[0].valueOf()&&e[1].valueOf()===r[1].valueOf())},n.prototype.isEmptyState=function(){return this.getZoomBarData().length===0},n.prototype.isZoomBarLoading=function(e){return b(this.model.getOptions(),"zoomBar",e,"loading")},n.prototype.isZoomBarLocked=function(e){return b(this.model.getOptions(),"zoomBar",e,"locked")},n}(Ke),GC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zC=function(t){GC(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.zoomIn=function(e,r,i){var a,o,s,l=i||ar;e&&(a=e.x,o=e.y,s=2);var u=U.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0}),c=u.width,f=u.height;r.transition().duration(l.duration).ease(l.ease).attr("transform","translate("+c/2+", "+f/2+") scale("+s+") translate("+-a+","+-o+")"),this.services.events.dispatchEvent(M.CanvasZoom.CANVAS_ZOOM_IN,{element:B(e)})},n.prototype.zoomOut=function(e,r){var i=r||ar;e.transition().duration(i.duration).ease(i.ease).attr("transform",""),this.services.events.dispatchEvent(M.CanvasZoom.CANVAS_ZOOM_OUT)},n}(Ke),ct=function(){function t(n,e,r){if(this.renderType=Q.HTML,this.configs={},this.model=n,this.services=e,r&&(this.configs=r,this.configs.id)){var i=b(this.model.getOptions(),"style","prefix");this.id=i+"--"+this.configs.id}this.parent||this.setParent(B(this.services.domUtils.getMainContainer()))}return t.prototype.init=function(){},t.prototype.render=function(n){console.error("render() method is not implemented")},t.prototype.destroy=function(){},t.prototype.setModel=function(n){this.model=n},t.prototype.setServices=function(n){this.services=n},t.prototype.setParent=function(n){var e=this.parent;if(this.parent=n,!(e&&e.node()===n.node())&&this.type){var r=b(this.model.getOptions(),"style","prefix");this.parent.classed(Wt+"--"+r+"--"+this.type,!0),e&&e.classed(Wt+"--"+r+"--"+this.type,!1)}},t.prototype.getParent=function(){return this.parent},t.prototype.getComponentContainer=function(n){if(n===void 0&&(n={withinChartClip:!1}),this.type){var e=b(this.model.getOptions(),"style","prefix"),r=this.id?"#"+this.id:"",i=U.appendOrSelect(this.parent,(this.renderType===Q.SVG?"svg":"div")+r+"."+Wt+"--"+e+"--"+this.type);if(n.withinChartClip){var a=this.model.get("chartClipId");if(a){var o=B("#"+a),s=o.select("rect");s.size()!==0&&parseFloat(s.attr("height"))>0&&i.attr("clip-path","url(#"+a+")")}}return i.attr("width","100%").attr("height","100%")}return this.parent},t.prototype.getOptions=function(){if(this.configs.options){var n=et({},this.model.getOptions(),this.configs.options);return n}return this.model.getOptions()},t}(),WC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vu=function(t){WC(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="legend",e.renderType=Q.HTML,e}return n.prototype.render=function(){var e=this,r=this.getOptions(),i=b(r,"legend"),a=b(i,"alignment"),o=b(r,"legend","orientation"),s=this.model.getDataGroups(),l=St.items.status.DISABLED,u=s.some(function(S){return S.status===l}),c=b(i,"order"),f=this.getComponentContainer().classed("center-aligned",a===Lt.CENTER).classed("right-aligned",a===Lt.RIGHT).classed(o,!0).classed("has-deactivated-items",u).attr("role",nt.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");c&&(s=this.sortDataGroups(s,c));var h=f.selectAll("div.legend-item").data(s,function(S){return S.name}),p=h.enter().append("div").attr("class","legend-item");p.merge(f.selectAll("div.legend-item")).classed("active",function(S,A){return S.status===St.items.status.ACTIVE});var d=b(this.getOptions(),"legend","clickable");f.classed("clickable",d&&s.length>1);var g=St.checkbox.radius,m=p.append("div").classed("checkbox",!0),y=m.merge(h.select("div.checkbox")).attr("role",nt.CHECKBOX).attr("tabindex",d?0:-1).attr("aria-labelledby",function(S,A){return e.services.domUtils.generateElementIDString("legend-datagroup-"+A+"-title")}).attr("aria-checked",function(S){var A=S.status;return A===St.items.status.ACTIVE}).attr("width",g*2).attr("height",g*2).attr("class",function(S,A){return e.model.getColorClassName({classNameTypes:[J.BACKGROUND],dataGroupName:S.name,originalClassName:"checkbox"})}).style("background",function(S){return S.status===St.items.status.ACTIVE?e.model.getFillColor(S.name)||e.model.getStrokeColor(S.name):null}).classed("active",function(S,A){return S.status===St.items.status.ACTIVE});m.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),p.append("p").merge(h.select("p"));var v=b(r,"legend","additionalItems");if(v&&s.length){var _=this,E=f.selectAll("div.additional-item").data(v);E.exit().remove();var x=E.enter().append("div").merge(E).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",function(S,A){return e.services.domUtils.generateElementIDString("legend-datagroup-"+(y.size()+A)+"-title")});x.selectAll("*").remove();var O,P=1;x.append("svg").classed("icon",!0).each(function(S,A){var I=B(this);!O||O!=S.type?(O=S.type,P=1):P++,_.addAdditionalItem(I,S,P)}),x.append("p").merge(x.select("p")),this.truncateLegendText()}h.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),d&&p.size()>1&&this.addEventListeners()},n.prototype.sortDataGroups=function(e,r){if(e.sort(function(o,s){return r.indexOf(o.name)-r.indexOf(s.name)}),r.length<e.length){var i=e.length-r.length,a=e.slice(i);return a.concat(e.slice(0,i))}return e},n.prototype.addAdditionalItem=function(e,r,i){var a=St.area,o=a.width,s=a.height;if(r.type===Ct.RADIUS?e.style("width",s+"px").style("height",s+"px"):e.style("width",o+"px").style("height",s+"px"),r.type===Ct.RADIUS){var l=St.radius,u=l.iconData,c=l.fill,f=l.stroke,h=e.attr("fill","none").selectAll("circle").data(u).enter();h.append("circle").classed("radius",!0).attr("role",nt.IMG).attr("aria-label","radius").attr("cx",function(E){return E.cx}).attr("cy",function(E){return E.cy}).attr("r",function(E){return E.r}).style("fill",r.fill?r.fill:c).style("stroke",r.stroke?r.stroke:f)}else if(r.type===Ct.LINE){var p=St.line;e.select("line.line").empty()&&e.append("line").classed("line-"+i,!0).attr("role",nt.IMG).attr("aria-label","line").attr("x1",0).attr("y1",p.yPosition).attr("x2",o).attr("y2",p.yPosition).style("stroke",r.stroke?r.stroke:p.stroke).style("stroke-width",p.strokeWidth)}else if(r.type===Ct.AREA)e.select("rect.area").empty()&&e.append("rect").classed("area-"+i,!0).attr("role",nt.IMG).attr("aria-label","area").attr("width",o).attr("height",s).style("fill",i>3&&!r.fill?St.area.fill:r.fill).style("stroke",r.stroke);else if(r.type===Ct.SIZE){var d=St.size,u=d.iconData,c=d.fill,f=d.stroke,g=e.attr("fill","none").attr("role",nt.IMG).attr("aria-label","size").selectAll("rect").data(u).enter();g.append("rect").classed("size",!0).attr("width",function(P){return P.width}).attr("height",function(P){return P.height}).attr("y",function(P){return 0}).style("fill",r.fill?r.fill:c).style("stroke",r.stroke?r.stroke:f).style("stroke-width",1)}else if(r.type===Ct.QUARTILE){var u=St.quartile.iconData,m=e.selectAll("rect").attr("role",nt.IMG).attr("aria-label","quartile").data(u).enter();m.append("rect").attr("class",function(x,O){return"quartile-"+(O===0?"wrapper":"line")}).attr("x",function(x){return x.x}).attr("y",function(x){return x.y}).attr("width",function(x){return x.width}).attr("height",function(x){return x.height})}else if(r.type===Ct.ZOOM){var y=b(gp,"legend","zoom"),u=y.iconData,v=y.color,_=e.attr("role",nt.IMG).attr("aria-label","zoom").selectAll("g.icon").data(u).enter();_.append("g").attr("x",function(x){return x.x}).attr("y",function(x){return x.y}).attr("width",function(x){return x.width}).attr("height",function(x){return x.height}).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",function(x){return r.color?r.color:v}),_.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",function(x){return r.color?r.color:v})}},n.prototype.truncateLegendText=function(){var e=this.getComponentContainer(),r=b(this.getOptions(),"legend","truncation"),i=b(r,"type"),a=b(r,"threshold"),o=b(r,"numCharacter"),s=e.selectAll("div.legend-item p");s.attr("id",function(l,u){var c=this.parentNode.querySelector("div.checkbox")||this.parentNode;return c.getAttribute("aria-labelledby")}),i!==le.NONE?s.html(function(l){return l.name.length>a?di(l.name,i,o):l.name}):s.html(function(l){return l.name})},n.prototype.addEventListeners=function(){var e=this,r=this.getComponentContainer(),i=this.getOptions(),a=b(i,"legend"),o=b(a,"truncation");r.selectAll("div.legend-item").on("mouseover",function(s){e.services.events.dispatchEvent(M.Legend.ITEM_HOVER,{hoveredElement:B(this)});var l=B(this);l.select("div.checkbox").classed("hovered",!0);var u=l.datum();u.name.length>o.threshold&&o.type!==le.NONE&&e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:s,hoveredElement:l,content:u.name})}).on("mousemove",function(s){var l=B(this).datum();l.name.length>o.threshold&&o.type!==le.NONE&&e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:s})}).on("click",function(){e.services.events.dispatchEvent(M.Legend.ITEM_CLICK,{clickedElement:B(this)});var s=B(this),l=s.datum();e.model.toggleDataLabel(l.name)}).on("mouseout",function(){var s=B(this);s.select("div.checkbox").classed("hovered",!1);var l=s.datum();l.name.length>o.threshold&&o.type!==le.NONE&&e.services.events.dispatchEvent(M.Tooltip.HIDE),e.services.events.dispatchEvent(M.Legend.ITEM_MOUSEOUT,{hoveredElement:s})}),r.selectAll("div.legend-item div.checkbox").on("keyup",function(s){s.key&&s.key==="Tab"&&e.services.events.dispatchEvent(M.Legend.ITEM_HOVER,{hoveredElement:B(this)})}),r.selectAll("div.legend-item div.checkbox").on("keydown",function(s,l){s.key&&s.key===" "?(s.preventDefault(),e.model.toggleDataLabel(l.name)):s.key&&s.key==="Tab"&&e.services.events.dispatchEvent(M.Legend.ITEM_MOUSEOUT,{hoveredElement:B(this)})}),r.selectAll("g.additional-item").on("mouseover",function(s){var l=B(this),u=l.datum();u.name.length>o.threshold&&e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:s,hoveredElement:l,content:u.name})})},n}(ct);function jC(t){return t}var na=1,ra=2,El=3,Vr=4,Vf=1e-6;function qC(t){return"translate("+t+",0)"}function YC(t){return"translate(0,"+t+")"}function XC(t){return n=>+t(n)}function ZC(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function KC(){return!this.__axis}function Lo(t,n){var e=[],r=null,i=null,a=6,o=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===na||t===Vr?-1:1,c=t===Vr||t===ra?"x":"y",f=t===na||t===El?qC:YC;function h(p){var d=r??(n.ticks?n.ticks.apply(n,e):n.domain()),g=i??(n.tickFormat?n.tickFormat.apply(n,e):jC),m=Math.max(a,0)+s,y=n.range(),v=+y[0]+l,_=+y[y.length-1]+l,E=(n.bandwidth?ZC:XC)(n.copy(),l),x=p.selection?p.selection():p,O=x.selectAll(".domain").data([null]),P=x.selectAll(".tick").data(d,n).order(),S=P.exit(),A=P.enter().append("g").attr("class","tick"),I=P.select("line"),w=P.select("text");O=O.merge(O.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),P=P.merge(A),I=I.merge(A.append("line").attr("stroke","currentColor").attr(c+"2",u*a)),w=w.merge(A.append("text").attr("fill","currentColor").attr(c,u*m).attr("dy",t===na?"0em":t===El?"0.71em":"0.32em")),p!==x&&(O=O.transition(p),P=P.transition(p),I=I.transition(p),w=w.transition(p),S=S.transition(p).attr("opacity",Vf).attr("transform",function(N){return isFinite(N=E(N))?f(N+l):this.getAttribute("transform")}),A.attr("opacity",Vf).attr("transform",function(N){var T=this.parentNode.__axis;return f((T&&isFinite(T=T(N))?T:E(N))+l)})),S.remove(),O.attr("d",t===Vr||t===ra?o?"M"+u*o+","+v+"H"+l+"V"+_+"H"+u*o:"M"+l+","+v+"V"+_:o?"M"+v+","+u*o+"V"+l+"H"+_+"V"+u*o:"M"+v+","+l+"H"+_),P.attr("opacity",1).attr("transform",function(N){return f(E(N)+l)}),I.attr(c+"2",u*a),w.attr(c,u*m).text(g),x.filter(KC).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ra?"start":t===Vr?"end":"middle"),x.each(function(){this.__axis=E})}return h.scale=function(p){return arguments.length?(n=p,h):n},h.ticks=function(){return e=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(e=p==null?[]:Array.from(p),h):e.slice()},h.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),h):r&&r.slice()},h.tickFormat=function(p){return arguments.length?(i=p,h):i},h.tickSize=function(p){return arguments.length?(a=o=+p,h):a},h.tickSizeInner=function(p){return arguments.length?(a=+p,h):a},h.tickSizeOuter=function(p){return arguments.length?(o=+p,h):o},h.tickPadding=function(p){return arguments.length?(s=+p,h):s},h.offset=function(p){return arguments.length?(l=+p,h):l},h}function QC(t){return Lo(na,t)}function JC(t){return Lo(ra,t)}function Hu(t){return Lo(El,t)}function pv(t){return Lo(Vr,t)}var tD=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),eD=function(t){tD(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="color-legend",e.renderType=Q.SVG,e.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),e.handleAxisCompleteEvent=function(r){var i=e.getComponentContainer(),a=U.getSVGElementSize(i,{useAttrs:!0}).width,o=b(e.getOptions(),"data","loading");if(a>St.color.barWidth&&!o){var s=b(e.getOptions(),"heatmap","colorLegend","title"),l=e.services.cartesianScales,u=l.getMainXScale(),c=u.range();if(c[0]>1&&(i.select("g.legend").attr("transform","translate("+c[0]+", 0)"),s)){var f=U.getSVGElementSize(i.select("g.legend-title").select("text"),{useBBox:!0}).width,h=c[0]-f-9;h>1?i.select("g.legend-title").attr("transform","translate("+h+", 0)"):(i.select("g.legend").attr("transform","translate("+c[0]+", 16)"),i.select("g.legend-title").attr("transform","translate("+c[0]+", 0)"))}}else i.select("g.legend-title").attr("transform","translate(0, 0)")},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)},n.prototype.render=function(e){var r=this.getOptions(),i=this.getComponentContainer(),a=U.getSVGElementSize(i,{useAttrs:!0}).width,o=b(r,"color","gradient","colors"),s=b(r,"heatmap","colorLegend","type"),l=b(r,"color","pairing","option"),u=b(r,"heatmap","colorLegend","title"),c=b(this.getOptions(),"data","loading");if(c){i.html("");return}var f=!_n(o),h=this.model.getValueDomain(),p=!(a<=St.color.barWidth),d=p?St.color.barWidth:a,g=U.appendOrSelect(i,"g.legend"),m=U.appendOrSelect(g,"g.legend-axis");if(u){var y=U.appendOrSelect(i,"g.legend-title"),v=U.appendOrSelect(y,"text");v.text(u).attr("dy","0.7em"),g.attr("transform","translate(0, 16)")}var _=h[0]<0&&h[1]>0?"diverge":"mono";(l<1&&l>4&&_==="mono"||l<1&&l>2&&_==="diverge")&&(l=1);var E=[],x=_==="diverge"?17:11;if(f)E=o;else for(var O=1;O<x+1;O++)E.push(s===Jr.LINEAR?"stop-color-"+_+"-"+l+"-"+O:"fill-"+_+"-"+l+"-"+O);var P=te(h[0],h[1]),S=aE(P,3),A=Ce().domain(h).range([0,d]),I=Hu(A).tickSize(0).tickValues(S);switch(s){case Jr.LINEAR:this.drawLinear(E,g,d);break;case Jr.QUANTIZE:var w=this.drawQuantize(E,_,f,g,d);A.range([w,d]);break;default:throw Error("Entered color legend type is not supported.")}m.attr("transform","translate(0,"+St.color.axisYTranslation+")").call(I),m.select(".domain").remove(),m.select("g.tick:last-of-type text").style("text-anchor",p?"middle":"end"),m.select("g.tick:first-of-type text").style("text-anchor",p?"middle":"start")},n.prototype.drawLinear=function(e,r,i){var a=100/(e.length-1),o=U.appendOrSelect(r,"linearGradient");o.attr("id",this.gradient_id+"-legend").selectAll("stop").data(e).enter().append("stop").attr("offset",function(l,u){return u*a+"%"}).attr("class",function(l,u){return e[u]}).attr("stop-color",function(l){return l});var s=U.appendOrSelect(r,"rect");s.attr("width",i).attr("height",St.color.barHeight).style("fill","url(#"+this.gradient_id+"-legend)")},n.prototype.drawQuantize=function(e,r,i,a,o){!i&&r==="diverge"&&e.splice(e.length/2,1);var s=Ri().domain(e).range([0,o]),l=U.appendOrSelect(a,"g.quantized-rect");return l.selectAll("rect").data(s.domain()).join("rect").attr("x",function(u){return s(u)}).attr("y",0).attr("width",Math.max(0,s.bandwidth()-1)).attr("height",St.color.barHeight).attr("class",function(u){return u}).attr("fill",function(u){return u}),(!i&&r)==="mono"?s.bandwidth()-1:0},n.prototype.destroy=function(){var e=this.services.events;e.removeEventListener(M.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)},n}(Vu),nD={prefix:"bx",selectorTabbable:`
    a[href], area[href], input:not([disabled]):not([tabindex='-1']),
    button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),
    textarea:not([disabled]):not([tabindex='-1']),
    iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]
  `,selectorFocusable:`
    a[href], area[href], input:not([disabled]),
    button:not([disabled]),select:not([disabled]),
    textarea:not([disabled]),
    iframe, object, embed, *[tabindex], *[contenteditable=true]
  `},rs=nD;function Hf(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rD(t,n,e){return n&&Hf(t.prototype,n),e&&Hf(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iD(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function aD(t){return uD(t)||lD(t)||sD(t)||oD()}function oD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sD(t,n){if(t){if(typeof t=="string")return Sl(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Sl(t,n)}}function lD(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uD(t){if(Array.isArray(t))return Sl(t)}function Sl(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function vv(t){return t.reduce(function(n,e){return Array.isArray(e)?n.push.apply(n,aD(vv(e))):n.push(e),n},[])}function cD(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return vv(n).reduce(function(r,i){return i(r)},function(){function r(){iD(this,r)}return rD(r)}())}function Ml(t){return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ml(t)}function fD(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Ff(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hD(t,n,e){return n&&Ff(t.prototype,n),e&&Ff(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dD(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Al(t,n)}function Al(t,n){return Al=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Al(t,n)}function pD(t){var n=gD();return function(){var r=Ka(t),i;if(n){var a=Ka(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return vD(this,i)}}function vD(t,n){if(n&&(Ml(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gv(t)}function gv(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ka(t){return Ka=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ka(t)}function mD(t){var n=function(e){dD(i,e);var r=pD(i);function i(a){var o,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(fD(this,i),o=r.call(this,a,s),o.children=[],!a||a.nodeType!==Node.ELEMENT_NODE)throw new TypeError("DOM element should be given to initialize this widget.");return o.element=a,o.options=Object.assign(Object.create(o.constructor.options),s),o.constructor.components.set(o.element,gv(o)),o}return hD(i,[{key:"release",value:function(){for(var o=this.children.pop();o;o=this.children.pop())o.release();return this.constructor.components.delete(this.element),null}}],[{key:"create",value:function(o,s){return this.components.get(o)||new this(o,s)}}]),i}(t);return n}function Cl(t){return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Cl(t)}function yD(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Gf(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _D(t,n,e){return n&&Gf(t.prototype,n),e&&Gf(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ia(){return typeof Reflect<"u"&&Reflect.get?ia=Reflect.get:ia=function(n,e,r){var i=xD(n,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?n:r):a.value}},ia.apply(this,arguments)}function xD(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&(t=Sr(t),t!==null););return t}function bD(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Dl(t,n)}function Dl(t,n){return Dl=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Dl(t,n)}function OD(t){var n=ED();return function(){var r=Sr(t),i;if(n){var a=Sr(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return TD(this,i)}}function TD(t,n){if(n&&(Cl(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wD(t)}function wD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ED(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sr(t){return Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Sr(t)}function SD(t){var n=function(e){bD(i,e);var r=OD(i);function i(){var a;yD(this,i);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=r.call.apply(r,[this].concat(s)),a.handles=new Set,a}return _D(i,[{key:"manage",value:function(o){return this.handles.add(o),o}},{key:"unmanage",value:function(o){return this.handles.delete(o),o}},{key:"release",value:function(){var o=this;return this.handles.forEach(function(s){s.release(),o.handles.delete(s)}),ia(Sr(i.prototype),"release",this).call(this)}}]),i}(t);return n}function Hr(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return t.addEventListener.apply(t,e),{release:function(){return t.removeEventListener.apply(t,e),null}}}function Ll(t){return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ll(t)}function MD(t){return LD(t)||DD(t)||CD(t)||AD()}function AD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CD(t,n){if(t){if(typeof t=="string")return Pl(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Pl(t,n)}}function DD(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LD(t){if(Array.isArray(t))return Pl(t)}function Pl(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function PD(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function zf(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function RD(t,n,e){return n&&zf(t.prototype,n),e&&zf(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ID(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Rl(t,n)}function Rl(t,n){return Rl=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Rl(t,n)}function kD(t){var n=UD();return function(){var r=Qa(t),i;if(n){var a=Qa(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return ND(this,i)}}function ND(t,n){if(n&&(Ll(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BD(t)}function BD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qa(t){return Qa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qa(t)}function $D(t){var n=function(e){ID(i,e);var r=kD(i);function i(){return PD(this,i),r.apply(this,arguments)}return RD(i,[{key:"_changeState",value:function(){throw new Error("_changeState() should be overridden to perform actual change in state.")}},{key:"changeState",value:function(){for(var o=this,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var c=typeof l[0]=="string"?l.shift():void 0,f=Object(l[0])===l[0]&&typeof l[0]!="function"?l.shift():void 0,h=typeof l[0]=="function"?l.shift():void 0;if(typeof this.shouldStateBeChanged=="function"&&!this.shouldStateBeChanged(c,f)){h&&h(null,!0);return}var p={group:f&&f.group,state:c},d=[p.group,c].filter(Boolean).join("-").split("-").map(function(E){return E[0].toUpperCase()+E.substr(1)}).join(""),g=new CustomEvent(this.options["eventBefore".concat(d)],{bubbles:!0,cancelable:!0,detail:f}),m=f&&f.delegatorNode||this.element,y=!m.dispatchEvent(g);if(y){if(h){var v=new Error("Changing state (".concat(JSON.stringify(p),") has been canceled."));v.canceled=!0,h(v)}}else{var _=[c,f].filter(Boolean);this._changeState.apply(this,MD(_).concat([function(){m.dispatchEvent(new CustomEvent(o.options["eventAfter".concat(d)],{bubbles:!0,cancelable:!0,detail:f})),h&&h()}]))}}}]),i}(t);return n}function Il(t,n){var e=t.target,r=t.currentTarget;if(typeof e.matches=="function"){if(e.matches(n))return e;if(e.matches("".concat(n," *"))){var i=e.closest(n);if((r.nodeType===Node.DOCUMENT_NODE?r.documentElement:r).contains(i))return i}}}function Wf(t){if(!t||typeof t=="function")return{launchingElement:null,launchingEvent:null};var n=t.delegateTarget||t.currentTarget||t,e=t.currentTarget&&t;if(n&&!n.nodeType)throw new TypeError("DOM Node should be given for launching element.");if(e&&!e.type)throw new TypeError("DOM event should be given for launching event.");return{launchingElement:n,launchingEvent:e}}function kl(t){return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},kl(t)}function VD(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function jf(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function HD(t,n,e){return n&&jf(t.prototype,n),e&&jf(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FD(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Nl(t,n)}function Nl(t,n){return Nl=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Nl(t,n)}function GD(t){var n=jD();return function(){var r=Ja(t),i;if(n){var a=Ja(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return zD(this,i)}}function zD(t,n){if(n&&(kl(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WD(t)}function WD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ja(t){return Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ja(t)}function qD(t){var n=function(e){FD(i,e);var r=GD(i);function i(){return VD(this,i),r.apply(this,arguments)}return HD(i,[{key:"show",value:function(o,s){(!o||typeof o=="function")&&(s=o),this.changeState("shown",Wf(o),s)}},{key:"hide",value:function(o,s){(!o||typeof o=="function")&&(s=o),this.changeState("hidden",Wf(o),s)}}]),i}(t);return n}var YD=[$D,qD];const XD=YD;function Bl(t){return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bl(t)}function ZD(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function qf(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function KD(t,n,e){return n&&qf(t.prototype,n),e&&qf(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function QD(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Ul(t,n)}function Ul(t,n){return Ul=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ul(t,n)}function JD(t){var n=n2();return function(){var r=to(t),i;if(n){var a=to(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return t2(this,i)}}function t2(t,n){if(n&&(Bl(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e2(t)}function e2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function to(t){return to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},to(t)}function r2(t){var n=function(e){QD(i,e);var r=JD(i);function i(){return ZD(this,i),r.apply(this,arguments)}return KD(i,null,[{key:"init",value:function(){var o=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=Object.assign(Object.create(this.options),l);if(!s||s.nodeType!==Node.ELEMENT_NODE&&s.nodeType!==Node.DOCUMENT_NODE)throw new TypeError("DOM document or DOM element should be given to search for and initialize this widget.");if(s.nodeType===Node.ELEMENT_NODE&&s.matches(u.selectorInit))this.create(s,l);else{var c=u.initEventNames.map(function(f){return Hr(s,f,function(h){var p=Il(h,"[".concat(u.attribInitTarget,"]"));if(p){h.delegateTarget=p;var d=p.ownerDocument.querySelectorAll(p.getAttribute(u.attribInitTarget));if(d.length>1)throw new Error("Target widget must be unique.");if(d.length===1){p.tagName==="A"&&h.preventDefault();var g=o.create(d[0],l);typeof g.createdByLauncher=="function"&&g.createdByLauncher(h)}}})});return{release:function(){for(var h=c.pop();h;h=c.pop())h.release()}}}return""}}]),i.forLazyInit=!0,i}(t);return n}function $l(t){return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$l(t)}function i2(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Yf(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a2(t,n,e){return n&&Yf(t.prototype,n),e&&Yf(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function o2(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Vl(t,n)}function Vl(t,n){return Vl=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Vl(t,n)}function s2(t){var n=c2();return function(){var r=eo(t),i;if(n){var a=eo(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return l2(this,i)}}function l2(t,n){if(n&&($l(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u2(t)}function u2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function eo(t){return eo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},eo(t)}var f2=function(t){o2(e,t);var n=s2(e);function e(r,i){var a;return i2(this,e),a=n.call(this,r,i),a._handleFocusinListener=void 0,a._handleKeydownListener=void 0,a._handleFocusin=function(o){var s=a.element.querySelector(a.options.selectorModalContainer)||a.element;a.element.classList.contains(a.options.classVisible)&&!s.contains(o.target)&&a.options.selectorsFloatingMenus.every(function(l){return!Il(o,l)})&&a.element.querySelector(rs.selectorTabbable).focus()},a._hookCloseActions(),a}return a2(e,[{key:"createdByLauncher",value:function(i){this.show(i)}},{key:"shouldStateBeChanged",value:function(i){return i==="shown"?!this.element.classList.contains(this.options.classVisible):this.element.classList.contains(this.options.classVisible)}},{key:"_changeState",value:function(i,a,o){var s=this,l,u=function(){if(l&&(l=s.unmanage(l).release()),i==="shown"&&s.element.offsetWidth>0&&s.element.offsetHeight>0){s.previouslyFocusedNode=s.element.ownerDocument.activeElement;var p=s.element.querySelector(s.options.selectorPrimaryFocus)||s.element.querySelector(rs.selectorTabbable);p.focus()}o()};if(this._handleFocusinListener&&(this._handleFocusinListener=this.unmanage(this._handleFocusinListener).release()),i==="shown"){var c="onfocusin"in this.element.ownerDocument.defaultView,f=c?"focusin":"focus";this._handleFocusinListener=this.manage(Hr(this.element.ownerDocument,f,this._handleFocusin,!c))}i==="hidden"?(this.element.classList.toggle(this.options.classVisible,!1),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!1),(this.options.selectorFocusOnClose||this.previouslyFocusedNode)&&(this.element.ownerDocument.querySelector(this.options.selectorFocusOnClose)||this.previouslyFocusedNode).focus()):i==="shown"&&(this.element.classList.toggle(this.options.classVisible,!0),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!0)),l=this.manage(Hr(this.element,"transitionend",u))}},{key:"_hookCloseActions",value:function(){var i=this;this.manage(Hr(this.element,"click",function(a){var o=Il(a,i.options.selectorModalClose);o&&(a.delegateTarget=o),(o||a.target===i.element)&&i.hide(a)})),this._handleKeydownListener&&(this._handleKeydownListener=this.unmanage(this._handleKeydownListener).release()),this._handleKeydownListener=this.manage(Hr(this.element.ownerDocument.body,"keydown",function(a){a.which===27&&i.shouldStateBeChanged("hidden")&&(a.stopPropagation(),i.hide(a))}))}}],[{key:"options",get:function(){var i=rs.prefix;return{selectorInit:"[data-modal]",selectorModalClose:"[data-modal-close]",selectorPrimaryFocus:"[data-modal-primary-focus]",selectorsFloatingMenus:[".".concat(i,"--overflow-menu-options"),".".concat(i,"--tooltip"),".flatpickr-calendar"],selectorModalContainer:".".concat(i,"--modal-container"),classVisible:"is-visible",classBody:"".concat(i,"--body--with-modal-open"),attribInitTarget:"data-modal-target",initEventNames:["click"],eventBeforeShown:"modal-beingshown",eventAfterShown:"modal-shown",eventBeforeHidden:"modal-beinghidden",eventAfterHidden:"modal-hidden"}}}]),e.components=new WeakMap,e}(cD(mD,r2,XD,SD));const h2=f2;var d2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fu=function(t){d2(n,t);function n(e,r,i){var a=t.call(this,e,r,i)||this;return a.type="modal",a.isEventListenerAdded=!1,a.handleShowModal=function(){a.modal.html(a.getModalHTML()),a.modal.select("div.cds--modal-footer button.cds--btn").on("click",function(){return a.model.exportToCSV()});var o=h2.create(a.modal.node());o.show()},a.init(),a}return n.prototype.addEventListeners=function(){this.services.events.addEventListener(M.Modal.SHOW,this.handleShowModal)},n.prototype.removeEventListeners=function(){this.services.events.removeEventListener(M.Modal.SHOW,this.handleShowModal)},n.prototype.getModalHTML=function(){var e=this.model.getOptions(),r=b(e,"style","prefix"),i=this.model.getTabularDataArray();return`
		<div class="cds--modal-container cds--modal-container">
			<div class="cds--modal-header cds--modal-header">
				<p class="cds--modal-header__label cds--type-delta cds--modal-header__label cds--type-delta" id="modal-title">Tabular representation</p>

				<p class="cds--modal-header__heading cds--type-beta cds--modal-header__heading cds--type-beta" id="modal-description">`+e.title+`</p>

				<button class="cds--modal-close cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>
					<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon cds--modal-close__icon">
						<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>
					</svg>
				</button>
			</div>

			<div class="cds--modal-content cds--modal-content">
				<table class="cds--data-table cds--data-table--no-border cds--data-table cds--data-table--no-border">
					<thead>
						<tr>
							`+bt(i,0).map(function(a){return`<th scope="col">
								<div class="cds--table-header-label cds--table-header-label">`+a+`</div>
							</th>`}).join("")+`
						</tr>
					</thead>

					<tbody>`+i.slice(1).map(function(a){return`
							<tr>
								`+a.map(function(o){return"<td>"+o+"</td>"}).join("")+`
							</tr>`}).join("")+`
					</tbody>
				</table>
			</div>

			<div class="cds--modal-footer cds--modal-footer">
			  <div class="`+Wt+"--"+r+`-modal-footer-spacer"></div>
			  <button class="cds--btn cds--btn--primary cds--btn cds--btn--primary" type="button" data-modal-primary-focus>Download as CSV</button>
			</div>
		</div>`},n.prototype.render=function(){var e=this.model.getOptions();if(!this.isEventListenerAdded){var r=B(this.services.domUtils.getHolder()),i=b(e,"style","prefix");this.modal=U.appendOrSelect(r,"div."+Wt+"--"+i+"--modal"),this.addEventListeners(),this.isEventListenerAdded=!0,this.modal.attr("data-modal",!0).attr("class","cds--modal cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby","modal-title").attr("aria-describedby","modal-description").attr("tabindex",-1)}},n.prototype.destroy=function(){this.removeEventListeners(),this.isEventListenerAdded=!1},n}(ct),Gn,Bt;(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(Bt||(Bt={}));var Xf=(Gn={},Gn[Bt.LEFT]=function(t,n,e){return{top:t.top-Math.round(n.offsetHeight/2)+Math.round(e.height/2),left:Math.round(t.left-n.offsetWidth)}},Gn[Bt.RIGHT]=function(t,n,e){return{top:t.top-Math.round(n.offsetHeight/2)+Math.round(e.height/2),left:Math.round(t.left+e.width)}},Gn[Bt.TOP]=function(t,n,e){return{top:Math.round(t.top-n.offsetHeight),left:t.left-Math.round(n.offsetWidth/2)+Math.round(e.width/2)}},Gn[Bt.BOTTOM]=function(t,n,e){return{top:Math.round(t.top+e.height),left:t.left-Math.round(n.offsetWidth/2)+Math.round(e.width/2)}},Gn),Zf=typeof window<"u"?window:{innerHeight:0,scrollY:0,innerWidth:0,scrollX:0},Po=function(){function t(n){n===void 0&&(n={}),this.positions=Xf,this.positions=Object.assign({},Xf,n)}return t.prototype.getRelativeOffset=function(n){for(var e={left:n.offsetLeft,top:n.offsetTop};n.offsetParent&&getComputedStyle(n.offsetParent).position==="static";)e.left+=n.offsetLeft,e.top+=n.offsetTop,n=n.offsetParent;return e},t.prototype.getAbsoluteOffset=function(n){for(var e=n,r={top:0,left:0};e.offsetParent;){var i=getComputedStyle(e.offsetParent);i.position==="static"&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(r.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(r.left+=parseInt(i.marginLeft,10))),e=e.offsetParent}var a=n.getBoundingClientRect(),o=document.body.getBoundingClientRect();return{top:a.top-o.top+r.top,left:a.left-o.left+r.left}},t.prototype.findRelative=function(n,e,r){var i=this.getRelativeOffset(n),a=n.getBoundingClientRect();return this.calculatePosition(i,a,e,r)},t.prototype.findAbsolute=function(n,e,r){var i=this.getAbsoluteOffset(n),a=n.getBoundingClientRect();return this.calculatePosition(i,a,e,r)},t.prototype.findPosition=function(n,e,r,i){i===void 0&&(i=this.getAbsoluteOffset.bind(this));var a=i(n),o=n.getBoundingClientRect();return this.calculatePosition(a,o,e,r)},t.prototype.findPositionAt=function(n,e,r){return this.calculatePosition(n,{top:0,left:0,height:0,width:0},e,r)},t.prototype.getPlacementBox=function(n,e){var r=n.offsetHeight+e.top,i=n.offsetWidth+e.left;return{top:e.top,bottom:r,left:e.left,right:i}},t.prototype.addOffset=function(n,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Object.assign({},n,{top:n.top+e,left:n.left+r})},t.prototype.setElement=function(n,e){n.style.top=e.top+"px",n.style.left=e.left+"px"},t.prototype.findBestPlacement=function(n,e,r,i,a){var o=this;i===void 0&&(i=this.defaultContainerFunction.bind(this)),a===void 0&&(a=this.findPosition.bind(this));var s=r.map(function(l){var u=a(n,e,l),c=o.getPlacementBox(e,u),f=0,h=0,p=i();c.top<p.top?f=p.top-c.top:c.bottom>p.height&&(f=c.bottom-p.height),c.left<p.left?h=p.left-c.left:c.right>p.width&&(h=c.right-p.width),f&&!h?h=1:h&&!f&&(f=1);var d=e.offsetHeight*e.offsetWidth,g=f*h,m=d-g,y=m/d;return{placement:l,weight:y}});return s.sort(function(l,u){return u.weight-l.weight}),s[0].placement},t.prototype.findBestPlacementAt=function(n,e,r,i){var a=this;i===void 0&&(i=this.defaultContainerFunction.bind(this));var o=function(s,l,u){return a.findPositionAt(n,l,u)};return this.findBestPlacement(null,e,r,i,o)},t.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:Zf.innerHeight,width:Zf.innerWidth}},t.prototype.calculatePosition=function(n,e,r,i){return this.positions[i]?this.positions[i](n,r,e):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t}();new Po;var p2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),v2=function(t){p2(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.type="threshold",i.renderType=Q.SVG,i.positionService=new Po,i}return n.prototype.render=function(e){var r=this;e===void 0&&(e=!1);var i=b(this.getOptions(),"axes"),a=[];Object.keys(i).forEach(function(d){var g,m;if(Object.values(W).includes(d)){var y=i[d];y.thresholds&&y.thresholds.length>0&&a.push({axisPosition:d,thresholds:y.thresholds,correspondingDatasets:(g=y)===null||g===void 0?void 0:g.correspondingDatasets,mapsTo:(m=y)===null||m===void 0?void 0:m.mapsTo})}});var o=this.getComponentContainer({withinChartClip:!0}),s=o.selectAll("g.axis-thresholds").data(a,function(d){return d.axisPosition});s.exit().attr("opacity",0).remove();var l=s.enter().append("g"),u=l.merge(s);u.attr("class",function(d){return"axis-thresholds "+d.axisPosition});var c=u.selectAll("g.threshold-group").data(function(d){return d.thresholds.map(function(g){return g.axisPosition=d.axisPosition,g.datum=r.constructDatumObj(d,g),g})});c.exit().attr("opacity",0).remove();var f=c.enter().append("g");f.append("line").attr("class","threshold-line"),f.append("rect").attr("class","threshold-hoverable-area");var h=f.merge(c);h.attr("class","threshold-group");var p=this;u.each(function(d){var g=d.axisPosition,m=p.services.cartesianScales.getScaleByPosition(g),y=p.services.cartesianScales.getScaleTypeByPosition(g),v=null,_=null;g===W.LEFT||g===W.RIGHT?(_=m,v=p.services.cartesianScales.getMainXScale()):(v=m,_=p.services.cartesianScales.getMainYScale());var E=y===K.LABELS,x=v.range(),O=x[0],P=x[1],S=_.range(),A=S[0],I=S[1],w=p.services.cartesianScales,N=w.getOrientation(),T=function(L){return w.getDomainValue(L)},R=function(L){return w.getRangeValue(L)},C=He(T,R,N),D=C[0],k=C[1],$=B(this);g===W.TOP||g===W.BOTTOM?($.selectAll("line.threshold-line").transition().call(function(L){return p.services.transitions.setupTransition({transition:L,name:"threshold-line-update",animate:e})}).attr("y1",I).attr("y2",A).attr("x1",function(L){var V=L.datum;return D(V)+(E?m.step()/2:0)}).attr("x2",function(L){var V=L.datum;return D(V)+(E?m.step()/2:0)}).style("stroke",function(L){var V=L.fillColor;return V}),$.selectAll("rect.threshold-hoverable-area").attr("x",0).attr("y",function(L){var V=L.datum;return-D(V)}).attr("width",Math.abs(A-I)).classed("rotate",!0)):($.selectAll("line.threshold-line").transition().call(function(L){return p.services.transitions.setupTransition({transition:L,name:"threshold-line-update",animate:e})}).attr("x1",O).attr("x2",P).attr("y1",function(L){var V=L.datum;return k(V)+(E?m.step()/2:0)}).attr("y2",function(L){var V=L.datum;return k(V)+(E?m.step()/2:0)}).style("stroke",function(L){var V=L.fillColor;return V}),$.selectAll("rect.threshold-hoverable-area").attr("x",O).attr("y",function(L){var V=L.datum;return k(V)}).attr("width",Math.abs(P-O)).classed("rotate",!1))}),this.services.events.addEventListener(M.Threshold.SHOW,function(d){r.setThresholdLabelPosition(d.detail),r.label.classed("hidden",!1)}),this.services.events.addEventListener(M.Threshold.HIDE,function(d){r.label.classed("hidden",!0)}),this.appendThresholdLabel(),this.addEventListeners()},n.prototype.getFormattedValue=function(e){var r=e.value,i=e.axisPosition,a=this.getOptions(),o=this.services.cartesianScales.getScaleTypeByPosition(i);if(o===K.TIME){var s=[W.LEFT,W.RIGHT].includes(i),l=this.services.cartesianScales.getMainXScale(),u=this.services.cartesianScales.getMainYScale(),c=s?u:l,f=b(a,"timeScale"),h=Ol(c.ticks());return bl(r,0,c.ticks(),h,f)}return r.toLocaleString("en")},n.prototype.appendThresholdLabel=function(){var e=B(this.services.domUtils.getHolder()),r=b(this.getOptions(),"style","prefix");this.label=U.appendOrSelect(e,"div."+Wt+"--"+r+"--threshold--label").classed("hidden",!0)},n.prototype.setThresholdLabelPosition=function(e){var r=e.event,i=e.datum,a=this.services.domUtils.getHolder(),o=Sn(r,a),s=i.valueFormatter?i.valueFormatter(i.value):this.getFormattedValue(i);this.label.html((i.label||"Threshold")+": "+s).style("background-color",i.fillColor);var l=this.label.node(),u=this.positionService.findBestPlacementAt({left:o[0],top:o[1]},l,[Bt.RIGHT,Bt.LEFT,Bt.TOP,Bt.BOTTOM],function(){return{top:void 0,left:void 0,width:a.offsetWidth,height:a.offsetHeight}}),c=this.positionService.findPositionAt({left:o[0],top:o[1]},l,u);this.positionService.setElement(l,c)},n.prototype.constructDatumObj=function(e,r){var i={};return e.correspondingDatasets&&(i.group=b(e,"correspondingDatasets",0)),i[e.mapsTo]=r.value,i},n.prototype.addEventListeners=function(){var e=this,r=this.getComponentContainer({withinChartClip:!0});r.selectAll("rect.threshold-hoverable-area").on("mouseover mousemove",function(i){B(this.parentNode).select("line.threshold-line").classed("active",!0),e.services.events.dispatchEvent(M.Threshold.SHOW,{event:i,hoveredElement:B(this),datum:B(this).datum()})}).on("mouseout",function(i){B(this.parentNode).select("line.threshold-line").classed("active",!1),e.services.events.dispatchEvent(M.Threshold.HIDE,{event:i,hoveredElement:B(this),datum:B(this).datum()})})},n}(ct),g2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ro=function(t){g2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="title",e.renderType=Q.HTML,e}return n.prototype.render=function(){var e=this.getComponentContainer(),r=b(this.getOptions(),"title"),i=e.selectAll("p.title").data([r]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(function(o){return o}),i.node()&&i.node().offsetWidth<i.node().scrollWidth){var a=this;i.on("mouseover",function(o){a.services.events.dispatchEvent(M.Tooltip.SHOW,{event:o,hoveredElement:i,content:i.text()})}).on("mousemove",function(o){a.services.events.dispatchEvent(M.Tooltip.MOVE,{event:o})}).on("mouseout",function(){a.services.events.dispatchEvent(M.Tooltip.HIDE)})}i.exit().remove()},n.prototype.truncateTitle=function(e,r){if(!(r<=0)){var i=e.text();if(e.node().getComputedTextLength()>r){e.append("tspan").text("...");var a=U.appendOrSelect(e,"tspan").node().getComputedTextLength(),o=e.text(),s=this.getSubstringIndex(e.node(),0,o.length-1,r-a);e.html(o.substring(0,s-1)).append("tspan").text("...");var l=this;e.on("mouseover",function(u){l.services.events.dispatchEvent(M.Tooltip.SHOW,{event:u,hoveredElement:e,content:i})}).on("mousemove",function(u){l.services.events.dispatchEvent(M.Tooltip.MOVE,{event:u})}).on("mouseout",function(){l.services.events.dispatchEvent(M.Tooltip.HIDE)})}}},n.prototype.getMaxTitleWidth=function(){return U.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width},n.prototype.getSubstringIndex=function(e,r,i,a){var o=Math.floor((i+r)/2);return e.getSubStringLength(0,o)>a?this.getSubstringIndex(e,r,o,a):e.getSubStringLength(0,o)<a?e.getSubStringLength(0,o+1)>a?o:this.getSubstringIndex(e,o,i,a):o},n}(ct),m2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),y2=function(t){m2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="meter-title",e.renderType=Q.SVG,e}return n.prototype.render=function(){var e=b(this.model.getDisplayData(),0),r=this.getOptions(),i=this.getComponentContainer(),a=r.data.groupMapsTo,o=b(r,"meter","proportional");if(o)this.displayTotal(),this.displayBreakdownTitle();else{var s=i.selectAll("text.meter-title").data([e[a]]);s.enter().append("text").classed("meter-title",!0).merge(s).attr("x",0).attr("y","1em").text(function(c){return c}),s.exit().remove(),this.appendPercentage()}this.displayStatus();var l=this.getMaxTitleWidth(),u=U.appendOrSelect(i,"text.meter-title");l>0&&u.node().getComputedTextLength()>l&&this.truncateTitle(u,l)},n.prototype.displayBreakdownTitle=function(){var e=this.getComponentContainer(),r=this.getOptions(),i=this.model.getMaximumDomain(this.model.getDisplayData()),a=b(r,"meter","proportional","total"),o=b(r,"meter","proportional","unit")?b(r,"meter","proportional","unit"):"",s;if(i===a)s=null;else{var l=a!==null?a-i:i,u=b(r,"meter","proportional","breakdownFormatter");s=u!==null?u({datasetsTotal:i,total:a}):i+" "+o+" used ("+l+" "+o+" available)"}var c=e.selectAll("text.proportional-meter-title").data([s]);c.enter().append("text").classed("proportional-meter-title",!0).merge(c).attr("x",0).attr("y","1em").text(function(p){return p}),c.exit().remove();var f=this.getMaxTitleWidth(),h=U.appendOrSelect(e,"text.proportional-meter-title");f>0&&h.node().getComputedTextLength()>f&&this.truncateTitle(h,f)},n.prototype.displayTotal=function(){var e=this.getComponentContainer(),r=this.getOptions(),i=b(r,"meter","proportional","total"),a=i?b(r,"meter","proportional","total"):this.model.getMaximumDomain(this.model.getDisplayData()),o=b(r,"meter","proportional","unit")?b(r,"meter","proportional","unit"):"",s=b(r,"meter","proportional","totalFormatter"),l=s!==null?s(a):i+" "+o+" total",u=U.getHTMLElementSize(this.services.domUtils.getMainContainer()),c=u.width?u.width:this.parent.node().getAttribute("width"),f=e.selectAll("text.proportional-meter-total").data([l]);f.enter().append("text").classed("proportional-meter-total",!0).merge(f).attr("x",this.model.getStatus()?c-kt.total.paddingRight:c).attr("y","1em").attr("text-anchor","end").text(function(h){return h}),f.exit().remove()},n.prototype.displayStatus=function(){var e=this,r=this.getComponentContainer(),i=U.getHTMLElementSize(this.services.domUtils.getMainContainer()),a=i.width?i.width:0,o=this.model.getStatus(),s=kt.status.indicatorSize/2,l=U.appendOrSelect(r,"g.status-indicator").attr("class",o!==null?"status-indicator status--"+o:"").attr("transform","translate("+(a-s)+", 0)"),u=o?[o]:[],c=l.selectAll("circle.status").data(u);c.enter().append("circle").merge(c).attr("class","status").attr("r",s).attr("cx",0).attr("cy","calc(1em / 2)");var f=l.selectAll("path.innerFill").data(u);f.enter().append("path").merge(f).attr("d",e.getStatusIconPathString(o)).attr("transform","translate(-"+s+", 0)").attr("class","innerFill"),f.exit().remove(),c.exit().remove()},n.prototype.appendPercentage=function(){var e=b(this.model.getDisplayData(),0,"value"),r=this.getComponentContainer(),i=U.appendOrSelect(r,"text.meter-title"),a=b(this.getOptions(),"meter","statusBar","percentageIndicator","enabled")===!0?[e]:[],o=r.selectAll("text.percent-value").data(a),s=kt.statusBar.paddingRight;o.enter().append("text").classed("percent-value",!0).merge(o).text(function(l){return l+"%"}).attr("x",+i.attr("x")+i.node().getComputedTextLength()+s).attr("y",i.attr("y")),o.exit().remove()},n.prototype.truncateTitle=function(e,r){t.prototype.truncateTitle.call(this,e,r);var i=U.appendOrSelect(this.parent,"tspan"),a=kt.statusBar.paddingRight,o=Math.ceil(i.node().getComputedTextLength()),s=U.appendOrSelect(this.parent,"text.percent-value");s.attr("x",+e.attr("x")+e.node().getComputedTextLength()+o+a)},n.prototype.getMaxTitleWidth=function(){var e=U.getHTMLElementSize(this.services.domUtils.getMainContainer()),r=b(this.getOptions(),"meter","proportional"),i=e.width?e.width:this.parent.node().getAttribute("width");if(r!==null){var a=U.appendOrSelect(this.parent,"text.proportional-meter-total").node(),o=U.getSVGElementSize(a,{useBBox:!0}).width;return i-o-kt.total.paddingLeft}else{var s=U.appendOrSelect(this.parent,"text.percent-value"),l=kt.statusBar.paddingRight,u=s.node().getComputedTextLength(),c=U.appendOrSelect(this.parent,"g.status-indicator").node(),f=U.getSVGElementSize(c,{useBBox:!0}).width+kt.status.paddingLeft;return i-u-l-f}},n.prototype.getStatusIconPathString=function(e){switch(e){case Kr.SUCCESS:return"M6.875 11.3125 3.75 8.1875 4.74375 7.25 6.875 9.34375 11.50625 4.75 12.5 5.7375 Z";case Kr.DANGER:return"M10.7 11.5 4.5 5.3 5.3 4.5 11.5 10.7 Z";case Kr.WARNING:return"M7.9375,11.125 C7.41973305,11.125 7,11.544733 7,12.0625 C7,12.580267 7.41973305,13 7.9375,13 C8.45526695,13 8.875,12.580267 8.875,12.0625 C8.875,11.544733 8.45526695,11.125 7.9375,11.125 M7.3125, 3 8.5625, 3 8.5625, 9.875 7.3125, 9.875, 7.3125, 3 Z"}},n}(Ro),_2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),mv=function(t){_2(n,t);function n(e,r,i){var a=t.call(this,e,r,i)||this;return a.type="tooltip",a.renderType=Q.HTML,a.isEventListenerAdded=!1,a.positionService=new Po,a.handleShowTooltip=function(o){var s=o.detail.data||o.detail.items,l,u=a.formatItems(a.getItems(o));o.detail.content?l='<div class="title-tooltip"><p>'+o.detail.content+"</p></div>":l=a.getTooltipHTML(u);var c=U.appendOrSelect(a.tooltip,"div.content-box");if(b(a.getOptions(),"tooltip","customHTML"))if(o.detail.content){var f='<div class="title-tooltip"><p>'+o.detail.content+"</p></div>";c.html(f)}else c.html(a.model.getOptions().tooltip.customHTML(s,l));else c.html(l);c.selectAll(".datapoint-tooltip").each(function(h,p){var d=u[p];u[p]&&u[p].color&&B(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",d.color)}),a.positionTooltip(o),a.tooltip.classed("hidden",!1).attr("aria-hidden",!1)},a.handleHideTooltip=function(){a.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},a.init(),a}return n.prototype.addTooltipEventListener=function(){var e=this;this.services.events.addEventListener(M.Tooltip.MOVE,function(r){e.tooltip.classed("hidden")===!1&&e.positionTooltip(r)}),this.services.events.addEventListener(M.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(M.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(M.Chart.MOUSEOUT,this.handleHideTooltip)},n.prototype.removeTooltipEventListener=function(){this.services.events.removeEventListener(M.Tooltip.MOVE,null),this.services.events.removeEventListener(M.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(M.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(M.Chart.MOUSEOUT,this.handleHideTooltip)},n.prototype.getItems=function(e){return e.detail.items?e.detail.items:[]},n.prototype.formatItems=function(e){var r=this,i=this.getOptions(),a=b(i,"tooltip","truncation","type"),o=b(i,"tooltip","truncation","threshold"),s=b(i,"tooltip","truncation","numCharacter");return a!==le.NONE?e.map(function(l){var u=l.labelIcon?12:0;return l.value=l.value?r.valueFormatter(l.value,l.label):l.value,l.label&&l.label.length+u>o&&(l.label=di(l.label,a,s)),l.value&&l.value.length>o&&(l.value=di(l.value,a,s)),l}):e},n.prototype.getTooltipHTML=function(e){return'<ul class="multi-tooltip">'+e.map(function(r){return`<li>
					<div class="datapoint-tooltip`+(r.bold?" bold":"")+`">
						`+(r.class||r.color?'<div class="tooltip-color '+r.class+'"></div>':"")+`
						<div class="label">
						<p>`+(r.label||"")+`</p>
						`+(r.labelIcon?'<span class="label-icon"/>'+r.labelIcon+"</span>":"")+`
						</div>
						`+(r.value===void 0||r.value===null?"":'<p class="value"/>'+r.value+"</p>")+`
					</div>
				</li>`}).join("")+"</ul>"},n.prototype.valueFormatter=function(e,r){var i=this.getOptions(),a=b(i,"tooltip","valueFormatter");if(a)return a(e,r);if(typeof e.getTime=="function")return wr(e,"MMM d, yyyy");try{if(typeof e=="string"&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e))return wr(Date.parse(e),"MMM d, yyyy")}catch{}return e.toLocaleString()},n.prototype.render=function(){var e=this.getOptions(),r=b(e,"tooltip","enabled");if(r){var i=B(this.services.domUtils.getHolder()),a=b(e,"style","prefix");this.tooltip=U.appendOrSelect(i,"div."+Wt+"--"+a+"--tooltip"),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!r&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)},n.prototype.positionTooltip=function(e){var r=this.services.domUtils.getHolder(),i=this.tooltip.node(),a=this.getOptions(),o=b(a,"zoomBar","top","enabled"),s=b(e,"detail","mousePosition");if(!s)s=Sn(b(e,"detail","event"),r);else{var l=b(a,"zoomBar","top","type"),u=Yt.height[l];o&&(s[1]+=u+Yt.spacerHeight)}var c,f=r.offsetWidth,h=r.offsetHeight,p;s[0]/f>.9?p=Bt.LEFT:s[0]/f<.1?p=Bt.RIGHT:p=this.positionService.findBestPlacementAt({left:s[0],top:s[1]},i,[Bt.RIGHT,Bt.LEFT,Bt.TOP,Bt.BOTTOM],function(){return{top:void 0,left:void 0,width:f,height:h}});var d=Gh.horizontalOffset;p===Bt.LEFT&&(d*=-1),c=this.positionService.findPositionAt({left:s[0]+d,top:s[1]},i,p),this.positionService.setElement(i,c)},n}(ct),x2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),b2=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},yv=function(t){x2(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getItems=function(e){var r=this;if(e.detail.items)return e.detail.items;var i=e.detail.data;if(!Array.isArray(i)||!i.length||!i[0])return[];var a=this.getOptions(),o=this.services.cartesianScales,s=o.getDomainIdentifier(),l=o.isDualAxes(),u=a.data.groupMapsTo,c=o.getDomainLabel(),f=o.getRangeLabel(),h=i[0][s],p;if(i.length===1){var d=i[0],g=o.getRangeIdentifier(d);if(l){var m=o.getRangeAxisPosition({datum:d,groups:[d[u]]});f=o.getScaleLabel(m)}var y=d[g];p=b2([{label:c,value:h}],Array.isArray(y)&&y.length===2?[{label:"Start",value:y[0]},{label:"End",value:y[1]}]:[{label:f,value:d[g]}]),e.detail.additionalItems&&e.detail.additionalItems.forEach(function(_){return p.push({label:_.label,value:_.value})}),p.push({label:a.tooltip.groupLabel,value:d[u],color:this.model.getFillColor(d[u]),class:this.model.getColorClassName({classNameTypes:[J.TOOLTIP],dataGroupName:d[u]})})}else if(i.length>1&&(p=[{label:c,value:h}],p=p.concat(i.map(function(_){var E=_[o.getRangeIdentifier(_)];return{label:_[u],value:Array.isArray(E)&&E.length===2?E[0]+" - "+E[1]:E,color:r.model.getFillColor(_[u]),class:r.model.getColorClassName({classNameTypes:[J.TOOLTIP],dataGroupName:_[u]})}}).sort(function(_,E){return E.value-_.value})),!l&&b(a,"tooltip","showTotal")===!0)){var v=o.getRangeIdentifier();p.push({label:bt(a,"tooltip.totalLabel")||"Total",value:i.reduce(function(_,E){return _+E[v]},0),bold:!0})}return p},n}(mv),O2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_v=function(t){O2(n,t);function n(e,r,i){var a=t.call(this,e,r,i)||this;return a.type="chart-clip",a.renderType=Q.SVG,a.chartClipId="chart-clip-id-"+Math.floor(Math.random()*99999999999),a.init(),a}return n.prototype.init=function(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})},n.prototype.render=function(e){this.createClipPath()},n.prototype.createClipPath=function(){var e=this.parent,r=this.services.cartesianScales,i=r.getMainXScale(),a=r.getMainYScale(),o=i.range(),s=o[0],l=o[1],u=a.range(),c=u[0],f=u[1];this.chartClipPath=U.appendOrSelect(e,"clipPath."+this.type).attr("id",this.chartClipId);var h=U.appendOrSelect(this.chartClipPath,"rect."+this.type);h.attr("x",s).attr("y",f).attr("width",l-s).attr("height",c-f),this.chartClipPath.merge(h).lower()},n}(ct),T2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),w2=function(t){T2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="canvas-chart-clip",e.chartClipId="canvas-chart-clip-id-"+Math.floor(Math.random()*99999999999),e}return n.prototype.createClipPath=function(){var e=this.parent,r=U.getSVGElementSize(this.parent,{useAttrs:!0}),i=r.width,a=r.height;this.chartClipPath=U.appendOrSelect(e,"clipPath."+this.type).attr("id",this.chartClipId);var o=U.appendOrSelect(this.chartClipPath,"rect."+this.type);o.attr("x",0).attr("y",0).attr("width",i).attr("height",a),this.chartClipPath.merge(o).lower()},n}(_v),E2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),en=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e},S2=function(t){E2(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.type="highlight",i.renderType=Q.SVG,i.positionService=new Po,i.highlightStrokeWidth=1,i}return n.prototype.render=function(e){e===void 0&&(e=!1);var r=b(this.getOptions(),"axes"),i=[];Object.keys(r).forEach(function(p){if(Object.values(W).includes(p)){var d=r[p];d.highlights&&d.highlights.data.length>0&&i.push({axisPosition:p,highlightStartMapsTo:d.highlights.highlightStartMapsTo,highlightEndMapsTo:d.highlights.highlightEndMapsTo,labelMapsTo:d.highlights.labelMapsTo,highlight:d.highlights.data,color:d.highlights.color})}});var a=this.getComponentContainer({withinChartClip:!0}),o=a.selectAll("g.axis-highlight").data(i,function(p){return p.axisPosition});o.exit().attr("opacity",0).remove();var s=o.enter().append("g"),l=s.merge(o);l.attr("class",function(p){return"axis-highlight "+p.axisPosition});var u=l.selectAll("g.highlight-group").data(function(p){return p.highlight.map(function(d){return d.axisPosition=p.axisPosition,d.highlightStartMapsTo=p.highlightStartMapsTo,d.labelMapsTo=p.labelMapsTo,d.color=p.color,d.highlightEndMapsTo=p.highlightEndMapsTo,d})});u.exit().attr("opacity",0).remove();var c=u.enter().append("g");c.append("rect").attr("class","highlight-bar"),c.append("line").attr("class","highlight-line");var f=c.merge(u);f.attr("class","highlight-group");var h=this;l.each(function(p){var d=p.axisPosition,g=h.services.cartesianScales.getMainXScale(),m=h.services.cartesianScales.getMainYScale(),y=g.range(),v=y[0],_=y[1],E=m.range(),x=E[0],O=E[1],P=h.services.cartesianScales,S=P.getOrientation(),A=function(C){return P.getDomainValue(C)},I=function(C){return P.getRangeValue(C)},w=He(A,I,S),N=w[0],T=w[1],R=B(this);d===W.TOP||d===W.BOTTOM?R.selectAll("rect.highlight-bar").transition().call(function(C){return h.services.transitions.setupTransition({transition:C,name:"highlight-bar-update",animate:e})}).attr("y",Math.max(O+h.highlightStrokeWidth,0)).attr("height",Math.max(x-2*h.highlightStrokeWidth,0)).attr("x",function(C){var D=C.highlightStartMapsTo,k=en(C,["highlightStartMapsTo"]);return N(k[D])}).attr("width",function(C){var D=C.highlightStartMapsTo,k=C.highlightEndMapsTo,$=en(C,["highlightStartMapsTo","highlightEndMapsTo"]);return Math.max(N($[k])-N($[D]),0)}).style("stroke",function(C){var D=C.color,k=C.labelMapsTo,$=en(C,["color","labelMapsTo"]);return D&&D.scale[$[k]]?D.scale[$[k]]:null}).style("stroke-dasharray","2, 2").attr("stroke-width",h.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",function(C){var D=C.color,k=C.labelMapsTo,$=en(C,["color","labelMapsTo"]);return D&&D.scale[$[k]]?D.scale[$[k]]:null}):R.selectAll("rect.highlight-bar").transition().call(function(C){return h.services.transitions.setupTransition({transition:C,name:"highlight-bar-update",animate:e})}).attr("x",v).attr("width",Math.max(_-v,0)).attr("y",function(C){var D=C.highlightEndMapsTo,k=en(C,["highlightEndMapsTo"]);return T(k[D])}).attr("height",function(C){var D=C.highlightStartMapsTo,k=C.highlightEndMapsTo,$=en(C,["highlightStartMapsTo","highlightEndMapsTo"]);return Math.max(T($[D])-T($[k]),0)}).style("stroke",function(C){var D=C.color,k=C.labelMapsTo,$=en(C,["color","labelMapsTo"]);return D&&D.scale[$[k]]?D.scale[$[k]]:null}).style("stroke-dasharray","2, 2").attr("stroke-width",h.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",function(C){var D=C.color,k=C.labelMapsTo,$=en(C,["color","labelMapsTo"]);return D&&D.scale[$[k]]?D.scale[$[k]]:null})})},n}(ct),M2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xv=function(t){M2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="area",e.renderType=Q.SVG,e.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement;e.parent.selectAll("path.area").transition("legend-hover-area").call(function(a){return e.services.transitions.setupTransition({transition:a,name:"legend-hover-area"})}).attr("opacity",function(a){return a.name!==i.datum().name?Oe.opacity.unselected:Oe.opacity.selected})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.area").transition("legend-mouseout-area").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-area"})}).attr("opacity",Oe.opacity.selected)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.getComponentContainer({withinChartClip:!0}),a=this.getOptions(),o=[0,0],s=this.services.cartesianScales,l=s.getOrientation(),u=Du().curve(this.services.curves.getD3Curve()).defined(function(w,N){var T=s.getRangeIdentifier(),R=w[T];return R!=null}),c=this.model.getGroupedData(this.configs.groups),f=b(a,"bounds"),h=f&&c&&c.length===1;!h&&f&&console.warn("Bounds can only be shown when having 1 single datagroup, you've supplied "+c.length);var p=0,d=function(w,N){b(a,"axes",w,"includeZero")===!1&&N[0]>0&&N[1]>0&&(p=N[0])},g=function(w,N){return h?s.getBoundedScaledValues(w,N)[0]:s.getRangeValue(p)},m=function(w,N){return h?s.getBoundedScaledValues(w,N)[1]:s.getRangeValue(w,N)};l===Pt.VERTICAL?(o=s.getMainYScale().domain(),d(s.getMainYAxisPosition(),o),u.x(function(w,N){return s.getDomainValue(w,N)}).y0(function(w,N){return g(w,N)}).y1(function(w,N){return m(w,N)})):(o=s.getMainXScale().domain(),d(s.getMainXAxisPosition(),o),u.x0(function(w,N){return g(w,N)}).x1(function(w,N){return m(w,N)}).y(function(w,N){return s.getDomainValue(w,N)}));var y=b(a,"color","gradient","enabled"),v=c&&c.length===1&&y;c.length>1&&y&&console.error("Gradients can only be enabled when having 1 single dataset");var _=i.selectAll("path.area").data(c,function(w){return w.name}),E=B(this.services.domUtils.getMainContainer());if(_.exit().attr("opacity",0).remove(),!!c.length){if(v){var x=E.select("path."+this.model.getColorClassName({classNameTypes:[J.STROKE],dataGroupName:c[0].name})).node(),O=void 0;if(x)O=getComputedStyle(x,null).getPropertyValue("stroke");else{var P=b(this.model.getOptions(),"color","scale");if(P!==null){var S=Object.keys(P);O=P[S[0]]}}wl.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(c[0].name.replace(" ","")+"_"+this.gradient_id),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:wl.getStops(o,O)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each(function(){this.parentNode.remove()});var A=this,I=_.enter().append("path");v?I.merge(_).style("fill",function(w){return"url(#"+r.services.domUtils.generateElementIDString(w.name.replace(" ","")+"_"+r.gradient_id)+")"}).attr("class","area").attr("class",function(w){return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:w.name,originalClassName:"area"})}).attr("d",function(w){var N=w.data;return u(N)}):(I.attr("opacity",0).merge(_).attr("class","area").attr("class",function(w){return r.model.getColorClassName({classNameTypes:[J.FILL,J.STROKE],dataGroupName:w.name,originalClassName:"area"})}).style("fill",function(w){return A.model.getFillColor(w.name)}).transition().call(function(w){return r.services.transitions.setupTransition({transition:w,name:"area-update-enter",animate:e})}).attr("opacity",h?1:Oe.opacity.selected).attr("d",function(w){var N=w.data;return u(N)}),h&&I.attr("fill-opacity",Oe.opacity.selected).style("stroke",function(w){return A.model.getStrokeColor(w.name)}).style("stroke-dasharray","2, 2").attr("stroke-width",.7+"px"))}},n.prototype.destroy=function(){var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(ct),A2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bv=function(t){A2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="area-stacked",e.renderType=Q.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions(),o=a.data.groupMapsTo;e.parent.selectAll("path.area").transition("legend-hover-area").call(function(s){return e.services.transitions.setupTransition({transition:s,name:"legend-hover-area"})}).attr("opacity",function(s){return b(s,0,o)!==i.datum().name?Oe.opacity.unselected:Oe.opacity.selected})},e.handleLegendMouseOut=function(){e.parent.selectAll("path.area").transition("legend-mouseout-area").call(function(r){return e.services.transitions.setupTransition({transition:r,name:"legend-mouseout-area"})}).attr("opacity",Oe.opacity.selected)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.getComponentContainer({withinChartClip:!0}),a=this,o=this.getOptions(),s=o.data.groupMapsTo,l=Object.keys(o.axes).some(function(m){return o.axes[m].percentage}),u=this.model.getStackedData({percentage:l,groups:this.configs.groups}),c=b(u,0,0),f=this.services.cartesianScales.getDomainAxisPosition({firstDatum:c}),h=this.services.cartesianScales.getRangeAxisPosition({firstDatum:c}),p=this.services.cartesianScales.getScaleByPosition(h),d=i.selectAll("path.area").data(u,function(m){return b(m,0,s)});this.areaGenerator=Du().x(function(m,y){return r.services.cartesianScales.getValueThroughAxisPosition(f,m.data.sharedStackKey,y)}).y0(function(m){return p(m[0])}).y1(function(m){return p(m[1])}).curve(this.services.curves.getD3Curve()),d.exit().attr("opacity",0).remove();var g=d.enter().append("path").attr("opacity",0);g.merge(d).data(u,function(m){return b(m,0,s)}).attr("class","area").attr("class",function(m){return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:b(m,0,s),originalClassName:"area"})}).style("fill",function(m){return a.model.getFillColor(b(m,0,s))}).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",function(m){return b(m,0,s)}).transition().call(function(m){return r.services.transitions.setupTransition({transition:m,name:"area-update-enter",animate:e})}).attr("opacity",Oe.opacity.selected).attr("d",this.areaGenerator)},n}(ct),C2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gu=function(t){C2(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getBarWidth=function(e){var r=this.getOptions();if(r.bars.width)return r.bars.width;var i=this.model.getDisplayData().length,a=this.services.cartesianScales.getMainXScale(),o=U.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!a.step){var s=b(r,"bars","spacingFactor");return Math.min(r.bars.maxWidth,o*s/i)}return Math.min(r.bars.maxWidth,a.step()/2)},n.prototype.isOutsideZoomedDomain=function(e,r){var i=this.model.getDisplayData().length;if(i<=1)return!1;var a=this.model.get("zoomDomain");if(a!==void 0){var o=this.services.cartesianScales.getDomainScale();return e<o(a[0])||r>o(a[1])}return!1},n}(ct),D2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ov=function(t){D2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="simple-bar",e.renderType=Q.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-simple-bar"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-simple-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.getOptions(),a=i.data.groupMapsTo,o=this.getComponentContainer({withinChartClip:!0}),s=this.model.getDisplayData(this.configs.groups),l=this.services.cartesianScales.getOrientation(),u=o.selectAll("path.bar").data(s,function(f){return f[a]});u.exit().attr("opacity",0).remove();var c=u.enter().append("path").attr("opacity",0);c.merge(u).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(function(f){return r.services.transitions.setupTransition({transition:f,name:"bar-update-enter",animate:e})}).attr("class",function(f){return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:f[a],originalClassName:"bar"})}).style("fill",function(f){return r.model.getFillColor(f[a])}).attr("d",function(f,h){var p=r.services.cartesianScales.getRangeIdentifier(),d=r.getBarWidth(),g=f[p],m=r.services.cartesianScales.getDomainValue(f,h)-d/2,y=m+d,v,_;if(Array.isArray(g)&&g.length===2)v=r.services.cartesianScales.getRangeValue(g[0]),_=r.services.cartesianScales.getRangeValue(g[1],h);else{var E=r.services.cartesianScales.getRangeScale(),x=E.domain()[0];v=r.services.cartesianScales.getRangeValue(Math.max(0,x)),_=r.services.cartesianScales.getRangeValue(f,h)}var O=Math.abs(_-v);if(O!==0&&O<2&&(g>0&&l===Pt.VERTICAL||g<0&&l===Pt.HORIZONTAL?_=v-2:_=v+2),!r.isOutsideZoomedDomain(m,y))return zt({x0:m,x1:y,y0:v,y1:_},l)}).attr("opacity",1).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",function(f){return f.value}),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("path.bar").on("mouseover",function(r,i){var a=B(this);a.classed("hovered",!0),e.services.events.dispatchEvent(M.Bar.BAR_MOUSEOVER,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:r,hoveredElement:a,data:[i]})}).on("mousemove",function(r,i){e.services.events.dispatchEvent(M.Bar.BAR_MOUSEMOVE,{event:r,element:B(this),datum:i}),e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(M.Bar.BAR_CLICK,{event:r,element:B(this),datum:i})}).on("mouseout",function(r,i){var a=B(this);a.classed("hovered",!1),e.services.events.dispatchEvent(M.Bar.BAR_MOUSEOUT,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:a})})},n.prototype.destroy=function(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(Gu),L2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tv=function(t){L2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="grouped-bar",e.renderType=Q.SVG,e.padding=5,e.defaultStepFactor=70,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("path.bar").transition("legend-hover-bar").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-bar"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.model.getDisplayData(this.configs.groups),a=this.getOptions(),o=a.data.groupMapsTo;this.setGroupScale();var s=this.getComponentContainer({withinChartClip:!0}),l=hi(i.map(function(d){var g=r.services.cartesianScales.getDomainIdentifier(d);return d[g]&&typeof d[g].toString=="function"?d[g].toString():d[g]})),u=s.selectAll("g.bars").data(l,function(d){return d});u.exit().attr("opacity",0).remove();var c=u.enter().append("g").classed("bars",!0).attr("role",nt.GROUP).attr("data-name","bars"),f=c.merge(u);f.transition().call(function(d){return r.services.transitions.setupTransition({transition:d,name:"bar-group-update-enter",animate:e})}).attr("transform",function(d,g){var m=r.services.cartesianScales.getDomainValue(d,g),y=m-r.getGroupWidth()/2;return r.services.cartesianScales.getOrientation()===Pt.VERTICAL?"translate("+y+", 0)":"translate(0, "+y+")"});var h=f.selectAll("path.bar").data(function(d){return r.getDataCorrespondingToLabel(d)},function(d){return d[o]});h.exit().attr("opacity",0).remove();var p=h.enter().append("path").attr("opacity",0);p.merge(h).classed("bar",!0).transition().call(function(d){return r.services.transitions.setupTransition({transition:d,name:"bar-update-enter",animate:e})}).attr("class",function(d){return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:d[o],originalClassName:"bar"})}).style("fill",function(d){return r.model.getFillColor(d[o])}).attr("d",function(d,g){var m=r.groupScale(d[o]),y=r.getBarWidth(),v=m,_=m+y,E=r.services.cartesianScales.getRangeAxisPosition({datum:d}),x=r.services.cartesianScales.getValueThroughAxisPosition(E,0),O=r.services.cartesianScales.getRangeValue(d),P=r.services.cartesianScales.getDomainValue(d,g)-y/2,S=P+y;if(!r.isOutsideZoomedDomain(P,S))return zt({x0:v,x1:_,y0:x,y1:O},r.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",function(d){return d.value}),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("path.bar").on("mouseover",function(r,i){var a=B(this);a.classed("hovered",!0),e.services.events.dispatchEvent(M.Bar.BAR_MOUSEOVER,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:r,hoveredElement:a,data:[i]})}).on("mousemove",function(r,i){var a=B(this);e.services.events.dispatchEvent(M.Bar.BAR_MOUSEMOVE,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(M.Bar.BAR_CLICK,{event:r,element:B(this),datum:i})}).on("mouseout",function(r,i){var a=B(this);a.classed("hovered",!1),e.services.events.dispatchEvent(M.Bar.BAR_MOUSEOUT,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:a})})},n.prototype.destroy=function(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.getDataCorrespondingToLabel=function(e){var r=this,i=this.model.getDisplayData(this.configs.groups);return i.filter(function(a){var o=r.services.cartesianScales.getDomainIdentifier(a);return a[o].toString()===e})},n.prototype.getGroupWidth=function(){var e=this.model.getGroupedData(this.configs.groups),r=this.getTotalGroupPadding();return this.getBarWidth()*e.length+r},n.prototype.getDomainScaleStep=function(){var e=this.services.cartesianScales.getDomainScale(),r=this.model.getGroupedData(this.configs.groups),i=this.defaultStepFactor;if(typeof e.step=="function")i=e.step();else if(r.length>0){var a=r.find(function(s){var l;return((l=s.data)===null||l===void 0?void 0:l.length)>1});if(a){var o=this.services.cartesianScales.getDomainIdentifier(a.data[0]);i=Math.abs(e(a.data[1][o])-e(a.data[0][o]))}}return i},n.prototype.getTotalGroupPadding=function(){var e=this.model.getGroupedData(this.configs.groups);if(e.length===1)return 0;var r=Math.min(5,5*(this.getDomainScaleStep()/this.defaultStepFactor));return r*(e.length-1)},n.prototype.getBarWidth=function(){var e=this.getOptions(),r=b(e,"bars","width"),i=b(e,"bars","maxWidth");if(r!==null&&(i===null||r<=i))return r;var a=this.model.getGroupedData(this.configs.groups),o=a.length,s=this.getTotalGroupPadding();return Math.min(i,(this.getDomainScaleStep()-s)/o)},n.prototype.setGroupScale=function(){var e=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=Ri().domain(e).rangeRound([0,this.getGroupWidth()])},n}(Gu),P2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wv=function(t){P2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="stacked-bar",e.renderType=Q.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.model.getOptions().data.groupMapsTo;e.parent.selectAll("path.bar").transition("legend-hover-bar").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-bar"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.getComponentContainer({withinChartClip:!0}),a=this.getOptions(),o=a.data.groupMapsTo,s=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),l=this.model.getActiveDataGroupNames(),u=i.selectAll("g.bars").data(s,function(f){return b(f,0,o)});u.exit().attr("opacity",0).remove(),u.enter().append("g").classed("bars",!0).attr("role",nt.GROUP).attr("data-name","bars");var c=i.selectAll("g.bars").selectAll("path.bar").data(function(f){return f},function(f){return f.data.sharedStackKey});c.exit().remove(),c.enter().append("path").merge(c).classed("bar",!0).transition().call(function(f){return r.services.transitions.setupTransition({transition:f,name:"bar-update-enter",animate:e})}).attr("class",function(f){return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:f[o],originalClassName:"bar"})}).style("fill",function(f){return r.model.getFillColor(f[o])}).attr("d",function(f,h){var p=f.data.sharedStackKey,d=r.getBarWidth(),g=r.services.cartesianScales.getDomainValue(p,h)-d/2,m=g+d,y=r.services.cartesianScales.getRangeValue(f[0],h),v=r.services.cartesianScales.getRangeValue(f[1],h);if(!r.isOutsideZoomedDomain(g,m)){if(Math.abs(v-y)>0&&Math.abs(v-y)>a.bars.dividerSize){var _=f[0]<0&&f[1]<=0;_&&l.length>1?r.services.cartesianScales.getOrientation()===Pt.VERTICAL?v+=f[1]===0?2:1:v-=1:_||(r.services.cartesianScales.getOrientation()===Pt.VERTICAL?v+=1:v-=1)}return zt({x0:g,x1:m,y0:y,y1:v},r.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",function(f){return f[1]-f[0]}),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this.getOptions(),r=e.data.groupMapsTo,i=this;this.parent.selectAll("path.bar").on("mouseover",function(a,o){var s,l=B(this);l.classed("hovered",!0),i.services.events.dispatchEvent(M.Bar.BAR_MOUSEOVER,{event:a,element:l,datum:o});var u=i.model.getDisplayData(i.configs.groups),c=u.find(function(p){var d=i.services.cartesianScales.getDomainIdentifier(p),g=i.services.cartesianScales.getRangeIdentifier(p);return p[g]===o.data[o[r]]&&p[d].toString()===o.data.sharedStackKey&&p[r]===o[r]});if(c===void 0){var f=i.services.cartesianScales.getDomainIdentifier(),h=i.services.cartesianScales.getRangeIdentifier();c=(s={},s[f]=o.data.sharedStackKey,s[h]=o.data[o[r]],s[r]=o[r],s)}i.services.events.dispatchEvent(M.Tooltip.SHOW,{event:a,hoveredElement:l,data:[c]})}).on("mousemove",function(a,o){var s=B(this);i.services.events.dispatchEvent(M.Bar.BAR_MOUSEMOVE,{event:a,element:s,datum:o}),i.services.events.dispatchEvent(M.Tooltip.MOVE,{event:a})}).on("click",function(a,o){i.services.events.dispatchEvent(M.Bar.BAR_CLICK,{event:a,element:B(this),datum:o})}).on("mouseout",function(a,o){var s=B(this);s.classed("hovered",!1),i.services.events.dispatchEvent(M.Bar.BAR_MOUSEOUT,{event:a,element:s,datum:o}),i.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:s})})},n.prototype.getBarWidth=function(){var e=this.getOptions();if(b(e,"bars","width"))return e.bars.width;var r=this.services.cartesianScales.getMainXScale(),i=U.getSVGElementSize(this.parent,{useAttrs:!0}).width,a=this.model.getStackKeys().length,o=b(e,"bars","spacingFactor");return r.step?Math.min(e.bars.maxWidth,r.step()/2):Math.min(e.bars.maxWidth,i*o/a)},n.prototype.destroy=function(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(Gu),R2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),I2=function(t){R2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="boxplot",e.renderType=Q.SVG,e}return n.prototype.render=function(e){var r=this,i=this.getComponentContainer({withinChartClip:!0}),a=this.getOptions(),o=a.data.groupMapsTo,s=this.model.getDataGroupNames(),l=this.services.cartesianScales.getMainXScale(),u=this.services.cartesianScales.getMainYScale(),c=l.range(),f=c[0],h=c[1],p=u.range(),d=p[0],g=p[1],m=h-f,y=d-g;if(m!==0){var v=this.services.cartesianScales,_=v.getOrientation(),E=_===Pt.VERTICAL,x=He(function(D,k){return r.services.cartesianScales.getDomainValue(D,k)},function(D,k){return r.services.cartesianScales.getRangeValue(D,k)},_),O=x[0],P=x[1],S=Math.floor((E?m:y)/s.length),A=Math.min(S/2,16),I=this.model.getBoxplotData(),w=i.selectAll(".box-group").data(I);w.exit().remove();var N=w.enter().append("g").attr("class","box-group"),T=w.merge(N);N.append("path").merge(w.select("path.vertical-line.start")).attr("class",function(){return r.model.getColorClassName({classNameTypes:[J.STROKE],originalClassName:"vertical-line start"})}).attr("stroke-width",Qt.strokeWidth.default).attr("fill","none").transition().call(function(D){return r.services.transitions.setupTransition({transition:D,name:"boxplot-update-verticalstartline",animate:e})}).attr("d",function(D){var k=v.getDomainValue(D[o]),$=k,L=v.getRangeValue(D.whiskers.min),V=v.getRangeValue(D.quartiles.q_25);return zt({x0:k,x1:$,y0:L,y1:V},_)}),N.append("path").merge(w.select("path.vertical-line.end")).attr("class",function(){return r.model.getColorClassName({classNameTypes:[J.STROKE],originalClassName:"vertical-line end"})}).attr("stroke-width",Qt.strokeWidth.default).attr("fill","none").transition().call(function(D){return r.services.transitions.setupTransition({transition:D,name:"boxplot-update-verticalendline",animate:e})}).attr("d",function(D){var k=v.getDomainValue(D[o]),$=k,L=v.getRangeValue(D.whiskers.max),V=v.getRangeValue(D.quartiles.q_75);return zt({x0:k,x1:$,y0:L,y1:V},_)}),N.append("path").merge(w.select("path.box")).attr("class",function(){return r.model.getColorClassName({classNameTypes:[J.FILL,J.STROKE],originalClassName:"box"})}).attr("fill-opacity",Qt.box.opacity.default).attr("stroke-width",Qt.strokeWidth.default).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","box").attr("aria-label",function(D){return D[o]}).transition().call(function(D){return r.services.transitions.setupTransition({transition:D,name:"boxplot-update-quartiles",animate:e})}).attr("d",function(D){var k=v.getDomainValue(D[o])-A/2,$=k+A,L=v.getRangeValue(Math[E?"max":"min"](D.quartiles.q_75,D.quartiles.q_25)),V=L+Math.abs(v.getRangeValue(D.quartiles.q_75)-v.getRangeValue(D.quartiles.q_25));return zt({x0:k,x1:$,y0:L,y1:V},_)}),N.append("path").merge(w.select("path.highlight-area")).attr("class","highlight-area").attr("opacity",0).attr("d",function(D){var k=v.getDomainValue(D[o])-A/2,$=k+A,L=v.getRangeValue(D.whiskers.min),V=v.getRangeValue(D.whiskers.max);return zt({x0:k,x1:$,y0:L,y1:V},_)}),N.append("path").merge(w.select("path.whisker.start")).attr("class",function(){return r.model.getColorClassName({classNameTypes:[J.STROKE],originalClassName:"whisker start"})}).attr("stroke-width",Qt.strokeWidth.thicker).attr("fill","none").transition().call(function(D){return r.services.transitions.setupTransition({transition:D,name:"boxplot-update-startingwhisker",animate:e})}).attr("d",function(D){var k=v.getDomainValue(D[o])-A/4,$=k+A/2,L=v.getRangeValue(D.whiskers.min),V=v.getRangeValue(D.whiskers.min);return zt({x0:k,x1:$,y0:L,y1:V},_)}),N.append("path").merge(w.select("path.median")).attr("fill","none").attr("class",function(){return r.model.getColorClassName({classNameTypes:[J.STROKE],originalClassName:"median"})}).attr("stroke-width",2).transition().call(function(D){return r.services.transitions.setupTransition({transition:D,name:"boxplot-update-median",animate:e})}).attr("d",function(D){var k=v.getDomainValue(D[o])-A/2,$=k+A,L=v.getRangeValue(D.quartiles.q_50),V=L;return zt({x0:k,x1:$,y0:L,y1:V},_)}),N.append("path").merge(w.select("path.whisker.end")).attr("class",function(){return r.model.getColorClassName({classNameTypes:[J.STROKE],originalClassName:"whisker end"})}).attr("stroke-width",Qt.strokeWidth.thicker).attr("fill","none").transition().call(function(D){return r.services.transitions.setupTransition({transition:D,name:"boxplot-update-endingwhisker",animate:e})}).attr("d",function(D){var k=v.getDomainValue(D[o])-A/4,$=k+A/2,L=v.getRangeValue(D.whiskers.max),V=v.getRangeValue(D.whiskers.max);return zt({x0:k,x1:$,y0:L,y1:V},_)});var R=T.selectAll("circle.outlier").data(function(D){return D.outliers.map(function(k){var $;return $={min:D.whiskers.min,max:D.whiskers.max},$[o]=D[o],$.value=k,$})});R.exit().remove();var C=R.enter().append("circle");R.merge(C).attr("r",Qt.circle.radius).attr("class",function(){return r.model.getColorClassName({classNameTypes:[J.FILL,J.STROKE],originalClassName:"outlier"})}).attr("fill-opacity",Qt.circle.opacity.default).attr("cx",O).transition().call(function(D){return r.services.transitions.setupTransition({transition:D,name:"boxplot-update-circles",animate:e})}).attr("cy",P),this.addBoxEventListeners(),this.addCircleEventListeners()}},n.prototype.addBoxEventListeners=function(){var e=this,r=this.getOptions(),i=r.data.groupMapsTo;this.parent.selectAll("path.highlight-area").on("mouseover",function(a,o){var s=B(this),l=B(this.parentNode);l.select("path.box").classed("hovered",!0).attr("fill-opacity",Qt.box.opacity.hovered),e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:a,hoveredElement:s,items:[{label:r.tooltip.groupLabel,value:o[i],class:e.model.getColorClassName({classNameTypes:[J.TOOLTIP]})},{label:"Minimum",value:o.whiskers.min},{label:"Q1",value:o.quartiles.q_25},{label:"Median",value:o.quartiles.q_50},{label:"Q3",value:o.quartiles.q_75},{label:"Maximum",value:o.whiskers.max},{label:"IQR",value:o.quartiles.q_75-o.quartiles.q_25}]}),e.services.events.dispatchEvent(M.Boxplot.BOX_MOUSEOVER,{event:a,element:s,datum:o})}).on("mousemove",function(a,o){var s=B(this);e.services.events.dispatchEvent(M.Boxplot.BOX_MOUSEMOVE,{event:a,element:s,datum:o}),e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:a})}).on("click",function(a,o){e.services.events.dispatchEvent(M.Boxplot.BOX_CLICK,{event:a,element:B(this),datum:o})}).on("mouseout",function(a,o){var s=B(this),l=B(this.parentNode);l.select("path.box").classed("hovered",!1).attr("fill-opacity",Qt.box.opacity.default),e.services.events.dispatchEvent(M.Boxplot.BOX_MOUSEOUT,{event:a,element:s,datum:o}),e.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:s})})},n.prototype.addCircleEventListeners=function(){var e=this,r=this.getOptions(),i=r.data.groupMapsTo,a=this.services.cartesianScales.getRangeIdentifier();this.parent.selectAll("circle").on("mouseover",function(o,s){var l=B(this);l.classed("hovered",!0).attr("fill-opacity",Qt.circle.opacity.hovered).classed("unfilled",!1),e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:o,hoveredElement:l,items:[{label:r.tooltip.groupLabel,value:s[i],class:e.model.getColorClassName({classNameTypes:[J.TOOLTIP]})},{label:"Outlier",value:s[a]}]}),e.services.events.dispatchEvent(M.Boxplot.OUTLIER_MOUSEOVER,{event:o,element:l,datum:s})}).on("mousemove",function(o,s){var l=B(this);e.services.events.dispatchEvent(M.Boxplot.OUTLIER_MOUSEMOVE,{event:o,element:l,datum:s}),e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:o})}).on("click",function(o,s){e.services.events.dispatchEvent(M.Boxplot.OUTLIER_CLICK,{event:o,element:B(this),datum:s})}).on("mouseout",function(o,s){var l=B(this);l.classed("hovered",!1).attr("fill-opacity",Qt.circle.opacity.default),e.services.events.dispatchEvent(M.Boxplot.OUTLIER_MOUSEOUT,{event:o,element:l,datum:s}),e.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:l})})},n}(ct),k2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Se=function(t){k2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="scatter",e.renderType=Q.SVG,e.handleChartHolderOnHover=function(r){e.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"chart-holder-hover-scatter"})}).attr("opacity",1)},e.handleChartHolderOnMouseOut=function(r){e.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"chart-holder-mouseout-scatter"})}).attr("opacity",0)},e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("circle.dot").transition("legend-hover-scatter").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-scatter"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-scatter"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);var r=this.configs.fadeInOnChartHolderMouseover;r&&(e.addEventListener(M.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.addEventListener(M.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))},n.prototype.filterBasedOnZoomDomain=function(e){var r=this.services.cartesianScales.getDomainIdentifier(e),i=this.model.get("zoomDomain");return i!==void 0?e.filter(function(a){return a[r].getTime()>=i[0].getTime()&&a[r].getTime()<=i[1].getTime()}):e},n.prototype.getScatterData=function(){var e=this,r=this.getOptions(),i=this.configs.stacked,a;if(i){var o=Object.keys(r.axes).some(function(s){return r.axes[s].percentage});a=this.model.getStackedData({groups:this.configs.groups,percentage:o})}else a=this.model.getDisplayData(this.configs.groups).filter(function(s){var l=e.services.cartesianScales.getRangeIdentifier(s);return s[l]!==void 0&&s[l]!==null});return this.filterBasedOnZoomDomain(a)},n.prototype.render=function(e){var r=b(this.getOptions(),"points","enabled")||b(this.getOptions(),"bubble","enabled");if(r){var i=this.getComponentContainer({withinChartClip:!0}),a=this.getOptions(),o=a.data.groupMapsTo,s=this.services.cartesianScales.getDomainIdentifier(),l=i.selectAll("circle.dot").data(this.getScatterData(),function(f){return f[o]+"-"+f[s]});l.exit().attr("opacity",0).remove();var u=l.enter().append("circle").classed("dot",!0).attr("opacity",0),c=u.merge(l);this.styleCircles(c,e),this.addEventListeners()}},n.prototype.isDatapointThresholdAnomaly=function(e,r){var i=this,a=this.configs.handleThresholds;if(!a)return!1;var o=this.services.cartesianScales,s=o.getOrientation(),l=He(this.services.cartesianScales.getHighestDomainThreshold(),this.services.cartesianScales.getHighestRangeThreshold(),s),u=l[0],c=l[1],f=He(function(m,y){return i.services.cartesianScales.getDomainValue(m,y)},function(m,y){return i.services.cartesianScales.getRangeValue(m,y)},s),h=f[0],p=f[1],d=h(e,r),g=p(e,r);if(c&&u)return g<=c.scaleValue&&d>=u.scaleValue;if(c)return g<=c.scaleValue;if(u)return d>=u.scaleValue},n.prototype.styleCircles=function(e,r){var i=this,a=this.getOptions(),o=a.points,s=o.filled,l=o.fillOpacity,u=this.services,c=u.cartesianScales;u.transitions;var f=a.data.groupMapsTo,h=function(v,_){return c.getDomainValue(v,_)},p=function(v,_){return c.getRangeValue(v,_)},d=He(h,p,c.getOrientation()),g=d[0],m=d[1],y=this.configs.fadeInOnChartHolderMouseover;e.raise().classed("dot",!0).attr("class",function(v){var _=c.getDomainIdentifier(v),E=i.model.getIsFilled(v[f],v[_],v,s),x=E?[J.FILL,J.STROKE]:[J.STROKE];return i.model.getColorClassName({classNameTypes:x,dataGroupName:v[f],originalClassName:"dot"})}).classed("threshold-anomaly",function(v,_){return i.isDatapointThresholdAnomaly(v,_)}).classed("filled",function(v){var _=c.getDomainIdentifier(v);return i.model.getIsFilled(v[f],v[_],v,s)}).classed("unfilled",function(v){var _=c.getDomainIdentifier(v);return!i.model.getIsFilled(v[f],v[_],v,s)}).transition().call(function(v){return i.services.transitions.setupTransition({transition:v,name:"scatter-update-enter",animate:r})}).attr("cx",g).attr("cy",m).attr("r",a.points.radius).style("fill",function(v){var _=c.getDomainIdentifier(v);if(i.model.getIsFilled(v[f],v[_],v,s))return i.model.getFillColor(v[f],v[_],v)}).style("stroke",function(v){var _=c.getDomainIdentifier(v);return i.model.getStrokeColor(v[f],v[_],v)}).attr("fill-opacity",s?l:1).attr("opacity",y?0:1).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",function(v){var _=c.getRangeIdentifier(v);return v[_]}),this.addEventListeners()},n.prototype.getTooltipAdditionalItems=function(e){return null},n.prototype.addEventListeners=function(){var e=this,r=e.getOptions().data.groupMapsTo;this.parent.selectAll("circle").on("mouseover",function(i,a){var o=B(this);o.classed("hovered",!0).attr("class",function(s){return e.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:s[r],originalClassName:o.attr("class")})}).style("fill",function(s){var l=e.services.cartesianScales.getDomainIdentifier(s);return e.model.getFillColor(s[r],s[l],s)}).classed("unfilled",!1),e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:i,hoveredElement:o,data:[a],additionalItems:e.getTooltipAdditionalItems(a)}),e.services.events.dispatchEvent(M.Scatter.SCATTER_MOUSEOVER,{event:i,element:o,datum:a})}).on("mousemove",function(i,a){var o=B(this);e.services.events.dispatchEvent(M.Scatter.SCATTER_MOUSEMOVE,{event:i,element:o,datum:a}),e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:i})}).on("click",function(i,a){e.services.events.dispatchEvent(M.Scatter.SCATTER_CLICK,{event:i,element:B(this),datum:a})}).on("mouseout",function(i,a){var o=B(this);if(o.classed("hovered",!1),!e.configs.filled){var s=e.getOptions().points.filled,l=e.services.cartesianScales.getDomainIdentifier(a),u=e.model.getIsFilled(a[r],a[l],a,s);o.classed("unfilled",!u).style("fill",function(c){return u||s?e.model.getFillColor(c[r],c[l],c):null})}e.services.events.dispatchEvent(M.Scatter.SCATTER_MOUSEOUT,{event:i,element:o,datum:a}),e.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:o})})},n.prototype.destroy=function(){this.parent.selectAll("circle").on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),e.removeEventListener(M.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.removeEventListener(M.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)},n}(ct),N2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),B2=function(t){N2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="bubble",e.renderType=Q.SVG,e}return n.prototype.getRadiusScale=function(e){var r=this.getOptions(),i=r.bubble.radiusMapsTo,a=e.data(),o=a.map(function(c){return c[i]}).filter(function(c){return c}),s=U.getHTMLElementSize(this.services.domUtils.getMainContainer()),l=o.length>0,u=l?we(o):[1,1];return Ce().domain(u).range(l?r.bubble.radiusRange(s,a):[4,4])},n.prototype.styleCircles=function(e,r){var i=this,a=this.getOptions(),o=a.bubble.radiusMapsTo,s=this.getRadiusScale(e),l=a.data.groupMapsTo,u=this.services.cartesianScales,c=function(g,m){return u.getDomainValue(g,m)},f=function(g,m){return u.getRangeValue(g,m)},h=He(c,f,u.getOrientation()),p=h[0],d=h[1];e.raise().classed("dot",!0).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-label",function(g){var m=u.getRangeIdentifier(g);return g[m]}).transition().call(function(g){return i.services.transitions.setupTransition({transition:g,name:"bubble-update-enter",animate:r})}).attr("cx",p).attr("cy",d).attr("r",function(g){return s(g[o]||1)}).attr("class",function(g){return i.model.getColorClassName({classNameTypes:[J.FILL,J.STROKE],dataGroupName:g[l],originalClassName:"dot"})}).style("fill",function(g){var m=i.services.cartesianScales.getDomainIdentifier(g);return i.model.getFillColor(g[l],g[m],g)}).style("stroke",function(g){var m=i.services.cartesianScales.getDomainIdentifier(g);return i.model.getStrokeColor(g[l],g[m],g)}).attr("fill-opacity",a.bubble.fillOpacity).attr("opacity",1)},n.prototype.getTooltipAdditionalItems=function(e){var r=b(this.getOptions(),"bubble");return[{label:b(r,"radiusLabel"),value:e[b(r,"radiusMapsTo")]}]},n}(Se),U2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$2=function(t){U2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="bullet",e.renderType=Q.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-simple-bar"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-simple-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.getOptions(),a=i.data.groupMapsTo,o=this.getComponentContainer({withinChartClip:!0}),s=this.model.getDisplayData(this.configs.groups),l=this.services.cartesianScales.getRangeScale(),u=this.services.cartesianScales.getRangeIdentifier(),c=l.range(),f=c[0],h=c[1],p=l.domain();p[0];var d=p[1],g=function(){var _=[];s.forEach(function(O){O.ranges?O.ranges.forEach(function(P,S){P!=null&&P<d&&_.push({datum:O,value:P,order:S+1})}):_.push({datum:O,order:1})});var E=U.appendOrSelect(o,"g.range-boxes").selectAll("path.range-box").data(_,function(O){return O[a]+"-"+O.order});E.exit().attr("opacity",0).remove();var x=E.enter().append("path").attr("opacity",0);x.merge(E).attr("class",function(O){return"range-box order-"+O.order}).transition().call(function(O){return r.services.transitions.setupTransition({transition:O,name:"bullet-range-box-update-enter",animate:e})}).attr("d",function(O,P){var S=16,A,I,w,N;return O.order===1?(A=r.services.cartesianScales.getDomainValue(O.datum,P)-S/2,I=A+S,w=h-2,N=f+1):(A=r.services.cartesianScales.getDomainValue(O.datum,P)-S/2,I=A+S,w=r.services.cartesianScales.getRangeValue(O.value,P),N=h),zt({x0:A,x1:I,y0:w,y1:N},r.services.cartesianScales.getOrientation())}).attr("opacity",1)},m=function(){var _=U.appendOrSelect(o,"g.bars").selectAll("path.bar").data(s,function(x){return x[a]});_.exit().attr("opacity",0).remove();var E=_.enter().append("path").attr("opacity",0);E.merge(_).classed("bar",!0).transition().call(function(x){return r.services.transitions.setupTransition({transition:x,name:"bullet-bar-update-enter",animate:e})}).attr("class",function(x){return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:x[a],originalClassName:"bar"})}).style("fill",function(x){return r.model.getFillColor(x[a])}).attr("d",function(x,O){var P=8,S=r.services.cartesianScales.getDomainValue(x,O)-P/2,A=S+P,I=r.services.cartesianScales.getRangeValue(0)+1,w=r.services.cartesianScales.getRangeValue(x,O);return zt({x0:S,x1:A,y0:I,y1:w},r.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",function(x){return x.value})},y=function(){var _=U.appendOrSelect(o,"g.markers").selectAll("path.marker").data(s.filter(function(x){return b(x,"marker")!==null}),function(x){return x[a]});_.exit().attr("opacity",0).remove();var E=_.enter().append("path").attr("opacity",0);E.merge(_).classed("marker",!0).transition().call(function(x){return r.services.transitions.setupTransition({transition:x,name:"bullet-marker-update-enter",animate:e})}).attr("d",function(x,O){var P=24,S=r.services.cartesianScales.getDomainValue(x,O)-P/2,A=S+P,I=r.services.cartesianScales.getRangeValue(x.marker,O),w=I;return zt({x0:S,x1:A,y0:I,y1:w},r.services.cartesianScales.getOrientation())}).attr("opacity",1)},v=function(){var _=[];s.filter(function(O){return b(O,"marker")!==null}).forEach(function(O){var P=O.marker,S=O[u];_=_.concat([{datum:O,value:P*.25,barValue:S},{datum:O,value:P*.5,barValue:S},{datum:O,value:P*.75,barValue:S}])});var E=U.appendOrSelect(o,"g.quartiles").selectAll("path.quartile").data(_,function(O){return O[a]});E.exit().attr("opacity",0).remove();var x=E.enter().append("path").attr("opacity",0);x.merge(E).attr("class",function(O){return"quartile "+(O.value<=O.barValue?"over-bar":"")}).transition().call(function(O){return r.services.transitions.setupTransition({transition:O,name:"bullet-quartile-update-enter",animate:e})}).attr("d",function(O,P){var S=O.datum,A=O.value,I=4;S.ranges&&S.ranges.indexOf(A)!==-1&&(I=8);var w=r.services.cartesianScales.getDomainValue(S,P)-I/2,N=w+I,T=r.services.cartesianScales.getRangeValue(A,P),R=T;return zt({x0:w,x1:N,y0:T,y1:R},r.services.cartesianScales.getOrientation())}).attr("opacity",1)};g(),m(),y(),v(),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this,r=this.getOptions(),i=r.data.groupMapsTo,a=this.services.cartesianScales.getRangeIdentifier();this.parent.selectAll("path.bar").on("mouseover",function(o,s){var l=B(this);l.classed("hovered",!0),e.services.events.dispatchEvent(M.Bar.BAR_MOUSEOVER,{event:o,element:l,datum:s});var u=b(r,"bullet","performanceAreaTitles"),c=e.model.getMatchingRangeIndexForDatapoint(s);e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:o,hoveredElement:l,items:[{label:r.tooltip.groupLabel||"Group",value:s[i],class:e.model.getColorClassName({classNameTypes:[J.TOOLTIP],dataGroupName:s[i]})},{label:"Value",value:s[a]},{label:"Target",value:s.marker},{label:"Percentage",value:Math.floor(s[a]/s.marker*100)+"%"},{label:"Performance",value:u[c]}]})}).on("mousemove",function(o,s){e.services.events.dispatchEvent(M.Bar.BAR_MOUSEMOVE,{event:o,element:B(this),datum:s}),e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:o})}).on("click",function(o,s){e.services.events.dispatchEvent(M.Bar.BAR_CLICK,{event:o,element:B(this),datum:s})}).on("mouseout",function(o,s){var l=B(this);l.classed("hovered",!1),e.services.events.dispatchEvent(M.Bar.BAR_MOUSEOUT,{event:o,element:l,datum:s}),e.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:l})})},n.prototype.destroy=function(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(ct),V2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),H2=function(t){V2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="histogram",e.renderType=Q.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions(),o=a.data.groupMapsTo;e.parent.selectAll("path.bar").transition("legend-hover-bar").call(function(s){return e.services.transitions.setupTransition({transition:s,name:"legend-hover-bar"})}).attr("opacity",function(s){return s[o]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.getComponentContainer(),a=this.model.getOptions(),o=a.groupIdentifier,s=a.data.groupMapsTo,l=this.model.getBinnedStackedData(),u=this.services.cartesianScales.getMainXScale(),c=i.selectAll("g.bars").data(l,function(h){return bt(h,"0."+s)});c.exit().attr("opacity",0).remove(),c.enter().append("g").classed("bars",!0).attr("role",nt.GROUP);var f=i.selectAll("g.bars").selectAll("path.bar").data(function(h){return h});f.exit().remove(),f.enter().append("path").merge(f).classed("bar",!0).attr(o,function(h,p){return p}).transition().call(function(h){return r.services.transitions.setupTransition({transition:h,name:"histogram-bar-update-enter",animate:e})}).attr("class",function(h){return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:h[s],originalClassName:"bar"})}).style("fill",function(h){return r.model.getFillColor(h[s])}).attr("d",function(h,p){var d=bt(h,"data");if(d){var g=u(d.x1)-u(d.x0)-1,m=r.services.cartesianScales.getDomainValue(d.x0,p),y=m+g,v=r.services.cartesianScales.getRangeValue(h[0],p),_=r.services.cartesianScales.getRangeValue(h[1],p);return Math.abs(_-v)>0&&Math.abs(_-v)>a.bars.dividerSize&&(r.services.cartesianScales.getOrientation()===Pt.VERTICAL?_+=1:_-=1),zt({x0:m,x1:y,y0:v,y1:_},r.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",function(h){return b(h,"data",h[s])}),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this.model.getOptions(),r=e.data.groupMapsTo,i=this;this.parent.selectAll("path.bar").on("mouseover",function(a,o){var s=B(this);s.classed("hovered",!0);var l=parseFloat(bt(o,"data.x0")),u=parseFloat(bt(o,"data.x1")),c=i.services.cartesianScales.getRangeAxisPosition(),f=i.services.cartesianScales.getScaleLabel(c);i.services.events.dispatchEvent(M.Tooltip.SHOW,{event:a,hoveredElement:s,items:[{label:bt(e,"bins.rangeLabel")||"Range",value:l+" – "+u},{label:e.tooltip.groupLabel||"Group",value:o[r],class:i.model.getColorClassName({classNameTypes:[J.TOOLTIP],dataGroupName:o[r]})},{label:f,value:bt(o,"data."+o[r])}]})}).on("mousemove",function(a,o){i.services.events.dispatchEvent(M.Tooltip.MOVE,{event:a})}).on("mouseout",function(a,o){var s=B(this);s.classed("hovered",!1),i.services.events.dispatchEvent(M.Tooltip.HIDE)})},n.prototype.destroy=function(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(ct),F2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lr=function(t){F2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="line",e.renderType=Q.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement;e.parent.selectAll("path.line").transition("legend-hover-line").call(function(a){return e.services.transitions.setupTransition({transition:a,name:"legend-hover-line"})}).attr("opacity",function(a){return a.name!==i.datum().name?be.opacity.unselected:be.opacity.selected})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.line").transition("legend-mouseout-line").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-line"})}).attr("opacity",be.opacity.selected)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.getComponentContainer({withinChartClip:!0}),a=this.services,o=a.cartesianScales,s=a.curves,l=function(x,O){return o.getDomainValue(x,O)},u=function(x,O){return o.getRangeValue(x,O)},c=He(l,u,o.getOrientation()),f=c[0],h=c[1],p=this.getOptions(),d=So().x(f).y(h).curve(s.getD3Curve()).defined(function(x,O){var P=o.getRangeIdentifier(x),S=x[P];return S!=null}),g=[];if(this.configs.stacked){var m=Object.keys(p.axes).some(function(x){return p.axes[x].percentage}),y=p.data.groupMapsTo,v=this.model.getStackedData({groups:this.configs.groups,percentage:m});g=v.map(function(x){var O=r.services.cartesianScales.getDomainIdentifier(x),P=r.services.cartesianScales.getRangeIdentifier(x);return{name:b(x,0,y),data:x.map(function(S){var A;return A={},A[O]=S.data.sharedStackKey,A[y]=S[y],A[P]=S[1],A}),hidden:!Fb(x,function(S){return S[0]!==S[1]})}})}else g=this.model.getGroupedData(this.configs.groups);var _=i.selectAll("path.line").data(g,function(x){return x.name});_.exit().attr("opacity",0).remove();var E=_.enter().append("path").classed("line",!0).attr("opacity",0);E.merge(_).data(g,function(x){return x.name}).attr("class",function(x){return r.model.getColorClassName({classNameTypes:[J.STROKE],dataGroupName:x.name,originalClassName:"line"})}).style("stroke",function(x){return r.model.getStrokeColor(x.name)}).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",function(x){var O=x.data;return O.map(function(P){var S=r.services.cartesianScales.getRangeIdentifier(P);return P[S]}).join(",")}).transition().call(function(x){return r.services.transitions.setupTransition({transition:x,name:"line-update-enter",animate:e})}).attr("opacity",function(x){return x.hidden?0:1}).attr("d",function(x){var O=x.data;return d(O)})},n.prototype.destroy=function(){var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(ct),G2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),z2=function(t){G2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="lollipop",e.renderType=Q.SVG,e.handleScatterOnHover=function(r){var i=r.detail,a=e.getOptions(),o=a.data.groupMapsTo;e.parent.selectAll("line.line").attr("stroke-width",function(s){return s[o]!==i.datum[o]?be.weight.unselected:be.weight.selected})},e.handleScatterOnMouseOut=function(r){e.parent.selectAll("line.line").attr("stroke-width",be.weight.unselected)},e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions(),o=a.data.groupMapsTo;e.parent.selectAll("line.line").transition("legend-hover-line").call(function(s){return e.services.transitions.setupTransition({transition:s,name:"legend-hover-line"})}).attr("opacity",function(s){return s[o]!==i.datum().name?be.opacity.unselected:be.opacity.selected})},e.handleLegendMouseOut=function(r){e.parent.selectAll("line.line").transition("legend-mouseout-line").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-line"})}).attr("opacity",be.opacity.selected)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.getComponentContainer({withinChartClip:!0}),a=this.model.getOptions(),o=a.data.groupMapsTo,s=this.services.cartesianScales,l=s.getMainXScale(),u=s.getMainYScale(),c=s.getDomainIdentifier(),f=function(E,x){return s.getDomainValue(E,x)},h=function(E,x){return s.getRangeValue(E,x)},p=s.getOrientation(),d=He(f,h,p),g=d[0],m=d[1],y=i.selectAll("line.line").data(this.getScatterData(),function(E){return E[o]+"-"+E[c]});y.exit().attr("opacity",0).remove();var v=y.enter().append("line").attr("opacity",0),_=v.merge(y).classed("line",!0).attr("class",function(E){return r.model.getColorClassName({classNameTypes:[J.STROKE],dataGroupName:E[o],originalClassName:"line"})}).transition().call(function(E){return r.services.transitions.setupTransition({transition:E,name:"lollipop-line-update-enter",animate:e})}).style("stroke",function(E){return r.model.getFillColor(E[o],E[c],E)}).attr("opacity",1);p===Pt.HORIZONTAL?_.attr("y1",m).attr("y2",m).attr("x1",l.range()[0]).attr("x2",function(E,x){return g(E,x)-a.points.radius}):_.attr("x1",g).attr("x2",g).attr("y1",u.range()[0]).attr("y2",function(E,x){return m(E,x)+a.points.radius}),this.addScatterPointEventListeners()},n.prototype.addScatterPointEventListeners=function(){this.services.events.addEventListener(M.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),this.services.events.addEventListener(M.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)},n.prototype.destroy=function(){var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),e.removeEventListener(M.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),e.removeEventListener(M.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)},n}(Se),W2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ev=function(t){W2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="scatter-stacked",e.renderType=Q.SVG,e}return n.prototype.render=function(e){var r=this,i=b(this.getOptions(),"points","enabled");if(i){var a=this.getComponentContainer({withinChartClip:!0}),o=this.getOptions(),s=o.data.groupMapsTo,l=Object.keys(o.axes).some(function(g){return o.axes[g].percentage}),u=this.model.getStackedData({groups:this.configs.groups,percentage:l}),c=a.selectAll("g.dots").data(u,function(g){return b(g,0,s)});c.exit().attr("opacity",0).remove();var f=c.enter().append("g").classed("dots",!0).attr("role",nt.GROUP),h=f.merge(c).selectAll("circle.dot").data(function(g){return g});h.exit().attr("opacity",0).remove();var p=h.enter().append("circle").classed("dot",!0).attr("opacity",0),d=p.merge(h).datum(function(g){var m,y=g[s],v=r.services.cartesianScales.getDomainIdentifier(g),_=r.services.cartesianScales.getRangeIdentifier(g);return m={},m[s]=y,m[v]=g.data.sharedStackKey,m[_]=g[1],m});this.styleCircles(d,e),this.addEventListeners()}},n.prototype.getTooltipData=function(e,r){var i=this,a=this.getOptions(),o=a.data.groupMapsTo,s=Object.keys(a.axes).some(function(c){return a.axes[c].percentage}),l=this.model.getStackedData({groups:this.configs.groups,percentage:s}),u=[];return l.forEach(function(c,f){c.forEach(function(h,p){var d,g=h[o],m=h.data.sharedStackKey,y=h.data[g],v=h[1],_=i.services.cartesianScales.getDomainIdentifier(h),E=i.services.cartesianScales.getRangeIdentifier(h);y!=null&&e===i.services.cartesianScales.getDomainValue(m)&&r===i.services.cartesianScales.getRangeValue(v)&&(s&&(y=i.model.getStackedData({groups:i.configs.groups})[f][p].data[g]),y!==null&&u.push((d={},d[o]=g,d[_]=m,d[E]=y,d)))})}),this.model.getDisplayData(this.configs.groups).filter(function(c){var f=i.services.cartesianScales.getDomainIdentifier(c),h=i.services.cartesianScales.getRangeIdentifier(c);return u.find(function(p){return p[o]==c[o]&&p[f]==c[f]&&p[h]==c[h]})!==void 0})},n}(Se),j2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();function q2(t,n){var e=this,r=ki(this._current,t);return function(i){return e._current=r(i),n(e._current)}}var Sv=function(t){j2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="pie",e.renderType=Q.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("path.slice").transition("legend-hover-bar").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-bar"})}).attr("opacity",function(o){return o.data[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.slice").transition("legend-mouseout-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.getInnerRadius=function(){return yt.innerRadius},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this,a=this.getComponentContainer(),o=this.getOptions(),s=o.data.groupMapsTo,l=o.pie.valueMapsTo,u=this.model.getDisplayData().filter(function(R){return R[l]>0}),c=this.computeRadius();this.arc=yi().innerRadius(this.getInnerRadius()).outerRadius(c),this.hoverArc=yi().innerRadius(this.getInnerRadius()).outerRadius(c+yt.hoverArc.outerRadiusOffset);var f=sM().value(function(R){return R[l]}).sort(b(o,"pie","sortFunction")).padAngle(yt.padAngle),h=f(u),p=U.appendOrSelect(a,"g.slices").attr("role",nt.GROUP).attr("data-name","slices"),d=p.selectAll("path.slice").data(h,function(R){return R.data[s]});d.exit().attr("opacity",0).remove();var g=d.enter().append("path").classed("slice",!0).attr("opacity",0),m=g.merge(d).attr("class",function(R){return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:R.data[s],originalClassName:"slice"})}).style("fill",function(R){return i.model.getFillColor(R.data[s])}).attr("d",this.arc);m.transition().call(function(R){return r.services.transitions.setupTransition({transition:R,name:"pie_slice_enter_update",animate:e})}).attr("opacity",1).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","slice").attr("aria-label",function(R){return R[l]+", "+(Uc(R.data[l],u,l)+"%")}).attrTween("d",function(R){return q2.bind(this)(R,i.arc)});var y=o.pie.labels.enabled,v=y?h.filter(function(R){return R.data[l]>0}):[],_=U.appendOrSelect(a,"g.labels").attr("role",nt.GROUP).attr("data-name","labels"),E=_.selectAll("text.pie-label").data(v,function(R){return R.data[s]});E.exit().attr("opacity",0).remove();var x=E.enter().append("text").classed("pie-label",!0),O=[];x.merge(E).style("text-anchor","middle").text(function(R){return o.pie.labels.formatter?o.pie.labels.formatter(R):Uc(R.data[l],u,l)+"%"}).datum(function(R){var C=c+7,D=(R.endAngle-R.startAngle)/2+R.startAngle,k=D/Math.PI*180,$=this.getComputedTextLength();return R.textOffsetX=$/2,R.textOffsetY=k>90&&k<270?10:0,R.xPosition=(R.textOffsetX+C)*Math.sin(D),R.yPosition=(R.textOffsetY+C)*-Math.cos(D),R}).attr("transform",function(R,C){var D=v.length,k=(R.endAngle-R.startAngle)*(180/Math.PI);if(C>=D-2&&k<yt.callout.minSliceDegree){var $=void 0,L=void 0;return R.index===D-1?($=R.xPosition+yt.callout.offsetX+yt.callout.textMargin+R.textOffsetX,L=R.yPosition-yt.callout.offsetY,R.direction=Zr.RIGHT,O.push(R)):($=R.xPosition-yt.callout.offsetX-R.textOffsetX-yt.callout.textMargin,L=R.yPosition-yt.callout.offsetY,R.direction=Zr.LEFT,O.push(R)),"translate("+$+", "+L+")"}return"translate("+R.xPosition+", "+R.yPosition+")"}),this.renderCallouts(O);var P=b(o,"donut")?"donut":"pie",S=b(o,P,"alignment"),A=U.getSVGElementSize(this.getParent(),{useAttrs:!0}).width,I=y?yt.xOffset:0,w=y?yt.yOffset:0,N=c+I;S===Lt.CENTER?N=A/2:S===Lt.RIGHT&&(N=A-c-yt.xOffset);var T=c+w;O.length>0&&(T+=yt.yOffsetCallout),a.attr("x",N+7).attr("y",T),this.addEventListeners()},n.prototype.renderCallouts=function(e){var r=U.appendOrSelect(this.getComponentContainer(),"g.callouts").attr("role",nt.GROUP).attr("data-name","callouts"),i=r.selectAll("g.callout").data(e);i.exit().remove();var a=i.enter().append("g").classed("callout",!0).attr("role",nt.GROUP).attr("aria-roledescription","label callout");a.merge(i).datum(function(l){var u=l.xPosition,c=l.yPosition,f=l.direction;return f===Zr.RIGHT?(l.startPos={x:u,y:c+l.textOffsetY},l.endPos={x:u+yt.callout.offsetX,y:c-yt.callout.offsetY+l.textOffsetY},l.intersectPointX=l.endPos.x-yt.callout.horizontalLineLength):(l.startPos={x:u,y:c+l.textOffsetY},l.endPos={x:u-yt.callout.offsetX,y:c-yt.callout.offsetY+l.textOffsetY},l.intersectPointX=l.endPos.x+yt.callout.horizontalLineLength),l});var o=a.append("line").classed("vertical-line",!0);o.merge(r.selectAll("line.vertical-line")).datum(function(l){return B(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",function(l){return l.startPos.x}).attr("y1",function(l){return l.startPos.y}).attr("x2",function(l){return l.intersectPointX}).attr("y2",function(l){return l.endPos.y});var s=a.append("line").classed("horizontal-line",!0);s.merge(r.selectAll("line.horizontal-line")).datum(function(l){return B(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",function(l){return l.intersectPointX}).attr("y1",function(l){return l.endPos.y}).attr("x2",function(l){return l.endPos.x}).attr("y2",function(l){return l.endPos.y})},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("path.slice").on("mouseover",function(r,i){var a=B(this);a.classed("hovered",!0).transition("pie_slice_mouseover").call(function(l){return e.services.transitions.setupTransition({transition:l,name:"pie_slice_mouseover"})}).attr("d",e.hoverArc),e.services.events.dispatchEvent(M.Pie.SLICE_MOUSEOVER,{event:r,element:B(this),datum:i});var o=e.getOptions().data.groupMapsTo,s=e.getOptions().pie.valueMapsTo;e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:r,hoveredElement:a,items:[{label:i.data[o],value:i.data[s]}]})}).on("mousemove",function(r,i){var a=B(this);e.services.events.dispatchEvent(M.Pie.SLICE_MOUSEMOVE,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(M.Pie.SLICE_CLICK,{event:r,element:B(this),datum:i})}).on("mouseout",function(r,i){var a=B(this);a.classed("hovered",!1).transition("pie_slice_mouseout").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"pie_slice_mouseout"})}).attr("d",e.arc),e.services.events.dispatchEvent(M.Pie.SLICE_MOUSEOUT,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:a})})},n.prototype.computeRadius=function(){var e=U.getSVGElementSize(this.parent,{useAttrs:!0}),r=e.width,i=e.height,a=this.getOptions(),o=Math.min(r,i)/2,s=a.pie.labels.enabled;return s?o+yt.radiusOffset:o},n}(ct),Y2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kf="4,10 8,6 12,10",Qf="12,6 8,10 4,6",X2=function(t){Y2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="gauge",e.renderType=Q.SVG,e}return n.prototype.getValue=function(){var e,r,i=this.model.getData(),a=(r=(e=i.find(function(o){return o.group==="value"}))===null||e===void 0?void 0:e.value,r??null);return a},n.prototype.getValueRatio=function(){var e=Dd(this.getValue(),0,100);return e/100},n.prototype.getDelta=function(){var e,r,i=this.model.getData(),a=(r=(e=i.find(function(o){return o.group==="delta"}))===null||e===void 0?void 0:e.value,r??null);return a},n.prototype.getArcRatio=function(){var e=this.getOptions(),r=b(e,"gauge","type"),i=r===bn.FULL?1:.5;return i},n.prototype.getArcSize=function(){return this.getArcRatio()*Math.PI*2},n.prototype.getStartAngle=function(){var e=this.getArcSize();return e===2*Math.PI?0:-e/2},n.prototype.getArrow=function(e){var r=this.getOptions(),i=b(r,"gauge","deltaArrow","direction");switch(i){case ga.UP:return Kf;case ga.DOWN:return Qf;default:return e>0?Kf:Qf}},n.prototype.render=function(e){var r=this,i=this.getComponentContainer().attr("width","100%").attr("height","100%"),a=this.getOptions(),o=this.getValue(),s=this.getValueRatio(),l=this.getArcSize(),u=this.getStartAngle(),c=s*l,f=u+c,h=u+l,p=this.computeRadius(),d=this.getInnerRadius();this.backgroundArc=yi().innerRadius(d).outerRadius(p).startAngle(f).endAngle(h),this.arc=yi().innerRadius(d).outerRadius(p).startAngle(u).endAngle(f),U.appendOrSelect(i,"path.arc-background").attr("d",this.backgroundArc);var g=i.selectAll("path.arc-foreground").data([o]),m=g.enter().append("path");m.merge(g).attr("class",this.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:"value",originalClassName:"arc-foreground"})).style("fill",function(E){return b(r.getOptions(),"color","scale","value")}).attr("d",this.arc).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",function(E){return E}),this.drawValueNumber(),this.drawDelta(),g.exit().remove();var y=b(a,"gauge","alignment"),v=U.getSVGElementSize(this.getParent(),{useAttrs:!0}).width,_=p;y===Lt.CENTER?_=v/2:y===Lt.RIGHT&&(_=v-p),i.attr("x",_).attr("y",p),this.addEventListeners()},n.prototype.drawValueNumber=function(){var e=this.getComponentContainer(),r=this.getOptions(),i=b(r,"gauge","type"),a=this.getValue(),o=this.getDelta(),s=this.computeRadius(),l=b(r,"gauge","valueFontSize"),u=b(r,"gauge","deltaFontSize"),c=b(r,"gauge","numberSpacing"),f=b(r,"gauge","showPercentageSymbol"),h=0;i===bn.FULL&&!o?h=u(s):i===bn.SEMI&&o&&(h=-(u(s)+c));var p=U.appendOrSelect(e,"g.gauge-numbers").attr("transform","translate(0, "+h+")"),d=l(s),g=U.appendOrSelect(p,"g.gauge-value-number"),m=b(r,"gauge","numberFormatter"),y=g.selectAll("text.gauge-value-number").data([a]);y.enter().append("text").attr("class","gauge-value-number").merge(y).style("font-size",d+"px").attr("text-anchor","middle").text(function(A){return m(A)});var v=U.getSVGElementSize(U.appendOrSelect(e,"text.gauge-value-number"),{useBBox:!0}).width,_=d/2,E=f?"%":"",x=U.appendOrSelect(g,"text.gauge-value-symbol").style("font-size",_+"px").attr("x",v/2).text(E),O=U.getSVGElementSize(x,{useBBox:!0}),P=O.width,S=O.height;x.attr("y","-"+S/2+"px"),g.attr("transform","translate(-"+P/2+", 0)")},n.prototype.drawDelta=function(){var e=this,r=this.getComponentContainer(),i=this.getOptions(),a=this.getDelta();if(a){var s=this.computeRadius(),l=a?b(i,"gauge","deltaFontSize"):function(){return 0},u=a?b(i,"gauge","numberFormatter"):function(){return null},c=b(i,"gauge","deltaArrow","size"),f=b(i,"gauge","numberSpacing"),h=b(i,"gauge","showPercentageSymbol"),p=U.appendOrSelect(r,"g.gauge-numbers"),o=U.appendOrSelect(p,"g.gauge-delta").attr("transform","translate(0, "+(l(s)+f)+")"),d=U.appendOrSelect(o,"text.gauge-delta-number"),g=h?"%":"";d.data(a===null?[]:[a]),d.enter().append("text").classed("gauge-delta-number",!0).merge(d).attr("text-anchor","middle").style("font-size",l(s)+"px").text(function(E){return""+u(E)+g});var m=U.getSVGElementSize(U.appendOrSelect(r,".gauge-delta-number"),{useBBox:!0}).width,y=b(i,"gauge","deltaArrow","enabled"),v=o.selectAll("svg.gauge-delta-arrow").data(a!==null&&y?[a]:[]);v.enter().append("svg").merge(v).attr("class","gauge-delta-arrow").attr("x",-c(s)-m/2).attr("y",-c(s)/2-l(s)*.35).attr("width",c(s)).attr("height",c(s)).attr("viewBox","0 0 16 16").each(function(){var E=B(this);U.appendOrSelect(E,"rect.gauge-delta-arrow-backdrop").attr("width","16").attr("height","16").attr("fill","none");var x=b(i,"gauge","status");U.appendOrSelect(E,"polygon.gauge-delta-arrow").attr("class",x!==null?"gauge-delta-arrow status--"+x:"").attr("points",e.getArrow(a))}),v.exit().remove(),d.exit().remove()}else{var o=r.select("g.gauge-delta");o.empty()||o.remove()}},n.prototype.getInnerRadius=function(){var e=this.computeRadius(),r=b(this.getOptions(),"gauge","arcWidth");return e-r},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("path.arc-foreground").on("mouseover",function(r,i){e.services.events.dispatchEvent(M.Gauge.ARC_MOUSEOVER,{event:r,element:B(this),datum:i})}).on("mousemove",function(r,i){var a=B(this);e.services.events.dispatchEvent(M.Gauge.ARC_MOUSEMOVE,{event:r,element:a,datum:i})}).on("click",function(r,i){e.services.events.dispatchEvent(M.Gauge.ARC_CLICK,{event:r,element:B(this),datum:i})}).on("mouseout",function(r,i){var a=B(this);e.services.events.dispatchEvent(M.Gauge.ARC_MOUSEOUT,{event:r,element:a,datum:i})})},n.prototype.computeRadius=function(){var e=this.getOptions(),r=b(e,"gauge","type"),i=U.getSVGElementSize(this.parent,{useAttrs:!0}),a=i.width,o=i.height,s=r===bn.SEMI?Math.min(a/2,o):Math.min(a/2,o/2);return s},n}(ct),Z2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),K2=function(t){Z2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="donut",e.renderType=Q.SVG,e}return n.prototype.render=function(e){var r=this;e===void 0&&(e=!0),t.prototype.render.call(this,e);var i=this;if(this.model.isDataEmpty()){this.getComponentContainer().select("g.center").remove();return}var a=U.appendOrSelect(this.getComponentContainer(),"g.center"),o=this.getOptions(),s=this.computeRadius(),l=b(o,"donut","center","label");U.appendOrSelect(a,"text.donut-figure").attr("text-anchor","middle").style("dominant-baseline",function(){return l===null||l===""?"central":"initial"}).style("font-size",function(){return o.donut.center.numberFontSize(s)}).transition().call(function(u){return r.services.transitions.setupTransition({transition:u,name:"donut-figure-enter-update",animate:e})}).tween("text",function(){return i.centerNumberTween(B(this))}),l!==null&&l!==""&&U.appendOrSelect(a,"text.donut-title").attr("text-anchor","middle").style("font-size",function(){return o.donut.center.titleFontSize(s)}).attr("y",o.donut.center.titleYPosition(s)).text(l)},n.prototype.getInnerRadius=function(){var e=this.computeRadius();return e*(3/4)},n.prototype.centerNumberTween=function(e){var r=this.getOptions(),i=b(r,"donut","center","number");i===null&&(i=this.model.getDisplayData().reduce(function(l,u){return l+u[r.pie.valueMapsTo]},0));var a=parseInt(e.text().replace(/[, ]+/g,""),10)||0,o;a%1===0&&i%1===0?o=Tp:o=te;var s=o(a,i);return function(l){var u=r.donut.center.numberFormatter;e.text(u(s(l)))}},n}(Sv),Q2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qt=function(t){Q2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="skeleton",e}return n.prototype.render=function(){var e=b(this.getOptions(),"data","loading");e?this.renderSkeleton(e):this.removeSkeleton()},n.prototype.renderSkeleton=function(e){if(this.configs.skeleton===Dt.GRID)this.renderGridSkeleton(e);else if(this.configs.skeleton===Dt.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(e);else if(this.configs.skeleton===Dt.PIE)this.renderPieSkeleton(e);else if(this.configs.skeleton===Dt.DONUT)this.renderDonutSkeleton(e);else throw new Error('"'+this.configs.skeleton+'" is not a valid Skeleton type.')},n.prototype.renderGridSkeleton=function(e){this.setScales(),this.drawBackdrop(e),this.drawXGrid(e),this.drawYGrid(e),e&&this.setShimmerEffect("shimmer-lines")},n.prototype.renderVertOrHorizSkeleton=function(e){var r=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(e),r===Pt.VERTICAL&&this.drawYGrid(e),r===Pt.HORIZONTAL&&this.drawXGrid(e),this.setShimmerEffect("shimmer-lines")},n.prototype.renderPieSkeleton=function(e){var r=this.computeOuterRadius(),i=0;this.drawRing(r,i,e),e&&this.setShimmerEffect("shimmer-areas")},n.prototype.renderDonutSkeleton=function(e){var r=this.computeOuterRadius(),i=this.computeInnerRadius();this.drawRing(r,i,e),e&&this.setShimmerEffect("shimmer-areas")},n.prototype.setScales=function(){var e=this.services.cartesianScales.getMainXScale().range(),r=this.services.cartesianScales.getMainYScale().range();this.xScale=Ce().domain([0,1]).range(e),this.yScale=Ce().domain([0,1]).range(r)},n.prototype.drawBackdrop=function(e){var r=this.parent,i=U.getSVGElementSize(r,{useAttrs:!0}),a=i.width,o=i.height;this.backdrop=U.appendOrSelect(r,"svg.chart-skeleton.DAII").attr("width",a).attr("height",o);var s=U.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");s.attr("width","100%").attr("height","100%");var l=this.xScale.range(),u=l[0];l[1];var c=this.yScale.range();c[0];var f=c[1];this.backdrop.merge(s).attr("x",u).attr("y",f),s.classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null)},n.prototype.drawXGrid=function(e){var r=this.backdrop.attr("width"),i=b(this.getOptions(),"grid","x","numberOfTicks"),a=this.xScale.ticks(i).map(function(l){return l*r}),o=U.appendOrSelect(this.backdrop,"g.x.skeleton"),s=o.selectAll("line").data(a);s.enter().append("line").merge(s).attr("x1",function(l){return l}).attr("x2",function(l){return l}).attr("y1",0).attr("y2","100%"),o.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null)},n.prototype.drawYGrid=function(e){var r=this.backdrop.attr("height"),i=this.backdrop.attr("width"),a=b(this.getOptions(),"grid","y","numberOfTicks"),o=this.xScale.ticks(a).map(function(u){return u*r}),s=U.appendOrSelect(this.backdrop,"g.y.skeleton"),l=s.selectAll("line").data(o);l.enter().append("line").merge(l).attr("x1",0).attr("x2",i).attr("y1",function(u){return u}).attr("y2",function(u){return u}),s.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null)},n.prototype.drawRing=function(e,r,i){i===void 0&&(i=!0);var a=this.parent,o=U.getSVGElementSize(a,{useAttrs:!0}),s=o.width,l=o.height,u=U.appendOrSelect(a,"svg.chart-skeleton").attr("width",s).attr("height",l),c=r===0?"pie":"donut",f=b(this.getOptions(),c,"alignment");U.appendOrSelect(u,"rect.chart-skeleton-area-container").attr("width",s).attr("height",l).attr("fill","none");var h=yi().innerRadius(r).outerRadius(e).startAngle(0).endAngle(Math.PI*2),p=e+Math.abs(yt.radiusOffset),d=e+(Math.min(s,l)-e*2)/2,g=U.appendOrSelect(u,"path").attr("class","skeleton-area-shape").attr("transform","translate("+p+", "+d+")").attr("d",h).classed("shimmer-effect-areas",i).classed("empty-state-areas",!i).style("fill",i?"url(#"+this.services.domUtils.generateElementIDString("shimmer-areas")+")":null),m=e+yt.xOffset;f===Lt.CENTER?m=s/2:f===Lt.RIGHT&&(m=s-e-yt.xOffset);var y=e+yt.yOffset;g.attr("transform","translate("+m+", "+y+")")},n.prototype.computeOuterRadius=function(){var e=U.getSVGElementSize(this.parent,{useAttrs:!0}),r=e.width,i=e.height,a=Math.min(r,i)/2;return a+yt.radiusOffset},n.prototype.computeInnerRadius=function(){return this.computeOuterRadius()*(3/4)},n.prototype.setShimmerEffect=function(e){var r=2e3,i=1e3,a=.2,o="stop-bg-shimmer",s="stop-shimmer",l=this.parent.select(".chart-skeleton"),u=U.getSVGElementSize(this.parent,{useAttrs:!0}).width,c=0,f=u,h=U.appendOrSelect(l,"defs").lower(),p=U.appendOrSelect(h,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(e)).attr("class",e).attr("x1",c-3*a*u).attr("x2",f).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),d=`
			<stop class="`+o+'" offset="'+c+`"></stop>
			<stop class="`+s+'" offset="'+(c+a)+`"></stop>
			<stop class="`+o+'" offset="'+(c+2*a)+`"></stop>
		`;p.html(d),g();function g(){p.attr("gradientTransform","translate("+(c-3*a*u)+", 0)").transition().duration(r).delay(i).ease(yg).attr("gradientTransform","translate("+(f+3*a*u)+", 0)").on("end",g)}},n.prototype.removeSkeleton=function(){var e=this.parent.select(".chart-skeleton");e.remove()},n}(ct),J2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tL=function(t){J2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="skeleton-lines",e}return n.prototype.render=function(){var e=b(this.getOptions(),"data","loading"),r=!b(this.getOptions(),"grid","x","enabled")&&!b(this.getOptions(),"grid","y","enabled")&&!b(this.getOptions(),"axes","bottom","visible")&&!b(this.getOptions(),"axes","left","visible");e&&!r?t.prototype.renderGridSkeleton.call(this,e):e&&r?this.renderSparklineSkeleton(e):this.removeSkeleton()},n.prototype.renderSparklineSkeleton=function(e){this.setScales(),this.drawBackdrop(e),this.drawSparkline(e),this.updateBackdropStyle(),e&&this.setShimmerEffect("shimmer-lines")},n.prototype.drawSparkline=function(e){var r=this.backdrop.attr("width"),i=[100],a=U.appendOrSelect(this.backdrop,"g.y.skeleton"),o=a.selectAll("line").data(i);o.enter().append("line").merge(o).attr("x1",0).attr("x2",r).attr("y1",function(s){return s}).attr("y2",function(s){return s}),a.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null)},n.prototype.updateBackdropStyle=function(){var e=this.parent;this.backdrop=U.appendOrSelect(e,"svg.chart-skeleton.DAII");var r=U.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");r.classed("shimmer-effect-lines",!1).classed("shimmer-effect-sparkline",!0).style("stroke",null)},n}(qt);function eL(t,n){return t.parent===n.parent?1:2}function nL(t){return t.reduce(rL,0)/t.length}function rL(t,n){return t+n.x}function iL(t){return 1+t.reduce(aL,0)}function aL(t,n){return Math.max(t,n.y)}function oL(t){for(var n;n=t.children;)t=n[0];return t}function sL(t){for(var n;n=t.children;)t=n[n.length-1];return t}function lL(){var t=eL,n=1,e=1,r=!1;function i(a){var o,s=0;a.eachAfter(function(h){var p=h.children;p?(h.x=nL(p),h.y=iL(p)):(h.x=o?s+=t(h,o):0,h.y=0,o=h)});var l=oL(a),u=sL(a),c=l.x-t(l,u)/2,f=u.x+t(u,l)/2;return a.eachAfter(r?function(h){h.x=(h.x-a.x)*n,h.y=(a.y-h.y)*e}:function(h){h.x=(h.x-c)/(f-c)*n,h.y=(1-(a.y?h.y/a.y:1))*e})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,n=+a[0],e=+a[1],i):r?null:[n,e]},i.nodeSize=function(a){return arguments.length?(r=!0,n=+a[0],e=+a[1],i):r?[n,e]:null},i}function uL(t){var n=0,e=t.children,r=e&&e.length;if(!r)n=1;else for(;--r>=0;)n+=e[r].value;t.value=n}function cL(){return this.eachAfter(uL)}function fL(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this}function hL(t,n){for(var e=this,r=[e],i,a,o=-1;e=r.pop();)if(t.call(n,e,++o,this),i=e.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function dL(t,n){for(var e=this,r=[e],i=[],a,o,s,l=-1;e=r.pop();)if(i.push(e),a=e.children)for(o=0,s=a.length;o<s;++o)r.push(a[o]);for(;e=i.pop();)t.call(n,e,++l,this);return this}function pL(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r}function vL(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})}function gL(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function mL(t){for(var n=this,e=yL(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r}function yL(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function _L(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function xL(){return Array.from(this)}function bL(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function OL(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n}function*TL(){var t=this,n,e=[t],r,i,a;do for(n=e.reverse(),e=[];t=n.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)e.push(r[i]);while(e.length)}function Bi(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=SL)):n===void 0&&(n=EL);for(var e=new _i(t),r,i=[e],a,o,s,l;r=i.pop();)if((o=n(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new _i(o[s])),a.parent=r,a.depth=r.depth+1;return e.eachBefore(AL)}function wL(){return Bi(this).eachBefore(ML)}function EL(t){return t.children}function SL(t){return Array.isArray(t)?t[1]:null}function ML(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function AL(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function _i(t){this.data=t,this.depth=this.height=0,this.parent=null}_i.prototype=Bi.prototype={constructor:_i,count:cL,each:fL,eachAfter:dL,eachBefore:hL,find:pL,sum:vL,sort:gL,path:mL,ancestors:_L,descendants:xL,leaves:bL,links:OL,copy:wL,[Symbol.iterator]:TL};function CL(t){return t==null?null:Mv(t)}function Mv(t){if(typeof t!="function")throw new Error;return t}function xn(){return 0}function Xn(t){return function(){return t}}const DL=1664525,LL=1013904223,Jf=4294967296;function PL(){let t=1;return()=>(t=(DL*t+LL)%Jf)/Jf}function RL(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function IL(t,n){let e=t.length,r,i;for(;e;)i=n()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function kL(t,n){for(var e=0,r=(t=IL(Array.from(t),n)).length,i=[],a,o;e<r;)a=t[e],o&&Av(o,a)?++e:(o=BL(i=NL(i,a)),e=0);return o}function NL(t,n){var e,r;if(is(n,t))return[n];for(e=0;e<t.length;++e)if(Xi(n,t[e])&&is(Fr(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(Xi(Fr(t[e],t[r]),n)&&Xi(Fr(t[e],n),t[r])&&Xi(Fr(t[r],n),t[e])&&is(Cv(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function Xi(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function Av(t,n){var e=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function is(t,n){for(var e=0;e<n.length;++e)if(!Av(t,n[e]))return!1;return!0}function BL(t){switch(t.length){case 1:return UL(t[0]);case 2:return Fr(t[0],t[1]);case 3:return Cv(t[0],t[1],t[2])}}function UL(t){return{x:t.x,y:t.y,r:t.r}}function Fr(t,n){var e=t.x,r=t.y,i=t.r,a=n.x,o=n.y,s=n.r,l=a-e,u=o-r,c=s-i,f=Math.sqrt(l*l+u*u);return{x:(e+a+l/f*c)/2,y:(r+o+u/f*c)/2,r:(f+i+s)/2}}function Cv(t,n,e){var r=t.x,i=t.y,a=t.r,o=n.x,s=n.y,l=n.r,u=e.x,c=e.y,f=e.r,h=r-o,p=r-u,d=i-s,g=i-c,m=l-a,y=f-a,v=r*r+i*i-a*a,_=v-o*o-s*s+l*l,E=v-u*u-c*c+f*f,x=p*d-h*g,O=(d*E-g*_)/(x*2)-r,P=(g*m-d*y)/x,S=(p*_-h*E)/(x*2)-i,A=(h*y-p*m)/x,I=P*P+A*A-1,w=2*(a+O*P+S*A),N=O*O+S*S-a*a,T=-(Math.abs(I)>1e-6?(w+Math.sqrt(w*w-4*I*N))/(2*I):N/w);return{x:r+O+P*T,y:i+S+A*T,r:T}}function th(t,n,e){var r=t.x-n.x,i,a,o=t.y-n.y,s,l,u=r*r+o*o;u?(a=n.r+e.r,a*=a,l=t.r+e.r,l*=l,a>l?(i=(u+l-a)/(2*u),s=Math.sqrt(Math.max(0,l/u-i*i)),e.x=t.x-i*r-s*o,e.y=t.y-i*o+s*r):(i=(u+a-l)/(2*u),s=Math.sqrt(Math.max(0,a/u-i*i)),e.x=n.x+i*r-s*o,e.y=n.y+i*o+s*r)):(e.x=n.x+e.r,e.y=n.y)}function eh(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function nh(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,a=(n.y*e.r+e.y*n.r)/r;return i*i+a*a}function Zi(t){this._=t,this.next=null,this.previous=null}function $L(t,n){if(!(a=(t=RL(t)).length))return 0;var e,r,i,a,o,s,l,u,c,f,h;if(e=t[0],e.x=0,e.y=0,!(a>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(a>2))return e.r+r.r;th(r,e,i=t[2]),e=new Zi(e),r=new Zi(r),i=new Zi(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;t:for(l=3;l<a;++l){th(e._,r._,i=t[l]),i=new Zi(i),u=r.next,c=e.previous,f=r._.r,h=e._.r;do if(f<=h){if(eh(u._,i._)){r=u,e.next=r,r.previous=e,--l;continue t}f+=u._.r,u=u.next}else{if(eh(c._,i._)){e=c,e.next=r,r.previous=e,--l;continue t}h+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,o=nh(e);(i=i.next)!==r;)(s=nh(i))<o&&(e=i,o=s);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=kL(e,n),l=0;l<a;++l)e=t[l],e.x-=i.x,e.y-=i.y;return i.r}function VL(t){return Math.sqrt(t.value)}function HL(){var t=null,n=1,e=1,r=xn;function i(a){const o=PL();return a.x=n/2,a.y=e/2,t?a.eachBefore(rh(t)).eachAfter(as(r,.5,o)).eachBefore(ih(1)):a.eachBefore(rh(VL)).eachAfter(as(xn,1,o)).eachAfter(as(r,a.r/Math.min(n,e),o)).eachBefore(ih(Math.min(n,e)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=CL(a),i):t},i.size=function(a){return arguments.length?(n=+a[0],e=+a[1],i):[n,e]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:Xn(+a),i):r},i}function rh(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function as(t,n,e){return function(r){if(i=r.children){var i,a,o=i.length,s=t(r)*n||0,l;if(s)for(a=0;a<o;++a)i[a].r+=s;if(l=$L(i,e),s)for(a=0;a<o;++a)i[a].r-=s;r.r=l+s}}}function ih(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function FL(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function GL(t,n,e,r,i){for(var a=t.children,o,s=-1,l=a.length,u=t.value&&(r-n)/t.value;++s<l;)o=a[s],o.y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*u}function zL(t,n){return t.parent===n.parent?1:2}function os(t){var n=t.children;return n?n[0]:t.t}function ss(t){var n=t.children;return n?n[n.length-1]:t.t}function WL(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function jL(t){for(var n=0,e=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=n,a.m+=n,n+=a.s+(e+=a.c)}function qL(t,n,e){return t.a.parent===n.parent?t.a:e}function aa(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}aa.prototype=Object.create(_i.prototype);function YL(t){for(var n=new aa(t,0),e,r=[n],i,a,o,s;e=r.pop();)if(a=e._.children)for(e.children=new Array(s=a.length),o=s-1;o>=0;--o)r.push(i=e.children[o]=new aa(a[o],o)),i.parent=e;return(n.parent=new aa(null,0)).children=[n],n}function XL(){var t=zL,n=1,e=1,r=null;function i(u){var c=YL(u);if(c.eachAfter(a),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var f=u,h=u,p=u;u.eachBefore(function(v){v.x<f.x&&(f=v),v.x>h.x&&(h=v),v.depth>p.depth&&(p=v)});var d=f===h?1:t(f,h)/2,g=d-f.x,m=n/(h.x+d+g),y=e/(p.depth||1);u.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*y})}return u}function a(u){var c=u.children,f=u.parent.children,h=u.i?f[u.i-1]:null;if(c){jL(u);var p=(c[0].z+c[c.length-1].z)/2;h?(u.z=h.z+t(u._,h._),u.m=u.z-p):u.z=p}else h&&(u.z=h.z+t(u._,h._));u.parent.A=s(u,h,u.parent.A||f[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,c,f){if(c){for(var h=u,p=u,d=c,g=h.parent.children[0],m=h.m,y=p.m,v=d.m,_=g.m,E;d=ss(d),h=os(h),d&&h;)g=os(g),p=ss(p),p.a=u,E=d.z+v-h.z-m+t(d._,h._),E>0&&(WL(qL(d,u,f),u,E),m+=E,y+=E),v+=d.m,m+=h.m,_+=g.m,y+=p.m;d&&!ss(p)&&(p.t=d,p.m+=v-y),h&&!os(g)&&(g.t=h,g.m+=m-_,f=u)}return f}function l(u){u.x*=n,u.y=u.depth*e}return i.separation=function(u){return arguments.length?(t=u,i):t},i.size=function(u){return arguments.length?(r=!1,n=+u[0],e=+u[1],i):r?null:[n,e]},i.nodeSize=function(u){return arguments.length?(r=!0,n=+u[0],e=+u[1],i):r?[n,e]:null},i}function ZL(t,n,e,r,i){for(var a=t.children,o,s=-1,l=a.length,u=t.value&&(i-e)/t.value;++s<l;)o=a[s],o.x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*u}var KL=(1+Math.sqrt(5))/2;function QL(t,n,e,r,i,a){for(var o=[],s=n.children,l,u,c=0,f=0,h=s.length,p,d,g=n.value,m,y,v,_,E,x,O;c<h;){p=i-e,d=a-r;do m=s[f++].value;while(!m&&f<h);for(y=v=m,x=Math.max(d/p,p/d)/(g*t),O=m*m*x,E=Math.max(v/O,O/y);f<h;++f){if(m+=u=s[f].value,u<y&&(y=u),u>v&&(v=u),O=m*m*x,_=Math.max(v/O,O/y),_>E){m-=u;break}E=_}o.push(l={value:m,dice:p<d,children:s.slice(c,f)}),l.dice?GL(l,e,r,i,g?r+=d*m/g:a):ZL(l,e,r,g?e+=p*m/g:i,a),g-=m,c=f}return o}const JL=function t(n){function e(r,i,a,o,s){QL(n,r,i,a,o,s)}return e.ratio=function(r){return t((r=+r)>1?r:1)},e}(KL);function tP(){var t=JL,n=!1,e=1,r=1,i=[0],a=xn,o=xn,s=xn,l=xn,u=xn;function c(h){return h.x0=h.y0=0,h.x1=e,h.y1=r,h.eachBefore(f),i=[0],n&&h.eachBefore(FL),h}function f(h){var p=i[h.depth],d=h.x0+p,g=h.y0+p,m=h.x1-p,y=h.y1-p;m<d&&(d=m=(d+m)/2),y<g&&(g=y=(g+y)/2),h.x0=d,h.y0=g,h.x1=m,h.y1=y,h.children&&(p=i[h.depth+1]=a(h)/2,d+=u(h)-p,g+=o(h)-p,m-=s(h)-p,y-=l(h)-p,m<d&&(d=m=(d+m)/2),y<g&&(g=y=(g+y)/2),t(h,d,g,m,y))}return c.round=function(h){return arguments.length?(n=!!h,c):n},c.size=function(h){return arguments.length?(e=+h[0],r=+h[1],c):[e,r]},c.tile=function(h){return arguments.length?(t=Mv(h),c):t},c.padding=function(h){return arguments.length?c.paddingInner(h).paddingOuter(h):c.paddingInner()},c.paddingInner=function(h){return arguments.length?(a=typeof h=="function"?h:Xn(+h),c):a},c.paddingOuter=function(h){return arguments.length?c.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):c.paddingTop()},c.paddingTop=function(h){return arguments.length?(o=typeof h=="function"?h:Xn(+h),c):o},c.paddingRight=function(h){return arguments.length?(s=typeof h=="function"?h:Xn(+h),c):s},c.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:Xn(+h),c):l},c.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:Xn(+h),c):u},c}var eP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zn=6,nP=function(t){eP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="tree",e.renderType=Q.SVG,e}return n.prototype.getLongestLabel=function(e){var r=this,i="";return e.forEach(function(a){var o=a.children?r.getLongestLabel(a.children):"";(o.length>i.length||a.name.length>i.length)&&(i=o.length>a.name.length?o:a.name)}),i},n.prototype.getMockLabelWidth=function(e,r){var i=e.append("text").attr("dy","0.31em").attr("x",0).attr("text-anchor","end").text(r),a=U.getSVGElementSize(i.node(),{useBBox:!0}).width;return i.remove(),a},n.prototype.render=function(e){var r=this,i=this.getComponentContainer();i.html("");var a=U.getSVGElementSize(this.parent,{useAttrs:!0}),o=a.width,s=a.height;if(!(o<1||s<1)){var l=this.model.getOptions(),u=this.model.getDisplayData(),c=b(l,"tree","rootTitle")||"Tree",f=this.getMockLabelWidth(i,c),h=this.getLongestLabel(u),p=this.getMockLabelWidth(i,h),d={top:0,right:0,bottom:0,left:f>0?f+zn:30-zn},g=Bi({name:c,children:u}),m=10,y=o/6,v=function(A){var I=g.descendants().reverse(),w=g.links(),N=g,T=g;g.eachBefore(function(H){H.x<N.x&&(N=H),H.x>T.x&&(T=H)});var R=T.x-N.x,C=i.transition().call(function(H){return r.services.transitions.setupTransition({transition:H,name:"tree-update-viewbox",animate:!0})}).attr("viewBox",[-d.left,N.x,o,R]),D=S.selectAll("g").data(I,function(H){return H.id}),k=r,$=D.enter().append("g").attr("transform",function(){return"translate("+A.y0+","+A.x0+")"}).attr("class",function(H){return H.depth!==0&&H.children&&H.children.length>0?"clickable":null}).on("mouseover",function(H,j){k.services.events.dispatchEvent(M.Tree.NODE_MOUSEOVER,{event:H,element:B(this),datum:j})}).on("click",function(H,j){j.depth!==0&&(j.children=j.children?null:j._children,v(j)),k.services.events.dispatchEvent(M.Tree.NODE_CLICK,{event:H,element:B(this),datum:j})}).on("mouseout",function(H,j){k.services.events.dispatchEvent(M.Tree.NODE_MOUSEOUT,{event:H,element:B(this),datum:j})});$.append("circle").attr("r",2.5).attr("class",function(H){return H._children?"parent":"child"}).attr("stroke-width",10),$.append("text").attr("dy","0.31em").attr("x",function(H){return H._children?-zn:zn}).attr("text-anchor",function(H){return H._children?"end":"start"}).text(function(H){return H.data.name}).clone(!0).attr("class","text-stroke").lower(),D.merge($).transition(C).attr("transform",function(H){return"translate("+H.y+","+H.x+")"}).attr("fill-opacity",1).attr("stroke-opacity",1),D.exit().transition(C).remove().attr("transform",function(){return"translate("+A.y+","+A.x+")"}).attr("fill-opacity",0).attr("stroke-opacity",0);var L=P.selectAll("path").data(w,function(H){return H.target.id}),V=L.enter().append("path").attr("d",function(H){var j={x:A.x0,y:A.y0};return O({source:j,target:j})});L.merge(V).transition(C).attr("d",O),L.exit().transition(C).remove().attr("d",function(){var H={x:A.x,y:A.y};return O({source:H,target:H})}),g.eachBefore(function(H){H.x0=H.x,H.y0=H.y})},_=g.descendants(),E=_[_.length-1].depth,x=b(l,"tree","type")===va.DENDROGRAM?lL().size([s,o-p-E*zn-f]):XL().nodeSize([m,y]).size([s,o-p-E*zn-f]),O=gM().x(function(A){return A.y}).y(function(A){return A.x});g.x0=y/2,g.y0=0,g.descendants().forEach(function(A,I){A.id=I,A._children=A.children}),x(g),i.attr("viewBox",[-d.left,-d.top,o,m]).style("user-select","none");var P=i.append("g").attr("class","links"),S=i.append("g").attr("class","nodes");v(g)}},n}(ct),rP="#000000",iP="#ffffff",aP="#fcf4d6",oP="#fddc69",sP="#f1c21b",lP="#d2a106",uP="#b28600",cP="#8e6a00",fP="#684e00",hP="#483700",dP="#302400",pP="#1c1500",vP={10:aP,20:oP,30:sP,40:lP,50:uP,60:cP,70:fP,80:hP,90:dP,100:pP},gP="#fff2e8",mP="#ffd9be",yP="#ffb784",_P="#ff832b",xP="#eb6200",bP="#ba4e00",OP="#8a3800",TP="#5e2900",wP="#3e1a00",EP="#231000",SP={10:gP,20:mP,30:yP,40:_P,50:xP,60:bP,70:OP,80:TP,90:wP,100:EP},MP="#fff1f1",AP="#ffd7d9",CP="#ffb3b8",DP="#ff8389",LP="#fa4d56",PP="#da1e28",RP="#a2191f",IP="#750e13",kP="#520408",NP="#2d0709",BP={10:MP,20:AP,30:CP,40:DP,50:LP,60:PP,70:RP,80:IP,90:kP,100:NP},UP="#fff0f7",$P="#ffd6e8",VP="#ffafd2",HP="#ff7eb6",FP="#ee5396",GP="#d02670",zP="#9f1853",WP="#740937",jP="#510224",qP="#2a0a18",YP={10:UP,20:$P,30:VP,40:HP,50:FP,60:GP,70:zP,80:WP,90:jP,100:qP},XP="#f6f2ff",ZP="#e8daff",KP="#d4bbff",QP="#be95ff",JP="#a56eff",tR="#8a3ffc",eR="#6929c4",nR="#491d8b",rR="#31135e",iR="#1c0f30",aR={10:XP,20:ZP,30:KP,40:QP,50:JP,60:tR,70:eR,80:nR,90:rR,100:iR},oR="#edf5ff",sR="#d0e2ff",lR="#a6c8ff",uR="#78a9ff",cR="#4589ff",fR="#0f62fe",hR="#0043ce",dR="#002d9c",pR="#001d6c",vR="#001141",gR={10:oR,20:sR,30:lR,40:uR,50:cR,60:fR,70:hR,80:dR,90:pR,100:vR},mR="#e5f6ff",yR="#bae6ff",_R="#82cfff",xR="#33b1ff",bR="#1192e8",OR="#0072c3",TR="#00539a",wR="#003a6d",ER="#012749",SR="#061727",MR={10:mR,20:yR,30:_R,40:xR,50:bR,60:OR,70:TR,80:wR,90:ER,100:SR},AR="#d9fbfb",CR="#9ef0f0",DR="#3ddbd9",LR="#08bdba",PR="#009d9a",RR="#007d79",IR="#005d5d",kR="#004144",NR="#022b30",BR="#081a1c",UR={10:AR,20:CR,30:DR,40:LR,50:PR,60:RR,70:IR,80:kR,90:NR,100:BR},$R="#defbe6",VR="#a7f0ba",HR="#6fdc8c",FR="#42be65",GR="#24a148",zR="#198038",WR="#0e6027",jR="#044317",qR="#022d0d",YR="#071908",XR={10:$R,20:VR,30:HR,40:FR,50:GR,60:zR,70:WR,80:jR,90:qR,100:YR},ZR="#f2f4f8",KR="#dde1e6",QR="#c1c7cd",JR="#a2a9b0",tI="#878d96",eI="#697077",nI="#4d5358",rI="#343a3f",iI="#21272a",aI="#121619",oI={10:ZR,20:KR,30:QR,40:JR,50:tI,60:eI,70:nI,80:rI,90:iI,100:aI},sI="#f4f4f4",lI="#e0e0e0",uI="#c6c6c6",cI="#a8a8a8",fI="#8d8d8d",hI="#6f6f6f",dI="#525252",pI="#393939",vI="#262626",gI="#161616",mI={10:sI,20:lI,30:uI,40:cI,50:fI,60:hI,70:dI,80:pI,90:vI,100:gI},yI="#f7f3f2",_I="#e5e0df",xI="#cac5c4",bI="#ada8a8",OI="#8f8b8b",TI="#726e6e",wI="#565151",EI="#3c3838",SI="#272525",MI="#171414",AI={10:yI,20:_I,30:xI,40:bI,50:OI,60:TI,70:wI,80:EI,90:SI,100:MI},ah={black:{100:rP},blue:gR,coolGray:oI,cyan:MR,gray:mI,green:XR,magenta:YP,orange:SP,purple:aR,red:BP,teal:UR,warmGray:AI,white:{0:iP},yellow:vP},CI=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),DI=function(t){if(!t)return null;for(var n=0,e=Object.keys(ah);n<e.length;n++)for(var r=e[n],i=ah[r],a=0,o=Object.keys(i);a<o.length;a++){var s=o[a],l=i[s];if(l===t)return s}return null},oh=function(){var t=B(this.parentNode).select("rect.leaf"),n=getComputedStyle(t.node(),null).getPropertyValue("fill"),e=ze(n),r;if(e&&(r=DI(e?e.hex():null)),r==null){var i=yu(e).l;r=Math.abs(i*100-100)}return r>50?"white":"black"},LI=0,PI=function(t){CI(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="treemap",e.renderType=Q.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement;e.parent.selectAll("g[data-name='leaf']").transition("legend-hover-treemap").call(function(a){return e.services.transitions.setupTransition({transition:a,name:"legend-hover-treemap"})}).attr("opacity",function(a){return a.parent.data.name===i.datum().name?1:.3})},e.handleLegendMouseOut=function(r){e.parent.selectAll("g[data-name='leaf']").transition("legend-mouseout-treemap").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-treemap"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.getComponentContainer();this.model.getData();var a=this.model.getDisplayData(),o=this.model.getOptions(),s=b(window,"location"),l=U.getSVGElementSize(i,{useAttrs:!0}),u=l.width,c=l.height,f=Bi({name:o.title||"Treemap",children:a}).sum(function(v){return v.value}).sort(function(v,_){return _.value-v.value}),h=tP().size([u,c]).paddingInner(1).paddingOuter(0).round(!0)(f);this.services.transitions;var p=i.selectAll("g[data-name='leaf']").data(h.leaves(),function(v){return v.data.name});p.exit().attr("opacity",0).remove();var d=p.enter().append("g").attr("data-name","leaf").attr("data-uid",function(){return LI++}),g=d.merge(p);g.attr("data-name","leaf").transition().call(function(v){return r.services.transitions.setupTransition({transition:v,name:"treemap-group-update",animate:e})}).attr("transform",function(v){return"translate("+v.x0+","+v.y0+")"});var m=g.selectAll("rect.leaf").data(function(v){return[v]});m.exit().attr("width",0).attr("height",0).remove();var y=m.enter().append("rect").classed("leaf",!0);y.merge(m).attr("width",0).attr("height",0).attr("id",function(){var v=B(this.parentNode).attr("data-uid");return o.style.prefix+"-leaf-"+v}).attr("class",function(v){for(;v.depth>1;)v=v.parent;return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:v.data.name,originalClassName:"leaf"})}).transition().call(function(v){return r.services.transitions.setupTransition({transition:v,name:"treemap-leaf-update-enter",animate:e})}).attr("width",function(v){return v.x1-v.x0}).attr("height",function(v){return v.y1-v.y0}).style("fill",function(v){for(;v.depth>1;)v=v.parent;return r.model.getFillColor(v.data.name)}),g.selectAll("clipPath").data(function(v){return v.data.showLabel!==!0?[]:[1]},function(v){return v}).join(function(v){v.append("clipPath").attr("id",function(){var _=B(this.parentNode).attr("data-uid");return o.style.prefix+"-clip-"+_}).append("use").attr("xlink:href",function(){var _=B(this.parentNode.parentNode).attr("data-uid"),E=o.style.prefix+"-leaf-"+_;return new URL("#"+E,s)+""})},function(v){return null},function(v){return v.remove()}),g.selectAll("text").data(function(v){if(v.data.showLabel!==!0)return[];for(var _=v;_.depth>1;)_=_.parent;var E=yu(r.model.getFillColor(_.data.name));return[{text:v.data.name,color:E.l<.5?"white":"black"}]},function(v){return v}).join(function(v){var _=v.append("text").text(function(E){return E.text}).style("fill",oh).attr("x",7).attr("y",18);s&&_.attr("clip-path",function(){var E=B(this.parentNode).attr("data-uid"),x=o.style.prefix+"-clip-"+E;return"url("+(new URL("#"+x,s)+"")+")"})},function(v){return v.text(function(_){return _.text}).style("fill",oh)},function(v){return v.remove()}),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("rect.leaf").on("mouseover",function(r,i){for(var a=B(this),o=getComputedStyle(this,null).getPropertyValue("fill"),s=i;s.depth>1;)s=s.parent;a.transition("graph_element_mouseover_fill_update").call(function(l){return e.services.transitions.setupTransition({transition:l,name:"graph_element_mouseover_fill_update"})}).style("fill",function(l){var u=e.model.getFillColor(l.parent.data.name);return u&&(o=u),ze(o).darker(.7).toString()}),e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:r,hoveredElement:a,items:[{color:o,label:s.data.name,bold:!0},{label:i.data.name,value:i.data.value}]}),e.services.events.dispatchEvent(M.Treemap.LEAF_MOUSEOVER,{event:r,element:a,datum:i})}).on("mousemove",function(r,i){var a=B(this);e.services.events.dispatchEvent(M.Treemap.LEAF_MOUSEMOVE,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(M.Treemap.LEAF_CLICK,{event:r,element:B(this),datum:i})}).on("mouseout",function(r,i){var a=B(this);a.classed("hovered",!1);for(var o=i;o.depth>1;)o=o.parent;a.transition().call(function(s){return e.services.transitions.setupTransition({transition:s,name:"graph_element_mouseout_fill_update"})}).style("fill",function(s){return e.model.getFillColor(s.parent.data.name)}),e.services.events.dispatchEvent(M.Treemap.LEAF_MOUSEOUT,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:a})})},n}(ct);function sh(t){var n=RI(Dv(t),360);return nn(n,[0,10])||nn(n,[350,0])?{textAnchor:_e.START,dominantBaseline:xe.MIDDLE}:nn(n,[10,80])?{textAnchor:_e.START,dominantBaseline:xe.HANGING}:nn(n,[80,100])?{textAnchor:_e.MIDDLE,dominantBaseline:xe.HANGING}:nn(n,[100,170])?{textAnchor:_e.END,dominantBaseline:xe.HANGING}:nn(n,[170,190])?{textAnchor:_e.END,dominantBaseline:xe.MIDDLE}:nn(n,[190,260])?{textAnchor:_e.END,dominantBaseline:xe.BASELINE}:nn(n,[260,280])?{textAnchor:_e.MIDDLE,dominantBaseline:xe.BASELINE}:{textAnchor:_e.START,dominantBaseline:xe.BASELINE}}function RI(t,n){return(t%n+n)%n}function nn(t,n){var e=n[0],r=n[1];return t>=e&&t<=r}function Dv(t){return t*(180/Math.PI)}function At(t,n,e){e===void 0&&(e={x:0,y:0});var r=n*Math.cos(t)+e.x,i=n*Math.sin(t)+e.y;return{x:isNaN(r)?0:r,y:isNaN(i)?0:i}}function II(t,n){return n*Math.sin(t-Math.PI/2)}var kI=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),NI=function(t){kI(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="radar",e.renderType=Q.SVG,e.getLabelDimensions=function(r){var i=U.appendOrSelect(e.getComponentContainer(),"g.tmp-tick"),a=U.appendOrSelect(i,"text").text(r),o=U.getSVGElementSize(a.node(),{useBBox:!0}),s=o.width,l=o.height;return i.remove(),{width:s,height:l}},e.normalizeFlatData=function(r){var i=e.getOptions(),a=b(i,"radar","axes"),o=a.angle,s=a.value,l=b(i,"data","groupMapsTo"),u=Cb(e.uniqueKeys.map(function(c){return e.uniqueGroups.map(function(f){var h;return h={},h[o]=c,h[l]=f,h[s]=null,h})}));return et(u,r)},e.normalizeGroupedData=function(r){var i=e.getOptions(),a=b(i,"radar","axes"),o=a.angle,s=a.value,l=b(i,"data","groupMapsTo");return r.map(function(u){var c=u.name,f=u.data,h=e.uniqueKeys.map(function(p){var d;return d={},d[l]=c,d[o]=p,d[s]=null,d});return{name:c,data:et(h,f)}})},e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement;e.parent.selectAll("g.blobs path").transition("legend-hover-blob").call(function(a){return e.services.transitions.setupTransition({transition:a,name:"legend-hover-blob"})}).style("fill-opacity",function(a){return a.name!==i.datum().name?an.opacity.unselected:an.opacity.selected}).style("stroke-opacity",function(a){return a.name!==i.datum().name?an.opacity.unselected:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("g.blobs path").transition("legend-mouseout-blob").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-blob"})}).style("fill-opacity",an.opacity.selected).style("stroke-opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.getComponentContainer(),a=U.getSVGElementSize(i,{useAttrs:!0}),o=a.width,s=a.height,l=this.model.getData(),u=this.model.getGroupedData(),c=this.getOptions(),f=b(c,"data","groupMapsTo"),h=b(c,"radar","axes","value"),p=b(c,"radar","axes"),d=p.angle,g=p.value,m=an,y=m.xLabelPadding,v=m.yLabelPadding,_=m.yTicksNumber,E=m.minRange,x=m.xAxisRectHeight;this.uniqueKeys=Array.from(new Set(l.map(function(G){return G[d]}))),this.uniqueGroups=Array.from(new Set(l.map(function(G){return G[f]}))),this.fullDataNormalized=this.normalizeFlatData(l),this.groupedDataNormalized=this.normalizeGroupedData(u);var O=this.getLabelDimensions(this.uniqueKeys[0]).height,P=2*(O+v),S=Math.min(o,s),A=S-P,I=A/2;if(!(I<=0)){var w=Ri().domain(this.fullDataNormalized.map(function(G){return G[d]})).range([0,2*Math.PI].map(function(G){return G-Math.PI/2})),N=ln(this.fullDataNormalized.map(function(G){return G[g]})),T=Ce().domain([N>=0?0:N,An(this.fullDataNormalized.map(function(G){return G[g]}))]).range([E,I]).nice(_),R=T.ticks(_),C=function(G){return r.model.getFillColor(G)},D=cM().angle(function(G){return w(G[d])+Math.PI/2}).radius(function(G){return T(G[g])}).curve(Jp),k=this.uniqueKeys.map(function(G){var q=r.getLabelDimensions(G).width,F=II(w(G),I);return q+F}),$=An(k),L={x:$+y,y:s/2},V=U.appendOrSelect(i,"g.y-axes").attr("role",nt.GROUP),H=V.selectAll("path").data(R,function(G){return G}),j=function(G){return r.uniqueKeys.map(function(q){var F;return F={},F[d]=q,F[g]=G,F})};H.join(function(G){return G.append("path").attr("opacity",0).attr("transform","translate("+L.x+", "+L.y+")").attr("fill","none").call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_y_axes_enter",animate:e})}).attr("opacity",1).attr("d",function(F){return D(j(F))})})},function(G){return G.call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_y_axes_update",animate:e})}).attr("opacity",1).attr("transform","translate("+L.x+", "+L.y+")").attr("d",function(F){return D(j(F))})})},function(G){return G.call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_y_axes_exit",animate:e})}).attr("d",function(F){return D(j(F))}).attr("opacity",0).remove()})});var tt=U.appendOrSelect(i,"g.x-axes").attr("role",nt.GROUP),it=tt.selectAll("line").data(this.uniqueKeys,function(G){return G});it.join(function(G){return G.append("line").attr("opacity",0).attr("class",function(q){return"x-axis-"+Vn(q)}).attr("stroke-dasharray","0").attr("x1",function(q){return At(w(q),0,L).x}).attr("y1",function(q){return At(w(q),0,L).y}).attr("x2",function(q){return At(w(q),0,L).x}).attr("y2",function(q){return At(w(q),0,L).y}).call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_x_axes_enter",animate:e})}).attr("opacity",1).attr("x1",function(F){return At(w(F),T.range()[0],L).x}).attr("y1",function(F){return At(w(F),T.range()[0],L).y}).attr("x2",function(F){return At(w(F),T.range()[1],L).x}).attr("y2",function(F){return At(w(F),T.range()[1],L).y})})},function(G){return G.call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_x_axes_update",animate:e})}).attr("opacity",1).attr("x1",function(F){return At(w(F),T.range()[0],L).x}).attr("y1",function(F){return At(w(F),T.range()[0],L).y}).attr("x2",function(F){return At(w(F),T.range()[1],L).x}).attr("y2",function(F){return At(w(F),T.range()[1],L).y})})},function(G){return G.call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_x_axes_exit",animate:e})}).attr("opacity",0).remove()})});var lt=U.appendOrSelect(i,"g.x-labels").attr("role",nt.GROUP),vt=lt.selectAll("text").data(this.uniqueKeys);vt.join(function(G){return G.append("text").text(function(q){return q}).attr("opacity",0).attr("x",function(q){return At(w(q),T.range()[1]+y,L).x}).attr("y",function(q){return At(w(q),T.range()[1]+y,L).y}).style("text-anchor",function(q){return sh(w(q)).textAnchor}).style("dominant-baseline",function(q){return sh(w(q)).dominantBaseline}).call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_x_labels_enter",animate:e})}).attr("opacity",1)})},function(G){return G.call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_x_labels_update",animate:e})}).attr("opacity",1).attr("x",function(F){return At(w(F),T.range()[1]+y,L).x}).attr("y",function(F){return At(w(F),T.range()[1]+y,L).y}).end().finally(function(){var F=b(c,"radar","alignment"),ht=r.getAlignmentXOffset(F,i,r.getParent());i.attr("x",ht)})})},function(G){return G.call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_x_labels_exit",animate:e})}).attr("opacity",0).remove()})});var rt=U.appendOrSelect(i,"g.blobs").attr("role",nt.GROUP),ut=rt.selectAll("path").data(this.groupedDataNormalized,function(G){return G.name});ut.join(function(G){return G.append("path").attr("class",function(q){return r.model.getColorClassName({classNameTypes:[J.FILL,J.STROKE],dataGroupName:q.name,originalClassName:"blob"})}).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-label",function(q){return q.name}).attr("opacity",0).attr("transform",e?function(){return"translate("+L.x+", "+L.y+") scale("+(1+Math.random()*.35)+")"}:"translate("+L.x+", "+L.y+")").style("fill",function(q){return C(q.name)}).style("fill-opacity",an.opacity.selected).style("stroke",function(q){return C(q.name)}).call(function(q){var F=q.transition().call(function(ht){return r.services.transitions.setupTransition({transition:ht,name:"radar_blobs_enter",animate:e})});e&&F.delay(function(){return Math.random()*30}).attr("transform","translate("+L.x+", "+L.y+")"),F.attr("opacity",1).attr("d",function(ht){return D(ht.data)})})},function(G){G.attr("class",function(q){return r.model.getColorClassName({classNameTypes:[J.FILL,J.STROKE],dataGroupName:q.name,originalClassName:"blob"})}).style("fill",function(q){return C(q.name)}).style("stroke",function(q){return C(q.name)}),G.call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_blobs_update",animate:e})}).attr("opacity",1).attr("transform","translate("+L.x+", "+L.y+")").attr("d",function(F){return D(F.data)})})},function(G){return G.call(function(q){var F=q.transition().call(function(ht){return r.services.transitions.setupTransition({transition:ht,name:"radar_blobs_exit",animate:e})});e&&F.delay(function(){return Math.random()*30}).attr("transform",function(){return"translate("+L.x+", "+L.y+") scale("+(1+Math.random()*.35)+")"}),F.attr("opacity",0).remove()})});var Y=U.appendOrSelect(i,"g.dots").attr("role",nt.GROUP),X=Y.selectAll("circle").data(this.fullDataNormalized.filter(function(G){return b(G,g)!==null}));X.join(function(G){return G.append("circle").attr("role",nt.GRAPHICS_SYMBOL).attr("aria-label",function(q){return q[h]})},function(G){return G},function(G){return G.remove()}).attr("class",function(G){return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:G[f],originalClassName:Vn(G[d])})}).attr("cx",function(G){return At(w(G[d]),T(G[g]),L).x}).attr("cy",function(G){return At(w(G[d]),T(G[g]),L).y}).attr("r",0).attr("opacity",0).style("fill",function(G){return C(G[f])});var Z=U.appendOrSelect(i,"g.x-axes-rect").attr("role",nt.GROUP),z=Z.selectAll("rect").data(this.uniqueKeys);z.join(function(G){return G.append("rect")},function(G){return G},function(G){return G.remove()}).attr("x",L.x).attr("y",L.y-x/2).attr("width",T.range()[1]).attr("height",x).style("fill","red").style("fill-opacity",0).attr("transform",function(G){return"rotate("+Dv(w(G))+", "+L.x+", "+L.y+")"});var pt=U.appendOrSelect(i,"g.y-labels").attr("role",nt.GROUP),ft=pt.selectAll("text").data(we(R));ft.join(function(G){return G.append("text").attr("opacity",0).text(function(q){return q}).attr("x",function(q){return At(-Math.PI/2,T(q),L).x+v}).attr("y",function(q){return At(-Math.PI/2,T(q),L).y}).style("text-anchor","start").style("dominant-baseline","middle").call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_y_labels_enter",animate:e})}).attr("opacity",1)})},function(G){return G.call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_y_labels_update",animate:e})}).text(function(F){return F}).attr("opacity",1).attr("x",function(F){return At(-Math.PI/2,T(F),L).x+v}).attr("y",function(F){return At(-Math.PI/2,T(F),L).y})})},function(G){return G.call(function(q){return q.transition().call(function(F){return r.services.transitions.setupTransition({transition:F,name:"radar_y_labels_exit",animate:e})}).attr("opacity",0).remove()})}),this.addEventListeners()}},n.prototype.getAlignmentXOffset=function(e,r,i){var a=U.getSVGElementSize(r,{useBBox:!0}),o=U.getSVGElementSize(i,{useAttrs:!0}).width,s=0;return e===Lt.CENTER?s=Math.floor((o-a.width)/2):e===Lt.RIGHT&&(s=o-a.width),s},n.prototype.destroy=function(){this.parent.selectAll(".x-axes-rect > rect").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.addEventListeners=function(){var e=this,r=b(this.getOptions(),"radar").axes.angle;this.parent.selectAll(".x-axes-rect > rect").on("mouseover",function(i,a){var o=B(this);e.services.events.dispatchEvent(M.Radar.X_AXIS_MOUSEOVER,{event:i,element:o,datum:a});var s=e.parent.select(".x-axes .x-axis-"+Vn(a)),l=e.parent.selectAll(".dots circle."+Vn(a)),u=e.model.getActiveDataGroupNames(),c=e.getOptions(),f=c.data.groupMapsTo,h=b(c,"radar","axes","value");s.classed("hovered",!0).attr("stroke-dasharray","4 4"),l.classed("hovered",!0).attr("opacity",function(d){return u.indexOf(d[f])!==-1?1:0}).attr("r",an.dotsRadius);var p=e.fullDataNormalized.filter(function(d){return d[r]===a&&u.indexOf(d[f])!==-1});e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:i,hoveredElement:o,items:p.filter(function(d){return typeof d[h]=="number"}).map(function(d){return{label:d[f],value:d[h],color:e.model.getFillColor(d[f]),class:e.model.getColorClassName({classNameTypes:[J.TOOLTIP],dataGroupName:d[f]})}})})}).on("mousemove",function(i,a){var o=B(this);e.services.events.dispatchEvent(M.Radar.X_AXIS_MOUSEMOVE,{event:i,element:o,datum:a}),e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:i})}).on("click",function(i,a){e.services.events.dispatchEvent(M.Radar.X_AXIS_CLICK,{event:i,element:B(this),datum:a})}).on("mouseout",function(i,a){var o=B(this),s=e.parent.select(".x-axes .x-axis-"+Vn(a)),l=e.parent.selectAll(".dots circle."+Vn(a));s.classed("hovered",!1).attr("stroke-dasharray","0"),l.classed("hovered",!1).attr("opacity",0).attr("r",0),e.services.events.dispatchEvent(M.Radar.X_AXIS_MOUSEOUT,{event:i,element:o,datum:a}),e.services.events.dispatchEvent(M.Tooltip.HIDE)})},n}(ct),BI=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),UI=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},$I=function(t){BI(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="circle-pack",e.renderType=Q.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement;e.parent.selectAll("circle.node").transition("legend-hover-circlepack").call(function(a){return e.services.transitions.setupTransition({transition:a,name:"legend-hover-circlepack"})}).attr("opacity",function(a){return a.data.dataGroupName===i.datum().name?1:yn.circles.fillOpacity})},e.handleLegendMouseOut=function(r){e.parent.selectAll("circle.node").transition("legend-mouseout-circlepack").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-circlepack"})}).attr("opacity",1)},e}return n.prototype.render=function(e){var r=this,i=this.getComponentContainer({withinChartClip:!0}),a=U.getSVGElementSize(this.parent,{useAttrs:!0}),o=a.width,s=a.height;if(!(o<1||s<1)){var l=this.model.getDisplayData(),u=this.model.hasParentNode(),c=this.model.getHierarchyLevel(),f=this.getOptions(),h=b(f,"canvasZoom","enabled");u&&b(l,0,"children")&&(l=b(l,0,"children"));var p=Bi({children:l}).sum(function(v){return v.value}).sort(function(v,_){return _.value-v.value}),d=HL().size([o,s]).padding(function(v){return v.depth>=1?yn.padding.children+3:yn.padding.mainGroup+3}),g=d(p).descendants().splice(1).filter(function(v){return v.depth<=c}),m=i.selectAll("circle.node").data(g);m.exit().attr("width",0).attr("height",0).remove();var y=m.enter().append("circle").classed("node",!0);y.merge(m).attr("class",function(v){var _=h&&c===3?r.getZoomClass(v):"";return r.model.getColorClassName({classNameTypes:[J.FILL,J.STROKE],dataGroupName:v.data.dataGroupName,originalClassName:v.children?"node "+_:"node node-leaf "+_})}).style("fill",function(v){return r.model.getFillColor(v.data.dataGroupName)}).style("stroke",function(v){return r.model.getFillColor(v.data.dataGroupName)}).attr("cx",function(v){return v.x}).attr("cy",function(v){return v.y}).transition("circlepack-leaf-update-enter").call(function(v){return r.services.transitions.setupTransition({transition:v,name:"circlepack-leaf-update-enter"})}).attr("r",function(v){return v.r}).attr("opacity",1).attr("fill-opacity",yn.circles.fillOpacity),h===!0&&this.focal&&(this.services.canvasZoom.zoomIn(this.focal,y,ar),this.setBackgroundListeners()),u||this.addLegendListeners(),this.addEventListeners()}},n.prototype.unhighlightChildren=function(e){var r=this,i=e.map(function(a){return a.data});this.parent.selectAll("circle.node").filter(function(a){return i.some(function(o){return o===a.data})&&a.depth>1}).style("stroke",function(a){return r.model.getFillColor(a.data.dataGroupName)})},n.prototype.highlightChildren=function(e){var r=e.map(function(i){return i.data});this.parent.selectAll("circle.node").filter(function(i){return r.some(function(a){return a===i.data})&&i.depth>1}).style("stroke",yn.circles.hover.stroke)},n.prototype.getZoomClass=function(e){return this.model.getHierarchyLevel()===3&&this.focal&&(e.data===this.focal.data||this.focal.children.some(function(r){return r.data===e.data}))?"focal":"non-focal"},n.prototype.addLegendListeners=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.removeBackgroundListeners=function(){var e=B(this.services.domUtils.getMainContainer());e.on("click",function(){return null})},n.prototype.setBackgroundListeners=function(){var e=B(this.services.domUtils.getMainContainer()),r=this,i=this.parent.selectAll("circle.node"),a=b(gp,"canvasZoomSettings");e.on("click",function(){r.focal=null,r.model.updateHierarchyLevel(2),e.classed("zoomed-in",!1),r.services.canvasZoom.zoomOut(i,a)})},n.prototype.getZoomIcon=function(){return`
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10">
			<polygon points="5.93 3.71 4.45 3.71 4.45 2.23 3.71 2.23 3.71 3.71 2.23 3.71 2.23 4.45 3.71 4.45 3.71 5.93 4.45 5.93 4.45 4.45 5.93 4.45 5.93 3.71"/>
			<path d="M7.2,6.67a4,4,0,0,0,1-2.59A4.08,4.08,0,1,0,4.07,8.15h0a4,4,0,0,0,2.59-1L9.48,10,10,9.48Zm-3.12.77A3.34,3.34,0,1,1,7.41,4.08,3.34,3.34,0,0,1,4.08,7.44Z"/>
		</svg>`},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("circle.node").on("mouseover",function(r,i){var a=B(this);a.classed("hovered",!0);var o=e.model.getHierarchyLevel(),s=o>2&&!a.classed("focal"),l=b(e.model.getOptions(),"canvasZoom","enabled"),u=!1;if(!s){var c=[],f=[],h=null;if(i.children){i.depth>1&&l&&(u=!0,a.classed("clickable",!0)),c=i.children.map(function(g){if(g!==null)return typeof g.data.value=="number"?{label:g.data.name,value:g.data.value}:{label:g.data.name,labelIcon:l&&o<=2?e.getZoomIcon():null,value:g.value}});var p=e.model.getOptions();f=[{label:bt(p,"tooltip.totalLabel")||"Total",value:i.value,bold:!0}],e.highlightChildren(i.children)}else h=i.value;var d=getComputedStyle(this,null).getPropertyValue("fill");e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:r,hoveredElement:a,items:UI([{color:d,label:i.data.name,labelIcon:u&&l&&o<=2?e.getZoomIcon():null,value:h}],c,f)})}e.services.events.dispatchEvent(M.CirclePack.CIRCLE_MOUSEOVER,{event:r,element:a,datum:i})}).on("mousemove",function(r,i){var a=B(this);e.services.events.dispatchEvent(M.CirclePack.CIRCLE_MOUSEMOVE,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:r})}).on("mouseout",function(r,i){var a=B(this);a.classed("hovered",!1),i.children&&e.unhighlightChildren(i.children),e.services.events.dispatchEvent(M.CirclePack.CIRCLE_MOUSEOUT,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:a})}).on("click",function(r,i){var a=B(this),o=a.classed("non-focal"),s=b(e.model.getOptions(),"canvasZoom","enabled");if(s&&e.model.getHierarchyLevel()>2){var l=e.parent.selectAll("circle.node"),u=B(e.services.domUtils.getMainContainer());u.classed("zoomed-in",!1),e.focal=null,e.model.updateHierarchyLevel(2),e.services.canvasZoom.zoomOut(l,ar)}else if(i.depth===2&&i.children&&!o&&s){var l=e.parent.selectAll("circle.node"),u=B(e.services.domUtils.getMainContainer());u.classed("zoomed-in",!0),e.focal=i,e.model.updateHierarchyLevel(3),e.services.canvasZoom.zoomIn(i,l,ar),r.stopPropagation()}e.services.events.dispatchEvent(M.CirclePack.CIRCLE_CLICK,{event:r,element:a,datum:i})})},n.prototype.destroy=function(){this.parent.selectAll("circle.node").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null);var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),this.removeBackgroundListeners()},n}(ct),VI={value:function(){}};function Lv(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new oa(e)}function oa(t){this._=t}function HI(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}oa.prototype=Lv.prototype={constructor:oa,on:function(t,n){var e=this._,r=HI(t+"",e),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=FI(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<o;)if(i=(t=r[a]).type)e[i]=lh(e[i],t.name,n);else if(n==null)for(i in e)e[i]=lh(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new oa(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,a;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};function FI(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function lh(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=VI,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}const GI=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Lv},Symbol.toStringTag,{value:"Module"})),zI=PT(GI);var WI=zI.dispatch,ls=Math.PI/180,Gr=1<<11>>5,sa=1<<11,jI=function(){var t=[256,256],n=qI,e=YI,r=XI,i=uh,a=uh,o=ZI,s=KI,l=Pv,u=[],c=1/0,f=WI("word","end"),h=null,p=Math.random,d={},g=ik;d.canvas=function(v){return arguments.length?(g=rn(v),d):g},d.start=function(){var v=m(g()),_=rk((t[0]>>5)*t[1]),E=null,x=u.length,O=-1,P=[],S=u.map(function(I,w){return I.text=n.call(this,I,w),I.font=e.call(this,I,w),I.style=i.call(this,I,w),I.weight=a.call(this,I,w),I.rotate=o.call(this,I,w),I.size=~~r.call(this,I,w),I.padding=s.call(this,I,w),I}).sort(function(I,w){return w.size-I.size});return h&&clearInterval(h),h=setInterval(A,0),A(),d;function A(){for(var I=Date.now();Date.now()-I<c&&++O<x&&h;){var w=S[O];w.x=t[0]*(p()+.5)>>1,w.y=t[1]*(p()+.5)>>1,QI(v,w,S,O),w.hasText&&y(_,w,E)&&(P.push(w),f.call("word",d,w),E?tk(E,w):E=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=t[0]>>1,w.y-=t[1]>>1)}O>=x&&(d.stop(),f.call("end",d,P,E))}},d.stop=function(){return h&&(clearInterval(h),h=null),d};function m(v){v.width=v.height=1;var _=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Gr<<5)/_,v.height=sa/_;var E=v.getContext("2d");return E.fillStyle=E.strokeStyle="red",E.textAlign="center",{context:E,ratio:_}}function y(v,_,E){t[0],t[1];for(var x=_.x,O=_.y,P=Math.sqrt(t[0]*t[0]+t[1]*t[1]),S=l(t),A=p()<.5?1:-1,I=-A,w,N,T;(w=S(I+=A))&&(N=~~w[0],T=~~w[1],!(Math.min(Math.abs(N),Math.abs(T))>=P));)if(_.x=x+N,_.y=O+T,!(_.x+_.x0<0||_.y+_.y0<0||_.x+_.x1>t[0]||_.y+_.y1>t[1])&&(!E||!JI(_,v,t[0]))&&(!E||ek(_,E))){for(var R=_.sprite,C=_.width>>5,D=t[0]>>5,k=_.x-(C<<4),$=k&127,L=32-$,V=_.y1-_.y0,H=(_.y+_.y0)*D+(k>>5),j,tt=0;tt<V;tt++){j=0;for(var it=0;it<=C;it++)v[H+it]|=j<<L|(it<C?(j=R[tt*C+it])>>>$:0);H+=D}return delete _.sprite,!0}return!1}return d.timeInterval=function(v){return arguments.length?(c=v??1/0,d):c},d.words=function(v){return arguments.length?(u=v,d):u},d.size=function(v){return arguments.length?(t=[+v[0],+v[1]],d):t},d.font=function(v){return arguments.length?(e=rn(v),d):e},d.fontStyle=function(v){return arguments.length?(i=rn(v),d):i},d.fontWeight=function(v){return arguments.length?(a=rn(v),d):a},d.rotate=function(v){return arguments.length?(o=rn(v),d):o},d.text=function(v){return arguments.length?(n=rn(v),d):n},d.spiral=function(v){return arguments.length?(l=ak[v]||v,d):l},d.fontSize=function(v){return arguments.length?(r=rn(v),d):r},d.padding=function(v){return arguments.length?(s=rn(v),d):s},d.random=function(v){return arguments.length?(p=v,d):p},d.on=function(){var v=f.on.apply(f,arguments);return v===f?d:v},d};function qI(t){return t.text}function YI(){return"serif"}function uh(){return"normal"}function XI(t){return Math.sqrt(t.value)}function ZI(){return(~~(Math.random()*6)-3)*30}function KI(){return 1}function QI(t,n,e,r){if(!n.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(Gr<<5)/a,sa/a);var o=0,s=0,l=0,u=e.length;for(--r;++r<u;){n=e[r],i.save(),i.font=n.style+" "+n.weight+" "+~~((n.size+1)/a)+"px "+n.font;var c=i.measureText(n.text+"m").width*a,f=n.size<<1;if(n.rotate){var h=Math.sin(n.rotate*ls),p=Math.cos(n.rotate*ls),d=c*p,g=c*h,m=f*p,y=f*h;c=Math.max(Math.abs(d+y),Math.abs(d-y))+31>>5<<5,f=~~Math.max(Math.abs(g+m),Math.abs(g-m))}else c=c+31>>5<<5;if(f>l&&(l=f),o+c>=Gr<<5&&(o=0,s+=l,l=0),s+f>=sa)break;i.translate((o+(c>>1))/a,(s+(f>>1))/a),n.rotate&&i.rotate(n.rotate*ls),i.fillText(n.text,0,0),n.padding&&(i.lineWidth=2*n.padding,i.strokeText(n.text,0,0)),i.restore(),n.width=c,n.height=f,n.xoff=o,n.yoff=s,n.x1=c>>1,n.y1=f>>1,n.x0=-n.x1,n.y0=-n.y1,n.hasText=!0,o+=c}for(var v=i.getImageData(0,0,(Gr<<5)/a,sa/a).data,_=[];--r>=0;)if(n=e[r],!!n.hasText){for(var c=n.width,E=c>>5,f=n.y1-n.y0,x=0;x<f*E;x++)_[x]=0;if(o=n.xoff,o==null)return;s=n.yoff;for(var O=0,P=-1,S=0;S<f;S++){for(var x=0;x<c;x++){var A=E*S+(x>>5),I=v[(s+S)*(Gr<<5)+(o+x)<<2]?1<<31-x%32:0;_[A]|=I,O|=I}O?P=S:(n.y0++,f--,S--,s++)}n.y1=n.y0+P,n.sprite=_.slice(0,(n.y1-n.y0)*E)}}}function JI(t,n,e){e>>=5;for(var r=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=a&127,s=32-o,l=t.y1-t.y0,u=(t.y+t.y0)*e+(a>>5),c,f=0;f<l;f++){c=0;for(var h=0;h<=i;h++)if((c<<s|(h<i?(c=r[f*i+h])>>>o:0))&n[u+h])return!0;u+=e}return!1}function tk(t,n){var e=t[0],r=t[1];n.x+n.x0<e.x&&(e.x=n.x+n.x0),n.y+n.y0<e.y&&(e.y=n.y+n.y0),n.x+n.x1>r.x&&(r.x=n.x+n.x1),n.y+n.y1>r.y&&(r.y=n.y+n.y1)}function ek(t,n){return t.x+t.x1>n[0].x&&t.x+t.x0<n[1].x&&t.y+t.y1>n[0].y&&t.y+t.y0<n[1].y}function Pv(t){var n=t[0]/t[1];return function(e){return[n*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function nk(t){var n=4,e=n*t[0]/t[1],r=0,i=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:r+=e;break;case 1:i+=n;break;case 2:r-=e;break;default:i-=n;break}return[r,i]}}function rk(t){for(var n=[],e=-1;++e<t;)n[e]=0;return n}function ik(){return document.createElement("canvas")}function rn(t){return typeof t=="function"?t:function(){return t}}var ak={archimedean:Pv,rectangular:nk},ok=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),sk=function(t){ok(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="wordcloud",e.renderType=Q.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("text.word").transition("legend-hover-wordcloud").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-wordcloud"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("text.word").transition("legend-mouseout-wordcloud").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-wordcloud"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(M.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){e===void 0&&(e=!0);var r=this,i=this.getComponentContainer().attr("width","100%").attr("height","100%"),a=this.model.getDisplayData(),o=this.getFontSizeScale(a),s=this.getOptions(),l=s.wordCloud,u=l.fontSizeMapsTo,c=l.wordMapsTo,f=s.data.groupMapsTo,h=U.getSVGElementSize(i,{useAttrs:!0}),p=h.width,d=h.height;if(p===0||d===0)return;var g=jI().size([p,d]).words(a.map(function(y){var v,_=y[u];if(typeof y[u]!="number")throw Error("Badly formatted WordCloud data. `value` should only be an integer or float");return v={},v[f]=y[f],v.text=y[c],v.size=_,v.value=_,v})).padding(5).rotate(0).fontSize(function(y){return o(y.size)}).on("end",m);g.start();function m(y){var v=U.appendOrSelect(i,"g.words");v.attr("transform","translate("+g.size()[0]/2+", "+g.size()[1]/2+")");var _=v.selectAll("text").data(y,function(x){return x[f]+"-"+x.text});_.exit().attr("opacity",0).remove();var E=_.enter().append("text").attr("opacity",0);E.merge(_).style("font-size",function(x){return x.size+"px"}).text(function(x){return x.text}).attr("class",function(x){return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:x[f],originalClassName:"word "+(x.size>32?"light":"")})}).style("fill",function(x){return r.model.getFillColor(x[f],x.text,x)}).attr("text-anchor","middle").transition().call(function(x){return r.services.transitions.setupTransition({transition:x,name:"wordcloud-text-update-enter",animate:e})}).attr("transform",function(x){return"translate("+x.x+", "+x.y+")"}).attr("opacity",1)}this.addEventListeners()},n.prototype.getFontSizeScale=function(e){var r=this.getOptions(),i=r.wordCloud.fontSizeMapsTo,a=e.map(function(u){return u[i]}).filter(function(u){return u}),o=U.getHTMLElementSize(this.services.domUtils.getMainContainer()),s=a.length>0,l=s?we(a):[1,1];return Ce().domain(l).range(s?r.wordCloud.fontSizeRange(o,e):[4,4])},n.prototype.addEventListeners=function(){var e=this.getOptions(),r=e.data.groupMapsTo,i=this,a=xa(function(o){var s=i.parent.selectAll("text.word").transition("wordcloud-word-mouse-highlight").call(function(l){return i.services.transitions.setupTransition({transition:l,name:"wordcloud-word-mouse-highlight"})});o===null?s.attr("opacity",1):s.attr("opacity",function(){return o===this?1:.3})},6);this.parent.selectAll("text.word").on("mouseover",function(o,s){var l=this;a(l),i.services.events.dispatchEvent(M.WordCloud.WORD_MOUSEOVER,{event:o,element:B(this),datum:s}),i.services.events.dispatchEvent(M.Tooltip.SHOW,{event:o,hoveredElement:l,items:[{label:e.tooltip.wordLabel,value:s.text},{label:e.tooltip.valueLabel,value:s.value},{label:e.tooltip.groupLabel,value:s[r],class:i.model.getColorClassName({classNameTypes:[J.TOOLTIP],dataGroupName:s[r]})}]})}).on("mousemove",function(o,s){var l=B(this);i.services.events.dispatchEvent(M.WordCloud.WORD_MOUSEMOVE,{element:l,datum:s}),i.services.events.dispatchEvent(M.Tooltip.MOVE,{event:o})}).on("click",function(o,s){i.services.events.dispatchEvent(M.WordCloud.WORD_CLICK,{event:o,element:B(this),datum:s})}).on("mouseout",function(o,s){var l=B(this);a(null),i.services.events.dispatchEvent(M.WordCloud.WORD_MOUSEOUT,{event:o,element:l,datum:s}),i.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:l})})},n}(ct);function ch(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function lk(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e>i||e===void 0&&i>=i)&&(e=i)}return e}function us(t,n){let e=0;if(n===void 0)for(let r of t)(r=+r)&&(e+=r);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&(e+=i)}return e}function uk(t){return t.depth}function ck(t,n){return n-1-t.height}function Rv(t,n){return t.sourceLinks.length?t.depth:n-1}function Ki(t){return function(){return t}}function fh(t,n){return no(t.source,n.source)||t.index-n.index}function hh(t,n){return no(t.target,n.target)||t.index-n.index}function no(t,n){return t.y0-n.y0}function cs(t){return t.value}function fk(t){return t.index}function hk(t){return t.nodes}function dk(t){return t.links}function dh(t,n){const e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function ph({nodes:t}){for(const n of t){let e=n.y0,r=e;for(const i of n.sourceLinks)i.y0=e+i.width/2,e+=i.width;for(const i of n.targetLinks)i.y1=r+i.width/2,r+=i.width}}function pk(){let t=0,n=0,e=1,r=1,i=24,a=8,o,s=fk,l=Rv,u,c,f=hk,h=dk,p=6;function d(){const C={nodes:f.apply(null,arguments),links:h.apply(null,arguments)};return g(C),m(C),y(C),v(C),x(C),ph(C),C}d.update=function(C){return ph(C),C},d.nodeId=function(C){return arguments.length?(s=typeof C=="function"?C:Ki(C),d):s},d.nodeAlign=function(C){return arguments.length?(l=typeof C=="function"?C:Ki(C),d):l},d.nodeSort=function(C){return arguments.length?(u=C,d):u},d.nodeWidth=function(C){return arguments.length?(i=+C,d):i},d.nodePadding=function(C){return arguments.length?(a=o=+C,d):a},d.nodes=function(C){return arguments.length?(f=typeof C=="function"?C:Ki(C),d):f},d.links=function(C){return arguments.length?(h=typeof C=="function"?C:Ki(C),d):h},d.linkSort=function(C){return arguments.length?(c=C,d):c},d.size=function(C){return arguments.length?(t=n=0,e=+C[0],r=+C[1],d):[e-t,r-n]},d.extent=function(C){return arguments.length?(t=+C[0][0],e=+C[1][0],n=+C[0][1],r=+C[1][1],d):[[t,n],[e,r]]},d.iterations=function(C){return arguments.length?(p=+C,d):p};function g({nodes:C,links:D}){for(const[$,L]of C.entries())L.index=$,L.sourceLinks=[],L.targetLinks=[];const k=new Map(C.map(($,L)=>[s($,L,C),$]));for(const[$,L]of D.entries()){L.index=$;let{source:V,target:H}=L;typeof V!="object"&&(V=L.source=dh(k,V)),typeof H!="object"&&(H=L.target=dh(k,H)),V.sourceLinks.push(L),H.targetLinks.push(L)}if(c!=null)for(const{sourceLinks:$,targetLinks:L}of C)$.sort(c),L.sort(c)}function m({nodes:C}){for(const D of C)D.value=D.fixedValue===void 0?Math.max(us(D.sourceLinks,cs),us(D.targetLinks,cs)):D.fixedValue}function y({nodes:C}){const D=C.length;let k=new Set(C),$=new Set,L=0;for(;k.size;){for(const V of k){V.depth=L;for(const{target:H}of V.sourceLinks)$.add(H)}if(++L>D)throw new Error("circular link");k=$,$=new Set}}function v({nodes:C}){const D=C.length;let k=new Set(C),$=new Set,L=0;for(;k.size;){for(const V of k){V.height=L;for(const{source:H}of V.targetLinks)$.add(H)}if(++L>D)throw new Error("circular link");k=$,$=new Set}}function _({nodes:C}){const D=ch(C,L=>L.depth)+1,k=(e-t-i)/(D-1),$=new Array(D);for(const L of C){const V=Math.max(0,Math.min(D-1,Math.floor(l.call(null,L,D))));L.layer=V,L.x0=t+V*k,L.x1=L.x0+i,$[V]?$[V].push(L):$[V]=[L]}if(u)for(const L of $)L.sort(u);return $}function E(C){const D=lk(C,k=>(r-n-(k.length-1)*o)/us(k,cs));for(const k of C){let $=n;for(const L of k){L.y0=$,L.y1=$+L.value*D,$=L.y1+o;for(const V of L.sourceLinks)V.width=V.value*D}$=(r-$+o)/(k.length+1);for(let L=0;L<k.length;++L){const V=k[L];V.y0+=$*(L+1),V.y1+=$*(L+1)}N(k)}}function x(C){const D=_(C);o=Math.min(a,(r-n)/(ch(D,k=>k.length)-1)),E(D);for(let k=0;k<p;++k){const $=Math.pow(.99,k),L=Math.max(1-$,(k+1)/p);P(D,$,L),O(D,$,L)}}function O(C,D,k){for(let $=1,L=C.length;$<L;++$){const V=C[$];for(const H of V){let j=0,tt=0;for(const{source:lt,value:vt}of H.targetLinks){let rt=vt*(H.layer-lt.layer);j+=T(lt,H)*rt,tt+=rt}if(!(tt>0))continue;let it=(j/tt-H.y0)*D;H.y0+=it,H.y1+=it,w(H)}u===void 0&&V.sort(no),S(V,k)}}function P(C,D,k){for(let $=C.length,L=$-2;L>=0;--L){const V=C[L];for(const H of V){let j=0,tt=0;for(const{target:lt,value:vt}of H.sourceLinks){let rt=vt*(lt.layer-H.layer);j+=R(H,lt)*rt,tt+=rt}if(!(tt>0))continue;let it=(j/tt-H.y0)*D;H.y0+=it,H.y1+=it,w(H)}u===void 0&&V.sort(no),S(V,k)}}function S(C,D){const k=C.length>>1,$=C[k];I(C,$.y0-o,k-1,D),A(C,$.y1+o,k+1,D),I(C,r,C.length-1,D),A(C,n,0,D)}function A(C,D,k,$){for(;k<C.length;++k){const L=C[k],V=(D-L.y0)*$;V>1e-6&&(L.y0+=V,L.y1+=V),D=L.y1+o}}function I(C,D,k,$){for(;k>=0;--k){const L=C[k],V=(L.y1-D)*$;V>1e-6&&(L.y0-=V,L.y1-=V),D=L.y0-o}}function w({sourceLinks:C,targetLinks:D}){if(c===void 0){for(const{source:{sourceLinks:k}}of D)k.sort(hh);for(const{target:{targetLinks:k}}of C)k.sort(fh)}}function N(C){if(c===void 0)for(const{sourceLinks:D,targetLinks:k}of C)D.sort(hh),k.sort(fh)}function T(C,D){let k=C.y0-(C.sourceLinks.length-1)*o/2;for(const{target:$,width:L}of C.sourceLinks){if($===D)break;k+=L+o}for(const{source:$,width:L}of D.targetLinks){if($===C)break;k-=L}return k}function R(C,D){let k=D.y0-(D.targetLinks.length-1)*o/2;for(const{source:$,width:L}of D.targetLinks){if($===C)break;k+=L+o}for(const{target:$,width:L}of C.sourceLinks){if($===D)break;k-=L}return k}return d}var Hl=Math.PI,Fl=2*Hl,mn=1e-6,vk=Fl-mn;function Gl(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Iv(){return new Gl}Gl.prototype=Iv.prototype={constructor:Gl,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,a){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var a=this._x1,o=this._y1,s=e-t,l=r-n,u=a-t,c=o-n,f=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>mn)if(!(Math.abs(c*s-l*u)>mn)||!i)this._+="L"+(this._x1=t)+","+(this._y1=n);else{var h=e-a,p=r-o,d=s*s+l*l,g=h*h+p*p,m=Math.sqrt(d),y=Math.sqrt(f),v=i*Math.tan((Hl-Math.acos((d+f-g)/(2*m*y)))/2),_=v/y,E=v/m;Math.abs(_-1)>mn&&(this._+="L"+(t+_*u)+","+(n+_*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>u*p)+","+(this._x1=t+E*s)+","+(this._y1=n+E*l)}},arc:function(t,n,e,r,i,a){t=+t,n=+n,e=+e,a=!!a;var o=e*Math.cos(r),s=e*Math.sin(r),l=t+o,u=n+s,c=1^a,f=a?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>mn||Math.abs(this._y1-u)>mn)&&(this._+="L"+l+","+u),e&&(f<0&&(f=f%Fl+Fl),f>vk?this._+="A"+e+","+e+",0,1,"+c+","+(t-o)+","+(n-s)+"A"+e+","+e+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):f>mn&&(this._+="A"+e+","+e+",0,"+ +(f>=Hl)+","+c+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};function vh(t){return function(){return t}}function gk(t){return t[0]}function mk(t){return t[1]}var yk=Array.prototype.slice;function _k(t){return t.source}function xk(t){return t.target}function bk(t){var n=_k,e=xk,r=gk,i=mk,a=null;function o(){var s,l=yk.call(arguments),u=n.apply(this,l),c=e.apply(this,l);if(a||(a=s=Iv()),t(a,+r.apply(this,(l[0]=u,l)),+i.apply(this,l),+r.apply(this,(l[0]=c,l)),+i.apply(this,l)),s)return a=null,s+""||null}return o.source=function(s){return arguments.length?(n=s,o):n},o.target=function(s){return arguments.length?(e=s,o):e},o.x=function(s){return arguments.length?(r=typeof s=="function"?s:vh(+s),o):r},o.y=function(s){return arguments.length?(i=typeof s=="function"?s:vh(+s),o):i},o.context=function(s){return arguments.length?(a=s??null,o):a},o}function Ok(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n=(n+r)/2,e,n,i,r,i)}function Tk(){return bk(Ok)}function wk(t){return[t.source.x1,t.y0]}function Ek(t){return[t.target.x0,t.y1]}function Sk(){return Tk().source(wk).target(Ek)}var Mk=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ak=function(t){Mk(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="alluvial",e.renderType=Q.SVG,e.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),e}return n.prototype.render=function(e){var r=this,i=this.getComponentContainer({withinChartClip:!0});i.html("");var a=U.getSVGElementSize(i,{useAttrs:!0}),o=a.width,s=a.height;if(!(o<1||s<1)){var l=this.model.getOptions(),u=this.model.getDisplayData(),c=b(this.getOptions(),"color","gradient","enabled"),f=oe.minNodePadding;l.alluvial.nodePadding>oe.minNodePadding&&(f=l.alluvial.nodePadding);var h=b(l,"alluvial","nodeAlignment"),p=Rv;h===Lt.LEFT?p=uk:h===Lt.RIGHT&&(p=ck);var d=pk().nodeId(function(x){return x.name}).nodeWidth(oe.nodeWidth).nodePadding(f).nodeAlign(p).extent([[2,30],[o-2,s]]);this.graph=d({nodes:l.alluvial.nodes.map(function(x){return Object.assign({},x)}),links:u.map(function(x){return Object.assign({},x)})}),this.graph.nodes=this.graph.nodes.filter(function(x){return x.value!==0});var g={};this.graph.nodes.forEach(function(x){var O,P=x.x0;x.category&&(g[P]=(O=x)===null||O===void 0?void 0:O.category)});var m=i.append("g").classed("header-arrows",!0).selectAll("g").data(Object.keys(g)).join("g").attr("transform",function(x){return"translate("+x+", 0)"});m.append("text").attr("id",function(x,O){return r.services.domUtils.generateElementIDString("alluvial-category-"+O)}).style("font-size","14px").text(function(x){return g[x]?g[x]:""}).attr("y",20).attr("x",function(x,O){var P=r.services.domUtils.generateElementIDString("alluvial-category-"+O),S=U.getSVGElementSize(B("text#"+P),{useBBox:!0}).width,A=0;return x+A>=S&&(A=-S+4),A});var y=i.append("g").attr("fill","none").selectAll("g").data(this.graph.links);if(y.exit().remove(),c){var v=b(this.getOptions(),"color","scale");v&&y.enter().append("linearGradient").attr("id",function(x){return r.gradient_id+"-link-"+x.index}).attr("gradientUnits","userSpaceOnUse").call(function(x){return x.append("stop").attr("offset","0%").attr("stop-color",function(O){return v[O.source.name]})}).call(function(x){return x.append("stop").attr("offset","100%").attr("stop-color",function(O){return v[O.target.name]})}),y.exit().remove()}y.enter().append("path").classed("link",!0).attr("d",Sk()).attr("id",function(x){return r.services.domUtils.generateElementIDString("alluvial-line-"+x.index)}).attr("class",function(x){return l.alluvial.monochrome?r.model.getColorClassName({classNameTypes:[J.STROKE],dataGroupName:0,originalClassName:"link"}):r.model.getColorClassName({classNameTypes:[J.STROKE],dataGroupName:x.source.index,originalClassName:"link"})}).style("stroke",function(x){return c?"url(#"+r.gradient_id+"-link-"+x.index+")":r.model.getFillColor(x.source.name)}).attr("stroke-width",function(x){return Math.max(1,x.width)}).style("stroke-opacity",oe.opacity.default).attr("aria-label",function(x){return x.source.name+" → "+x.target.name+" ("+x.value+(l.alluvial.units?" "+l.alluvial.units:"")+")"});var _=i.append("g").selectAll("g").data(this.graph.nodes).enter().append("g").attr("id",function(x){return r.services.domUtils.generateElementIDString("alluvial-node-"+x.index)}).classed("node-group",!0).attr("transform",function(x){return"translate("+x.x0+", "+x.y0+")"});_.append("rect").classed("node",!0).attr("height",function(x){return x.y1-x.y0}).attr("width",function(x){return x.x1-x.x0}).attr("fill","black");var E=_.append("g").attr("id",function(x){return r.services.domUtils.generateElementIDString("alluvial-node-title-"+x.index)});E.append("text").attr("id",function(x){return r.services.domUtils.generateElementIDString("alluvial-node-text-"+x.index)}).attr("class","node-text").style("font-size","12px").attr("text-anchor","start").attr("fill","white").attr("x",4).attr("dy",13).text(function(x){return x.name+" ("+x.value+")"}).attr("aria-label",function(x){return x.name+" ("+x.value+")"}),E.append("rect").classed("node-text-bg",!0).attr("width",function(x,O){var P=r.services.domUtils.generateElementIDString("alluvial-node-text-"+O),S=U.getSVGElementSize(B("text#"+P),{useBBox:!0}).width;return S+8}).attr("height",18).attr("stroke-width",2).lower(),E.attr("transform",function(x,O){var P=r.services.domUtils.generateElementIDString("alluvial-node-text-"+O),S=U.getSVGElementSize(B("text#"+P),{useBBox:!0}).width,A=(x.y1-x.y0)/2-9,I=x.x1-x.x0;return x.x1>=S?I=I-(S+16):I+=4,"translate("+I+", "+A+")"}),this.addLineEventListener(),this.addNodeEventListener()}},n.prototype.addLineEventListener=function(){var e=this.getOptions(),r=this,i=xa(function(a,o){o===void 0&&(o="mouseover");var s=r.parent.selectAll("path.link").transition().call(function(l){return r.services.transitions.setupTransition({transition:l,name:"alluvial-links-mouse-highlight"})});o==="mouseout"?(B(a).lower(),s.style("stroke-opacity",oe.opacity.default)):s.style("stroke-opacity",function(){return a===this?(B(this).raise(),oe.opacity.selected):oe.opacity.unfocus})},33);this.parent.selectAll("path.link").on("mouseover",function(a,o){var s=B(this);i(this,"mouseover"),s.classed("link-hovered",!0);var l=getComputedStyle(this).getPropertyValue("stroke");r.services.events.dispatchEvent(M.Alluvial.LINE_MOUSEOVER,{event:a,element:s,datum:o}),r.services.events.dispatchEvent(M.Tooltip.SHOW,{event:a,hoveredElement:s,items:[{label:o.target.name,value:o.value+(e.alluvial.units?" "+e.alluvial.units:""),color:l,labelIcon:r.getRightArrowIcon()}]})}).on("mousemove",function(a,o){r.services.events.dispatchEvent(M.Alluvial.LINE_MOUSEMOVE,{event:a,element:B(this),datum:o}),r.services.events.dispatchEvent(M.Tooltip.MOVE,{event:a})}).on("click",function(a,o){r.services.events.dispatchEvent(M.Alluvial.LINE_CLICK,{event:a,element:B(this),datum:o})}).on("mouseout",function(a,o){var s=B(this);i(this,"mouseout"),s.classed("link-hovered",!1),r.services.events.dispatchEvent(M.Alluvial.LINE_MOUSEOUT,{event:a,element:s,datum:o}),r.services.events.dispatchEvent(M.Tooltip.HIDE,{event:a,hoveredElement:s})})},n.prototype.addNodeEventListener=function(){var e=this,r=this,i=xa(function(a,o){if(a===void 0&&(a=[]),o===void 0&&(o="mouseover"),o==="mouseout"||a.length===0){r.parent.selectAll("path.link").classed("link-hovered",!1).data(e.graph.links,function(l){return l.index}).order().style("stroke-opacity",oe.opacity.default);return}var s=r.parent.selectAll("path.link").transition().call(function(l){return e.services.transitions.setupTransition({transition:l,name:"alluvial-link-mouse-highlight"})});s.style("stroke-opacity",function(l){return a.some(function(u){return u===l.index})?(B(this).classed("link-hovered",!0).raise(),oe.opacity.selected):oe.opacity.unfocus})},66);r.parent.selectAll(".node-group").on("mouseover",function(a,o){var s=B(this),l=[];if(r.traverse({link:"sourceLinks",node:"target"},o,l),r.traverse({link:"targetLinks",node:"source"},o,l),l.length){var u=$r(s.attr("transform"));if(s.attr("transform","translate("+(u.x-2)+", "+u.y+")"),s.classed("node-hovered",!0).selectAll("rect.node").attr("width",8),o.x0-2===0){var c=r.services.domUtils.generateElementIDString("alluvial-node-title-"+o.index),f=r.parent.select("g#"+c),h=$r(f.attr("transform"));f.attr("transform","translate("+(h.x+4)+","+h.y+")")}var p=r.services.domUtils.generateElementIDString("alluvial-node-text-"+o.index);r.parent.select("text#"+p).style("font-weight","bold"),i(l,"mouseover"),r.services.events.dispatchEvent(M.Alluvial.NODE_MOUSEOVER,{event:a,element:s,datum:o})}}).on("mousemove",function(a,o){r.services.events.dispatchEvent(M.Alluvial.NODE_MOUSEMOVE,{event:a,element:B(this),datum:o}),r.services.events.dispatchEvent(M.Tooltip.MOVE,{event:a})}).on("click",function(a,o){r.services.events.dispatchEvent(M.Alluvial.NODE_CLICK,{event:a,element:B(this),datum:o})}).on("mouseout",function(a,o){var s=B(this),l=$r(s.attr("transform"));if(s.classed("node-hovered",!1).attr("transform","translate("+(l.x+2)+", "+l.y+")").select("rect.node").attr("width",oe.nodeWidth),o.x0-2===0){var u=r.services.domUtils.generateElementIDString("alluvial-node-title-"+o.index),c=r.parent.select("g#"+u),f=$r(c.attr("transform"));c.attr("transform","translate("+(f.x-4)+","+f.y+")")}var h=r.services.domUtils.generateElementIDString("alluvial-node-text-"+o.index);r.parent.select("text#"+h).style("font-weight","normal"),i([],"mouseout"),r.services.events.dispatchEvent(M.Alluvial.NODE_MOUSEOUT,{event:a,element:s,datum:o}),r.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:s})})},n.prototype.traverse=function(e,r,i){var a=this;i===void 0&&(i=[]);var o=r[e.link].map(function(s){return i.push(s.index),s[e.node]});o.forEach(function(s){return a.traverse(e,s,i)})},n.prototype.getRightArrowIcon=function(){return`
		<svg xmlns="http://www.w3.org/2000/svg" class="arrow-right" width="32" height="32" viewBox="0 0 32 32">
			<polygon points="18 6 16.57 7.393 24.15 15 4 15 4 17 24.15 17 16.57 24.573 18 26 28 16 18 6"/>
			<rect width="32" height="32"/>
		</svg>`},n.prototype.destroy=function(){this.parent.selectAll("path.line,.node-group").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null)},n}(ct),Ck=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dk=function(t){Ck(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="heatmap",e.renderType=Q.SVG,e.matrix={},e.xBandwidth=0,e.yBandwidth=0,e.translationUnits={x:0,y:0},e.handleAxisOnHover=function(r){var i=r.detail,a=i.datum,o=e.model.getUniqueRanges(),s=e.model.getUniqueDomain(),l=e.services.cartesianScales.getDomainLabel(),u=e.services.cartesianScales.getRangeLabel(),c=e.services.cartesianScales.getMainXScale(),f=e.services.cartesianScales.getMainYScale(),h="",p=null,d=null,g=null;e.matrix[a]!==void 0?(h=l,o.forEach(function(m){if(typeof e.matrix[a][m].value=="number"){var y=e.matrix[a][m].value;if(p===null){p=y,d=y,g=y;return}p+=y,d=y<d?y:d,g=y>g?y:g}})):(h=u,s.forEach(function(m){if(typeof e.matrix[m][a].value=="number"){var y=e.matrix[m][a].value;if(p===null){p=y,d=y,g=y;return}p+=y,d=y<d?y:d,g=y>g?y:g}})),c(a)!==void 0?e.parent.select("g.multi-cell.column-highlight").classed("highlighter-hidden",!1).attr("transform","translate("+c(a)+", "+ln(f.range())+")"):f(a)!==void 0&&e.parent.select("g.multi-cell.row-highlight").classed("highlighter-hidden",!1).attr("transform","translate("+ln(c.range())+","+f(a)+")"),e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:i.event,hoveredElement:B(r.detail.element),items:[{label:h,value:a,bold:!0},{label:"Min",value:d!==null?d:"-"},{label:"Max",value:g!==null?g:"-"},{label:"Average",value:p!==null?p/s.length:"-"}]})},e.handleAxisMouseOut=function(r){e.parent.selectAll("g.multi-cell").classed("highlighter-hidden",!0),e.services.events.dispatchEvent(M.Tooltip.HIDE,{event:r})},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(M.Axis.LABEL_MOUSEOVER,this.handleAxisOnHover),e.addEventListener(M.Axis.LABEL_MOUSEOUT,this.handleAxisMouseOut),e.addEventListener(M.Axis.LABEL_FOCUS,this.handleAxisOnHover),e.addEventListener(M.Axis.LABEL_BLUR,this.handleAxisMouseOut)},n.prototype.render=function(e){var r=this,i=this.getComponentContainer({withinChartClip:!0});i.lower();var a=this.services.cartesianScales;if(this.matrix=this.model.getMatrix(),i.html(""),!b(this.getOptions(),"data","loading")){var o=a.getMainXScale(),s=a.getMainYScale(),l=a.getDomainIdentifier(),u=a.getRangeIdentifier(),c=this.model.getUniqueDomain(),f=this.model.getUniqueRanges(),h=this.model.getMatrixAsArray(),p=o.range(),d=s.range();this.xBandwidth=Math.abs((p[1]-p[0])/c.length),this.yBandwidth=Math.abs((d[1]-d[0])/f.length);var g=this.services.domUtils.generateElementIDString("heatmap-pattern-stripes");i.append("defs").append("pattern").attr("id",g).attr("width",3).attr("height",3).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("rect").classed("pattern-fill",!0).attr("width",.5).attr("height",8);var m=i.selectAll().data(h).enter().append("g").attr("class",function(y){return"heat-"+y.index}).classed("cell",!0).attr("transform",function(y){return"translate("+o(y[l])+", "+s(y[u])+")"}).append("rect").attr("class",function(y){return r.model.getColorClassName({value:y.value,originalClassName:"heat-"+y.index})}).classed("heat",!0).classed("null-state",function(y){return y.index===-1||y.value===null}).attr("width",this.xBandwidth).attr("height",this.yBandwidth).style("fill",function(y){return y.index===-1||y.value===null?"url(#"+g+")":r.model.getFillColor(Number(y.value))}).attr("aria-label",function(y){return y.value});this.createOuterBox("g.cell-highlight",this.xBandwidth,this.yBandwidth),this.createOuterBox("g.multi-cell.column-highlight",this.xBandwidth,Math.abs(d[1]-d[0])),this.createOuterBox("g.multi-cell.row-highlight",Math.abs(p[1]-p[0]),this.yBandwidth),this.determineDividerStatus()&&(m.style("stroke-width","1px"),this.parent.select("g.cell-highlight").classed("cell-2",!0)),this.addEventListener()}},n.prototype.createOuterBox=function(e,r,i){var a=U.appendOrSelect(this.parent,e).classed("shadows",!0).classed("highlighter-hidden",!0);U.appendOrSelect(a,"line.top").attr("x1",-1).attr("x2",r+1),U.appendOrSelect(a,"line.left").attr("x1",0).attr("y1",-1).attr("x2",0).attr("y2",i+1),U.appendOrSelect(a,"line.down").attr("x1",-1).attr("x2",r+1).attr("y1",i).attr("y2",i),U.appendOrSelect(a,"line.right").attr("x1",r).attr("x2",r).attr("y1",-1).attr("y2",i+1)},n.prototype.determineDividerStatus=function(){var e=b(this.getOptions(),"heatmap","divider","state");return e!==ir.OFF&&(e===ir.AUTO&&Qs.minCellDividerDimension<=this.xBandwidth&&Qs.minCellDividerDimension<=this.yBandwidth||e===ir.ON)},n.prototype.addEventListener=function(){var e=this,r=this.services.cartesianScales,i=this.getOptions(),a=bt(i,"tooltip.totalLabel"),o=r.getDomainIdentifier(),s=r.getRangeIdentifier(),l=r.getDomainLabel(),u=r.getRangeLabel();this.parent.selectAll("g.cell").on("mouseover",function(c,f){var h=B(this),p=h.select("rect.heat"),d=p.classed("null-state");if(!d){var g=$r(h.attr("transform"));e.parent.select("g.cell-highlight").attr("transform","translate("+(g.x+e.translationUnits.x)+", "+(g.y+e.translationUnits.y)+")").classed("highlighter-hidden",!1),e.services.events.dispatchEvent(M.Heatmap.HEATMAP_MOUSEOVER,{event:c,element:p,datum:f}),e.services.events.dispatchEvent(M.Tooltip.SHOW,{event:c,items:[{label:l,value:f[o]},{label:u,value:f[s]},{label:a||"Total",value:f.value,color:p.style("fill")}]})}}).on("mousemove",function(c,f){e.services.events.dispatchEvent(M.Heatmap.HEATMAP_MOUSEMOVE,{event:c,element:B(this),datum:f}),e.services.events.dispatchEvent(M.Tooltip.MOVE,{event:c})}).on("click",function(c,f){e.services.events.dispatchEvent(M.Heatmap.HEATMAP_CLICK,{event:c,element:B(this),datum:f})}).on("mouseout",function(c,f){var h=B(this),p=h.select("rect.heat"),d=p.classed("null-state");e.parent.select("g.cell-highlight").classed("highlighter-hidden",!0),d||(e.services.events.dispatchEvent(M.Heatmap.HEATMAP_MOUSEOUT,{event:c,element:p,datum:f}),e.services.events.dispatchEvent(M.Tooltip.HIDE,{event:c,hoveredElement:p}))})},n.prototype.destroy=function(){this.parent.selectAll("rect.heat").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(M.Legend.ITEM_HOVER,this.handleAxisOnHover),e.removeEventListener(M.Legend.ITEM_MOUSEOUT,this.handleAxisMouseOut)},n}(ct),Lk=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dn=function(t){Lk(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="spacer",e}return n.prototype.render=function(){this.getComponentContainer().style("width",(this.configs.size||Js.default.size)+"px").style("height",(this.configs.size||Js.default.size)+"px").attr("opacity",0)},n}(ct),Pk=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Me=function(t){Pk(n,t);function n(e,r,i,a){var o=t.call(this,e,r,a)||this;return o.type="layout",o.configs=a,o.children=i,o._instanceID=n.instanceID++,o.init(),o}return n.prototype.init=function(){this.children.forEach(function(e){e.components.forEach(function(r){r.init()})})},n.prototype.getPreferedAndFixedSizeSum=function(){var e=this.parent,r=0;return e.selectAll("div.layout-child-"+this._instanceID).filter(function(i){var a=b(i,"growth");return a===st.PREFERRED||a===st.FIXED}).each(function(i){r+=i.size}),r},n.prototype.getNumOfStretchChildren=function(){var e=this.parent;return e.selectAll("div.layout-child-"+this._instanceID).filter(function(r){return b(r,"growth")===st.STRETCH}).size()},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.parent,a=U.getHTMLElementSize(i.node()),o=a.width,s=a.height,l=this.configs.direction===wt.ROW||this.configs.direction===wt.ROW_REVERSE,u=b(this.model.getOptions(),"style","prefix"),c=i.classed(Wt+"--"+u+"--layout-row",this.configs.direction===wt.ROW).classed(Wt+"--"+u+"--layout-row-reverse",this.configs.direction===wt.ROW_REVERSE).classed(Wt+"--"+u+"--layout-column",this.configs.direction===wt.COLUMN).classed(Wt+"--"+u+"--layout-column-reverse",this.configs.direction===wt.COLUMN_REVERSE).classed(Wt+"--"+u+"--layout-alignitems-center",this.configs.alignItems===dr.CENTER).selectAll("div.layout-child-"+this._instanceID).data(this.children,function(p){return p.id}),f=c.enter().append("div");f.merge(i.selectAll("div.layout-child-"+this._instanceID)).attr("class",function(p){return"layout-child layout-child-"+r._instanceID+" "+p.id}).each(function(p){var d=this;p.components.forEach(function(g){var m=B(d),y=b(p,"renderType"),v=y===Q.SVG;g.setParent(v?U.appendOrSelect(m,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):m);var _=b(p,"growth");(_===st.PREFERRED||_===st.FIXED)&&g.render(e)})}),i.selectAll("div.layout-child-"+this._instanceID).style("height",null).style("width",null).each(function(p){var d=b(p,"growth"),g=b(p,"renderType"),m=g===Q.SVG?U.getSVGElementSize(B(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):U.getHTMLElementSize(this);if(d===st.PREFERRED){var y=l?m.width:m.height,v=l?o:s;p.size=y/v*100}}),c.exit().remove(),this.children.filter(function(p){var d=b(p,"growth");return d===st.STRETCH}).forEach(function(p,d){p.size=(100-+r.getPreferedAndFixedSizeSum())/+r.getNumOfStretchChildren()});var h=i.selectAll("div.layout-child-"+this._instanceID).data(this.children,function(p){return p.id});l?h.style("width",function(p){return p.size/100*o+"px"}).style("height","100%"):h.style("height",function(p){return p.size/100*s+"px"}).style("width","100%"),h.each(function(p,d){p.components.forEach(function(g){var m=b(p,"growth");m===st.STRETCH&&g.render(e)})})},n.prototype.setModel=function(e){t.prototype.setModel.call(this,e),this.children.forEach(function(r){r.components.forEach(function(i){return i.setModel(e)})})},n.prototype.setServices=function(e){t.prototype.setServices.call(this,e),this.children.forEach(function(r){r.components.forEach(function(i){return i.setServices(e)})})},n.prototype.destroy=function(){this.children.forEach(function(e){e.components.forEach(function(r){return r.destroy()})})},n.instanceID=Math.floor(Math.random()*99999999999),n}(ct),Rk=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),kv=function(t){Rk(n,t);function n(e,r,i){var a,o=t.call(this,e,r,i)||this;return o.type="axes",o.renderType=Q.SVG,o.truncation=(a={},a[W.LEFT]=!1,a[W.RIGHT]=!1,a[W.TOP]=!1,a[W.BOTTOM]=!1,a),i&&(o.configs=i),o.margins=o.configs.margins,o}return n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.configs.position,a=this.getOptions(),o=b(a,"axes",i,"visible"),s=this.getComponentContainer(),l=U.getSVGElementSize(s,{useAttrs:!0}),u=l.width,c=l.height,f=U.appendOrSelect(s,"g.axis."+i),h,p;i===W.BOTTOM||i===W.TOP?(h=this.configs.axes[W.LEFT]?this.margins.left:0,p=this.configs.axes[W.RIGHT]?u-this.margins.right:u):(h=c-this.margins.bottom,p=this.margins.top);var d=this.services.cartesianScales.getScaleByPosition(i);this.scaleType===K.LABELS||this.scaleType===K.LABELS_RATIO?d.rangeRound([h,p]):d.range([h,p]);var g;switch(i){case W.LEFT:g=pv;break;case W.BOTTOM:g=Hu;break;case W.RIGHT:g=JC;break;case W.TOP:g=QC;break}f.attr("aria-label",i+" axis");var m=!f.select("g.ticks").empty(),y=U.appendOrSelect(f,"g.ticks");m||(y.attr("role",nt.GRAPHICS_OBJECT+" "+nt.GROUP),y.attr("aria-label",i+" ticks"));var v=U.appendOrSelect(f,"g.ticks.invisible").style("opacity","0").style("pointer-events","none").attr("aria-hidden",!0).attr("aria-label","invisible "+i+" ticks"),_=b(a,"axes",i),E=this.scaleType===K.TIME||_.scaleType===K.TIME,x=i===W.LEFT||i===W.RIGHT,O=this.model.get("zoomDomain");if(O&&E&&!x&&d.domain(O),!o){y.attr("aria-hidden",!0);return}var P=b(_,"scaleType"),S=b(a,"data","loading"),A=b(_,"ticks","number"),I=b(_,"ticks","values"),w=b(_,"truncation","type"),N=b(_,"truncation","threshold"),T=b(_,"truncation","numCharacter"),R=A!==null,C=b(a,"timeScale"),D=U.appendOrSelect(v,"g.tick"),k=U.appendOrSelect(D,"text").text("0"),$=U.getSVGElementSize(k.node(),{useBBox:!0}).height;D.remove();var L=this.scaleType||_.scaleType||K.LINEAR,V=g(d).tickSizeOuter(0);if(d.ticks){var H=void 0;if(R?H=A:(H=Ue.ticks.number,x&&(H=this.getNumberOfFittingTicks(c,$,Ue.ticks.verticalSpaceRatio))),d.ticks().length===1&&d.ticks()[0]===0&&(H=0),V.ticks(H),E)if(!d.ticks(H).length)V.tickValues([]);else{var j=b(a,"timeScale","addSpaceOnEdges"),tt=b(a,"axes",i,"domain"),it=void 0,lt=d.copy();j&&!tt&&lt.nice(H),it=lt.ticks(H),j&&it.length>2&&!tt&&(it.splice(it.length-1,1),it.splice(0,1)),V.tickValues(it)}}var vt,rt=b(_,"ticks","formatter");if(E){var ut=Ol(V.tickValues());rt===null?vt=function(ot,Gt){return bl(ot,Gt,V.tickValues(),ut,C)}:vt=function(ot,Gt){var qv=bl(ot,Gt,V.tickValues(),ut,C);return rt(ot,Gt,qv)}}else rt===null?L===K.LINEAR&&(vt=function(ot){return ot.toLocaleString()}):vt=rt;V.tickFormat(vt);var Y=this.services.cartesianScales.getScaleByPosition(i).domain(),X=Y[0],Z=Y[1],z;if(I){if(E)I.forEach(function(ot,Gt){ot.getTime===void 0&&(I[Gt]=new Date(ot))}),z=I.filter(function(ot){var Gt=ot.getTime();return Gt>=new Date(X).getTime()&&Gt<=new Date(Z).getTime()});else if(P===K.LABELS){var pt=this.services.cartesianScales.getScaleByPosition(i).domain();z=I.filter(function(ot){return pt.includes(ot)})}else z=I.filter(function(ot){return ot>=X&&ot<=Z});V.tickValues(z)}switch(i){case W.LEFT:y.attr("transform","translate("+this.margins.left+", 0)");break;case W.BOTTOM:y.attr("transform","translate(0, "+(c-this.margins.bottom)+")");break;case W.RIGHT:y.attr("transform","translate("+(u-this.margins.right)+", 0)");break;case W.TOP:y.attr("transform","translate(0, "+this.margins.top+")");break}var ft=this.model.isDataEmpty();if(_.title){var G=U.appendOrSelect(f,"text.axis-title").html(ft||S?"":_.title),q=b(_,"titleOrientation");switch(i){case W.LEFT:q===ma.RIGHT?G.attr("transform","rotate(90)").attr("y",0).attr("x",d.range()[0]/2).attr("dy","-0.5em").style("text-anchor","middle"):G.attr("transform","rotate(-90)").attr("y",0).attr("x",-(d.range()[0]/2)).attr("dy","0.75em").style("text-anchor","middle");break;case W.BOTTOM:G.attr("transform","translate("+(this.margins.left/2+d.range()[1]/2)+", "+(c+4)+")").style("text-anchor","middle");break;case W.RIGHT:q===ma.LEFT?G.attr("transform","rotate(-90)").attr("y",u).attr("x",-(d.range()[0]/2)).style("text-anchor","middle"):G.attr("transform","rotate(90)").attr("y",-u).attr("x",d.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case W.TOP:var F=U.getSVGElementSize(G,{useBBox:!0}).height;G.attr("transform","translate("+(this.margins.left/2+d.range()[1]/2)+", "+F/2+")").style("text-anchor","middle");break}}if(E){var ht=Ol(V.tickValues()),Pe=C.showDayName,ae=y;e&&(y=y.transition().call(function(ot){return r.services.transitions.setupTransition({transition:ot,name:"axis-update",animate:e})})),y=y.call(V);var Xu=ae.selectAll(".tick").data(V.tickValues(),d).order().select("text");Xu.style("font-weight",function(ot,Gt){return uv(ot,Gt,V.tickValues(),ht,Pe)?"bold":"normal"})}else!e||!m?y=y.call(V):y=y.transition().call(function(ot){return r.services.transitions.setupTransition({transition:ot,name:"axis-update",animate:e})}).call(V);if(v.call(V),i===W.BOTTOM||i===W.TOP){var Qe=!1,Je=b(_,"ticks","rotation");if(Je===Qr.ALWAYS)Qe=!0;else if(Je===Qr.NEVER)Qe=!1;else if(!Je||Je===Qr.AUTO)if(d.step){var No=v.selectAll("g.tick text").nodes();Qe=No.some(function(ot){return U.getSVGElementSize(ot,{useBBox:!0}).width>=d.step()})}else{Qe=!1;var Ui=v.append("text").text("A"),zv=U.getSVGElementSize(Ui.node(),{useBBox:!0}).width,Zu;v.selectAll("g.tick").each(function(){var ot=B(this),Gt=parseFloat(b(Ne(this),"tx"));Gt!==null&&Zu+ot.text().length*zv*.8>=Gt&&(Qe=!0),Zu=Gt}),Ui.remove()}Qe?(R||(V.ticks(this.getNumberOfFittingTicks(u,$,Ue.ticks.horizontalSpaceRatio)),v.call(V),y.call(V)),f.selectAll("g.ticks g.tick text").attr("transform","rotate(-45)").attr("text-anchor",i===W.TOP?"start":"end")):f.selectAll("g.ticks g.tick text").attr("transform",null).attr("text-anchor",null)}if(S?f.attr("opacity",0):f.attr("opacity",1),y.selectAll("g.tick").attr("aria-label",function(ot){return ot}),v.selectAll("g.tick").attr("aria-label",function(ot){return ot}),w!==le.NONE&&P===K.LABELS&&!I){var $i=this.services.cartesianScales.getScaleDomain(i);if($i.length>0){var Wv=s.select("g.axis."+i+" g.ticks g.tick").html();f.selectAll("g.ticks g.tick").html(Wv);var jv=this;f.selectAll("g.tick text").data($i).text(function(ot){return ot.length>N?(jv.truncation[i]=!0,di(ot,w,T)):ot}),this.getInvisibleAxisRef().selectAll("g.tick text").data($i).text(function(ot){return ot.length>N?di(ot,w,T):ot}),f.selectAll("g.ticks").html(this.getInvisibleAxisRef().html()),f.selectAll("g.tick text").data($i)}}this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this.getComponentContainer(),r=this.configs.position,i=U.appendOrSelect(e,"g.axis."+r),a=this.getOptions(),o=b(a,"axes",r),s=b(o,"scaleType"),l=b(o,"truncation","threshold"),u=this;i.selectAll("g.tick text").on("mouseover",function(c,f){u.services.events.dispatchEvent(M.Axis.LABEL_MOUSEOVER,{event:c,element:B(this),datum:f}),s===K.LABELS&&f.length>l&&u.services.events.dispatchEvent(M.Tooltip.SHOW,{event:c,hoveredElement:B(this),content:f})}).on("mousemove",function(c,f){u.services.events.dispatchEvent(M.Axis.LABEL_MOUSEMOVE,{event:c,element:B(this),datum:f}),s===K.LABELS&&f.length>l&&u.services.events.dispatchEvent(M.Tooltip.MOVE,{event:c})}).on("click",function(c,f){u.services.events.dispatchEvent(M.Axis.LABEL_CLICK,{event:c,element:B(this),datum:f})}).on("mouseout",function(c,f){u.services.events.dispatchEvent(M.Axis.LABEL_MOUSEOUT,{event:c,element:B(this),datum:f}),s===K.LABELS&&u.services.events.dispatchEvent(M.Tooltip.HIDE)})},n.prototype.getInvisibleAxisRef=function(){var e=this.configs.position;return this.getComponentContainer().select("g.axis."+e+" g.ticks.invisible")},n.prototype.getTitleRef=function(){var e=this.configs.position;return this.getComponentContainer().select("g.axis."+e+" text.axis-title")},n.prototype.getNumberOfFittingTicks=function(e,r,i){var a=Math.floor(e/(r*i));return Dd(a,2,Ue.ticks.number)},n.prototype.destroy=function(){var e=this.getComponentContainer(),r=this.configs.position,i=U.appendOrSelect(e,"g.axis."+r);i.selectAll("g.tick text").on("mouseover",null).on("mousemove",null).on("mouseout",null)},n}(ct),Ik=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ro=globalThis&&globalThis.__assign||function(){return ro=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ro.apply(this,arguments)},kk=function(t){Ik(n,t);function n(e,r,i){return t.call(this,e,r,i)||this}return n.prototype.render=function(e){e===void 0&&(e=!0),t.prototype.render.call(this,e),t.prototype.destroy.call(this);var r=this.configs.position,i=this.getComponentContainer(),a=U.appendOrSelect(i,"g.axis."+r),o=this;a.selectAll("g.tick").each(function(s,l){var u=B(this);u.classed("tick-hover",!0).attr("tabindex",l===0?0:-1);var c=u.select("text"),f=U.getSVGElementSize(c,{useBBox:!0}),h=f.width,p=f.height,d=U.appendOrSelect(u,"rect.axis-holder"),g=0,m=0;switch(r){case W.LEFT:g=-h+Number(c.attr("x")),m=-(p/2);break;case W.RIGHT:g=Math.abs(Number(c.attr("x"))),m=-(p/2);break;case W.TOP:g=-(h/2),m=-p+Number(c.attr("y"))/2,o.truncation[r]&&(g=0,d.attr("transform","rotate(-45)"));break;case W.BOTTOM:g=-(h/2),m=p/2-2,o.truncation[r]&&(g=-h,d.attr("transform","rotate(-45)"));break}d.attr("x",g-Ue.hover.rectanglePadding).attr("y",m).attr("width",h+Ue.hover.rectanglePadding*2).attr("height",p).lower()}),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this.getComponentContainer(),r=this.configs.position,i=U.appendOrSelect(e,"g.axis."+r),a=this.getOptions(),o=b(a,"axes",r),s=b(o,"scaleType"),l=b(o,"truncation","threshold"),u=this;i.selectAll("g.tick.tick-hover").on("mouseover",function(c){var f=B(this).select("text"),h=f.datum();u.services.events.dispatchEvent(M.Axis.LABEL_MOUSEOVER,{event:c,element:f,datum:h}),s===K.LABELS&&h.length>l&&u.services.events.dispatchEvent(M.Tooltip.SHOW,{event:c,element:f,datum:h})}).on("mousemove",function(c){var f=B(this).select("text"),h=f.datum();u.services.events.dispatchEvent(M.Axis.LABEL_MOUSEMOVE,{event:c,element:f,datum:h}),u.services.events.dispatchEvent(M.Tooltip.MOVE,{event:c})}).on("click",function(c){u.services.events.dispatchEvent(M.Axis.LABEL_CLICK,{event:c,element:B(this).select("text"),datum:B(this).select("text").datum()})}).on("mouseout",function(c){u.services.events.dispatchEvent(M.Axis.LABEL_MOUSEOUT,{event:c,element:B(this).select("text"),datum:B(this).select("text").datum()}),s===K.LABELS&&u.services.events.dispatchEvent(M.Tooltip.HIDE)}).on("focus",function(c){var f={clientX:0,clientY:0};if(c.target){c.target.focus();var h=c.target.getBoundingClientRect();f.clientX=h.x,f.clientY=h.y}u.services.events.dispatchEvent(M.Axis.LABEL_FOCUS,{event:ro(ro({},c),f),element:B(this),datum:B(this).select("text").datum()})}).on("blur",function(c){u.services.events.dispatchEvent(M.Axis.LABEL_BLUR,{event:c,element:B(this),datum:B(this).select("text").datum()})}).on("keydown",function(c){c.key&&c.key==="Escape"&&(u.services.events.dispatchEvent(M.Tooltip.HIDE),u.services.events.dispatchEvent(M.Axis.LABEL_BLUR,{event:c,element:B(this),datum:B(this).select("text").datum()})),r===W.LEFT||r===W.RIGHT?c.key&&c.key==="ArrowUp"?u.goNext(this,c):c.key&&c.key==="ArrowDown"&&u.goPrevious(this,c):c.key&&c.key==="ArrowLeft"?u.goPrevious(this,c):c.key&&c.key==="ArrowRight"&&u.goNext(this,c)})},n.prototype.goNext=function(e,r){e.nextElementSibling&&e.nextElementSibling.tagName!=="path"&&e.nextElementSibling.dispatchEvent(new Event("focus")),r.preventDefault()},n.prototype.goPrevious=function(e,r){e.previousElementSibling&&e.previousElementSibling.tagName!=="path"&&e.previousElementSibling.dispatchEvent(new Event("focus")),r.preventDefault()},n.prototype.destroy=function(){var e=this.getComponentContainer(),r=this.configs.position,i=U.appendOrSelect(e,"g.axis."+r);i.selectAll("g.tick.tick-hover").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("focus",null).on("blur",null)},n}(kv),Nk=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zt=function(t){Nk(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="2D-axes",e.renderType=Q.SVG,e.children={},e.thresholds=[],e.margins={top:0,right:0,bottom:0,left:0},e}return n.prototype.render=function(e){var r=this;e===void 0&&(e=!1);var i={},a=Object.keys(W),o=b(this.getOptions(),"axes");a.forEach(function(u){var c=o[W[u]];c&&(i[W[u]]=!0)}),this.configs.axes=i,a.forEach(function(u){var c=W[u];if(r.configs.axes[c]&&!r.children[c]){var f={position:c,axes:r.configs.axes,margins:r.margins},h=r.model.axisFlavor===li.DEFAULT?new kv(r.model,r.services,f):new kk(r.model,r.services,f);h.setModel(r.model),h.setServices(r.services),h.setParent(r.parent),r.children[c]=h}}),Object.keys(this.children).forEach(function(u){var c=r.children[u];c.render(e)});var s={};Object.keys(this.children).forEach(function(u){var c=r.children[u],f=c.configs.position,h=c.getInvisibleAxisRef(),p=U.getSVGElementSize(h,{useBBox:!0}),d=p.width,g=p.height,m;switch(c.getTitleRef().empty()?m=0:(m=U.getSVGElementSize(c.getTitleRef(),{useBBox:!0}).height,(f===W.LEFT||f===W.RIGHT)&&(m+=5)),f){case W.TOP:s.top=g+m;break;case W.BOTTOM:s.bottom=g+m;break;case W.LEFT:s.left=d+m;break;case W.RIGHT:s.right=d+m;break}}),this.services.events.dispatchEvent(M.Axis.RENDER_COMPLETE);var l=Object.keys(s).some(function(u){return r.margins[u]!==s[u]});l&&(this.margins=Object.assign(this.margins,s),this.model.set({axesMargins:this.margins},{skipUpdate:!0}),this.services.events.dispatchEvent(M.ZoomBar.UPDATE),Object.keys(this.children).forEach(function(u){var c=r.children[u];c.margins=r.margins}),this.render(!0))},n}(ct),Bk={value:()=>{}};function zu(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new la(e)}function la(t){this._=t}function Uk(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}la.prototype=zu.prototype={constructor:la,on:function(t,n){var e=this._,r=Uk(t+"",e),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=$k(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<o;)if(i=(t=r[a]).type)e[i]=gh(e[i],t.name,n);else if(n==null)for(i in e)e[i]=gh(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new la(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,a;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};function $k(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function gh(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Bk,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}const zl={capture:!0,passive:!1};function Wl(t){t.preventDefault(),t.stopImmediatePropagation()}function Vk(t){var n=t.document.documentElement,e=B(t).on("dragstart.drag",Wl,zl);"onselectstart"in n?e.on("selectstart.drag",Wl,zl):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Hk(t,n){var e=t.document.documentElement,r=B(t).on("dragstart.drag",null);n&&(r.on("click.drag",Wl,zl),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var Mr=0,zr=0,Ur=0,Nv=1e3,io,Wr,ao=0,Ln=0,Io=0,xi=typeof performance=="object"&&performance.now?performance:Date,Bv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Wu(){return Ln||(Bv(Fk),Ln=xi.now()+Io)}function Fk(){Ln=0}function oo(){this._call=this._time=this._next=null}oo.prototype=Uv.prototype={constructor:oo,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?Wu():+e)+(n==null?0:+n),!this._next&&Wr!==this&&(Wr?Wr._next=this:io=this,Wr=this),this._call=t,this._time=e,jl()},stop:function(){this._call&&(this._call=null,this._time=1/0,jl())}};function Uv(t,n,e){var r=new oo;return r.restart(t,n,e),r}function Gk(){Wu(),++Mr;for(var t=io,n;t;)(n=Ln-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Mr}function mh(){Ln=(ao=xi.now())+Io,Mr=zr=0;try{Gk()}finally{Mr=0,Wk(),Ln=0}}function zk(){var t=xi.now(),n=t-ao;n>Nv&&(Io-=n,ao=t)}function Wk(){for(var t,n=io,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:io=e);Wr=t,jl(r)}function jl(t){if(!Mr){zr&&(zr=clearTimeout(zr));var n=t-Ln;n>24?(t<1/0&&(zr=setTimeout(mh,t-xi.now()-Io)),Ur&&(Ur=clearInterval(Ur))):(Ur||(ao=xi.now(),Ur=setInterval(zk,Nv)),Mr=1,Bv(mh))}}function yh(t,n,e){var r=new oo;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var jk=zu("start","end","cancel","interrupt"),qk=[],$v=0,_h=1,ql=2,ua=3,xh=4,Yl=5,ca=6;function ko(t,n,e,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(e in o)return;Yk(t,e,{name:n,index:r,group:i,on:jk,tween:qk,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:$v})}function ju(t,n){var e=me(t,n);if(e.state>$v)throw new Error("too late; already scheduled");return e}function De(t,n){var e=me(t,n);if(e.state>ua)throw new Error("too late; already running");return e}function me(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Yk(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=Uv(a,0,e.time);function a(u){e.state=_h,e.timer.restart(o,e.delay,e.time),e.delay<=u&&o(u-e.delay)}function o(u){var c,f,h,p;if(e.state!==_h)return l();for(c in r)if(p=r[c],p.name===e.name){if(p.state===ua)return yh(o);p.state===xh?(p.state=ca,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[c]):+c<n&&(p.state=ca,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[c])}if(yh(function(){e.state===ua&&(e.state=xh,e.timer.restart(s,e.delay,e.time),s(u))}),e.state=ql,e.on.call("start",t,t.__data__,e.index,e.group),e.state===ql){for(e.state=ua,i=new Array(h=e.tween.length),c=0,f=-1;c<h;++c)(p=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(i[++f]=p);i.length=f+1}}function s(u){for(var c=u<e.duration?e.ease.call(null,u/e.duration):(e.timer.restart(l),e.state=Yl,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);e.state===Yl&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){e.state=ca,e.timer.stop(),delete r[n];for(var u in r)return;delete t.__transition}}function Xl(t,n){var e=t.__transition,r,i,a=!0,o;if(e){n=n==null?null:n+"";for(o in e){if((r=e[o]).name!==n){a=!1;continue}i=r.state>ql&&r.state<Yl,r.state=ca,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[o]}a&&delete t.__transition}}function Xk(t){return this.each(function(){Xl(this,t)})}function Zk(t,n){var e,r;return function(){var i=De(this,t),a=i.tween;if(a!==e){r=e=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===n){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Kk(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var a=De(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:n,value:e},l=0,u=i.length;l<u;++l)if(i[l].name===n){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function Qk(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=me(this.node(),e).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((n==null?Zk:Kk)(e,t,n))}function qu(t,n,e){var r=t._id;return t.each(function(){var i=De(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return me(i,r).value[n]}}function Vv(t,n){var e;return(typeof n=="number"?te:n instanceof ze?Na:(e=ze(n))?(n=e,Na):Op)(t,n)}function Jk(t){return function(){this.removeAttribute(t)}}function tN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function eN(t,n,e){var r,i=e+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=n(r=o,e)}}function nN(t,n,e){var r,i=e+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=n(r=o,e)}}function rN(t,n,e){var r,i,a;return function(){var o,s=e(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=n(r=o,s)))}}function iN(t,n,e){var r,i,a;return function(){var o,s=e(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=n(r=o,s)))}}function aN(t,n){var e=xo(t),r=e==="transform"?iE:Vv;return this.attrTween(t,typeof n=="function"?(e.local?iN:rN)(e,r,qu(this,"attr."+t,n)):n==null?(e.local?tN:Jk)(e):(e.local?nN:eN)(e,r,n))}function oN(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function sN(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function lN(t,n){var e,r;function i(){var a=n.apply(this,arguments);return a!==r&&(e=(r=a)&&sN(t,a)),e}return i._value=n,i}function uN(t,n){var e,r;function i(){var a=n.apply(this,arguments);return a!==r&&(e=(r=a)&&oN(t,a)),e}return i._value=n,i}function cN(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=xo(t);return this.tween(e,(r.local?lN:uN)(r,n))}function fN(t,n){return function(){ju(this,t).delay=+n.apply(this,arguments)}}function hN(t,n){return n=+n,function(){ju(this,t).delay=n}}function dN(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?fN:hN)(n,t)):me(this.node(),n).delay}function pN(t,n){return function(){De(this,t).duration=+n.apply(this,arguments)}}function vN(t,n){return n=+n,function(){De(this,t).duration=n}}function gN(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?pN:vN)(n,t)):me(this.node(),n).duration}function mN(t,n){if(typeof n!="function")throw new Error;return function(){De(this,t).ease=n}}function yN(t){var n=this._id;return arguments.length?this.each(mN(n,t)):me(this.node(),n).ease}function _N(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;De(this,t).ease=e}}function xN(t){if(typeof t!="function")throw new Error;return this.each(_N(this._id,t))}function bN(t){typeof t!="function"&&(t=Qd(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new qe(r,this._parents,this._name,this._id)}function ON(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=n[s],u=e[s],c=l.length,f=o[s]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(f[p]=h);for(;s<r;++s)o[s]=n[s];return new qe(o,this._parents,this._name,this._id)}function TN(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function wN(t,n,e){var r,i,a=TN(n)?ju:De;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(n,e),o.on=i}}function EN(t,n){var e=this._id;return arguments.length<2?me(this.node(),e).on.on(t):this.each(wN(e,t,n))}function SN(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function MN(){return this.on("end.remove",SN(this._id))}function AN(t){var n=this._name,e=this._id;typeof t!="function"&&(t=cu(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),c,f,h=0;h<l;++h)(c=s[h])&&(f=t.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,ko(u[h],n,e,h,u,me(c,e)));return new qe(a,this._parents,n,e)}function CN(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Kd(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var h=t.call(c,c.__data__,f,l),p,d=me(c,e),g=0,m=h.length;g<m;++g)(p=h[g])&&ko(p,n,e,g,h,d);a.push(h),o.push(c)}return new qe(a,o,n,e)}var DN=Di.prototype.constructor;function LN(){return new DN(this._groups,this._parents)}function PN(t,n){var e,r,i;return function(){var a=yr(this,t),o=(this.style.removeProperty(t),yr(this,t));return a===o?null:a===e&&o===r?i:i=n(e=a,r=o)}}function Hv(t){return function(){this.style.removeProperty(t)}}function RN(t,n,e){var r,i=e+"",a;return function(){var o=yr(this,t);return o===i?null:o===r?a:a=n(r=o,e)}}function IN(t,n,e){var r,i,a;return function(){var o=yr(this,t),s=e(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),yr(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=n(r=o,s))}}function kN(t,n){var e,r,i,a="style."+n,o="end."+a,s;return function(){var l=De(this,t),u=l.on,c=l.value[a]==null?s||(s=Hv(n)):void 0;(u!==e||i!==c)&&(r=(e=u).copy()).on(o,i=c),l.on=r}}function NN(t,n,e){var r=(t+="")=="transform"?rE:Vv;return n==null?this.styleTween(t,PN(t,r)).on("end.style."+t,Hv(t)):typeof n=="function"?this.styleTween(t,IN(t,r,qu(this,"style."+t,n))).each(kN(this._id,t)):this.styleTween(t,RN(t,r,n),e).on("end.style."+t,null)}function BN(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function UN(t,n,e){var r,i;function a(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&BN(t,o,e)),r}return a._value=n,a}function $N(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,UN(t,n,e??""))}function VN(t){return function(){this.textContent=t}}function HN(t){return function(){var n=t(this);this.textContent=n??""}}function FN(t){return this.tween("text",typeof t=="function"?HN(qu(this,"text",t)):VN(t==null?"":t+""))}function GN(t){return function(n){this.textContent=t.call(this,n)}}function zN(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&GN(i)),n}return r._value=t,r}function WN(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,zN(t))}function jN(){for(var t=this._name,n=this._id,e=Fv(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var c=me(l,n);ko(l,t,e,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new qe(r,this._parents,t,e)}function qN(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};e.each(function(){var u=De(this,r),c=u.on;c!==t&&(n=(t=c).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(l)),u.on=n}),i===0&&a()})}var YN=0;function qe(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Fv(){return++YN}var Re=Di.prototype;qe.prototype={constructor:qe,select:AN,selectAll:CN,selectChild:Re.selectChild,selectChildren:Re.selectChildren,filter:bN,merge:ON,selection:LN,transition:jN,call:Re.call,nodes:Re.nodes,node:Re.node,size:Re.size,empty:Re.empty,each:Re.each,on:EN,attr:aN,attrTween:cN,style:NN,styleTween:$N,text:FN,textTween:WN,remove:MN,tween:Qk,delay:dN,duration:gN,ease:yN,easeVarying:xN,end:qN,[Symbol.iterator]:Re[Symbol.iterator]};var XN={time:null,delay:0,duration:250,ease:Hh};function ZN(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function KN(t){var n,e;t instanceof qe?(n=t._id,t=t._name):(n=Fv(),(e=XN).time=Wu(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&ko(l,t,n,u,o,e||ZN(l,n));return new qe(r,this._parents,t,n)}Di.prototype.interrupt=Xk;Di.prototype.transition=KN;const fs=t=>()=>t;function QN(t,{sourceEvent:n,target:e,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function JN(t){t.stopImmediatePropagation()}function hs(t){t.preventDefault(),t.stopImmediatePropagation()}var bh={name:"drag"},ds={name:"space"},Wn={name:"handle"},jn={name:"center"};const{abs:Oh,max:Vt,min:Ht}=Math;function Th(t){return[+t[0],+t[1]]}function wh(t){return[Th(t[0]),Th(t[1])]}var fa={name:"x",handles:["w","e"].map(so),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ps={name:"y",handles:["n","s"].map(so),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ie={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Eh={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Sh={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},tB={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},eB={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function so(t){return{type:t}}function nB(t){return!t.ctrlKey&&!t.button}function rB(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function iB(){return navigator.maxTouchPoints||"ontouchstart"in this}function vs(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function aB(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Gv(){return oB(fa)}function oB(t){var n=rB,e=nB,r=iB,i=!0,a=zu("start","brush","end"),o=6,s;function l(m){var y=m.property("__brush",g).selectAll(".overlay").data([so("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ie.overlay).merge(y).each(function(){var _=vs(this).extent;B(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),m.selectAll(".selection").data([so("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ie.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=m.selectAll(".handle").data(t.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return Ie[_.type]}),m.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,y,v){m.tween?m.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,E=_.__brush,x=c(_,arguments),O=E.selection,P=t.input(typeof y=="function"?y.apply(this,arguments):y,E.extent),S=ki(O,P);function A(I){E.selection=I===1&&P===null?null:S(I),u.call(_),x.brush()}return O!==null&&P!==null?A:A(1)}):m.each(function(){var _=this,E=arguments,x=_.__brush,O=t.input(typeof y=="function"?y.apply(_,E):y,x.extent),P=c(_,E).beforestart();Xl(_),x.selection=O===null?null:O,u.call(_),P.start(v).brush(v).end(v)})},l.clear=function(m,y){l.move(m,null,y)};function u(){var m=B(this),y=vs(this).selection;y?(m.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(m,y,v){var _=m.__brush.emitter;return _&&(!v||!_.clean)?_:new f(m,y,v)}function f(m,y,v){this.that=m,this.args=y,this.state=m.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,y){return this.starting?(this.starting=!1,this.emit("start",m,y)):this.emit("brush",m),this},brush:function(m,y){return this.emit("brush",m,y),this},end:function(m,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,y)),this},emit:function(m,y,v){var _=B(this.that).datum();a.call(m,this.that,new QN(m,{sourceEvent:y,target:l,selection:t.output(this.state.selection),mode:v,dispatch:a}),_)}};function h(m){if(s&&!m.touches||!e.apply(this,arguments))return;var y=this,v=m.target.__data__.type,_=(i&&m.metaKey?v="overlay":v)==="selection"?bh:i&&m.altKey?jn:Wn,E=t===ps?null:tB[v],x=t===fa?null:eB[v],O=vs(y),P=O.extent,S=O.selection,A=P[0][0],I,w,N=P[0][1],T,R,C=P[1][0],D,k,$=P[1][1],L,V,H=0,j=0,tt,it=E&&x&&i&&m.shiftKey,lt,vt,rt=Array.from(m.touches||[m],F=>{const ht=F.identifier;return F=Sn(F,y),F.point0=F.slice(),F.identifier=ht,F});Xl(y);var ut=c(y,arguments,!0).beforestart();if(v==="overlay"){S&&(tt=!0);const F=[rt[0],rt[1]||rt[0]];O.selection=S=[[I=t===ps?A:Ht(F[0][0],F[1][0]),T=t===fa?N:Ht(F[0][1],F[1][1])],[D=t===ps?C:Vt(F[0][0],F[1][0]),L=t===fa?$:Vt(F[0][1],F[1][1])]],rt.length>1&&pt(m)}else I=S[0][0],T=S[0][1],D=S[1][0],L=S[1][1];w=I,R=T,k=D,V=L;var Y=B(y).attr("pointer-events","none"),X=Y.selectAll(".overlay").attr("cursor",Ie[v]);if(m.touches)ut.moved=z,ut.ended=ft;else{var Z=B(m.view).on("mousemove.brush",z,!0).on("mouseup.brush",ft,!0);i&&Z.on("keydown.brush",G,!0).on("keyup.brush",q,!0),Vk(m.view)}u.call(y),ut.start(m,_.name);function z(F){for(const ht of F.changedTouches||[F])for(const Pe of rt)Pe.identifier===ht.identifier&&(Pe.cur=Sn(ht,y));if(it&&!lt&&!vt&&rt.length===1){const ht=rt[0];Oh(ht.cur[0]-ht[0])>Oh(ht.cur[1]-ht[1])?vt=!0:lt=!0}for(const ht of rt)ht.cur&&(ht[0]=ht.cur[0],ht[1]=ht.cur[1]);tt=!0,hs(F),pt(F)}function pt(F){const ht=rt[0],Pe=ht.point0;var ae;switch(H=ht[0]-Pe[0],j=ht[1]-Pe[1],_){case ds:case bh:{E&&(H=Vt(A-I,Ht(C-D,H)),w=I+H,k=D+H),x&&(j=Vt(N-T,Ht($-L,j)),R=T+j,V=L+j);break}case Wn:{rt[1]?(E&&(w=Vt(A,Ht(C,rt[0][0])),k=Vt(A,Ht(C,rt[1][0])),E=1),x&&(R=Vt(N,Ht($,rt[0][1])),V=Vt(N,Ht($,rt[1][1])),x=1)):(E<0?(H=Vt(A-I,Ht(C-I,H)),w=I+H,k=D):E>0&&(H=Vt(A-D,Ht(C-D,H)),w=I,k=D+H),x<0?(j=Vt(N-T,Ht($-T,j)),R=T+j,V=L):x>0&&(j=Vt(N-L,Ht($-L,j)),R=T,V=L+j));break}case jn:{E&&(w=Vt(A,Ht(C,I-H*E)),k=Vt(A,Ht(C,D+H*E))),x&&(R=Vt(N,Ht($,T-j*x)),V=Vt(N,Ht($,L+j*x)));break}}k<w&&(E*=-1,ae=I,I=D,D=ae,ae=w,w=k,k=ae,v in Eh&&X.attr("cursor",Ie[v=Eh[v]])),V<R&&(x*=-1,ae=T,T=L,L=ae,ae=R,R=V,V=ae,v in Sh&&X.attr("cursor",Ie[v=Sh[v]])),O.selection&&(S=O.selection),lt&&(w=S[0][0],k=S[1][0]),vt&&(R=S[0][1],V=S[1][1]),(S[0][0]!==w||S[0][1]!==R||S[1][0]!==k||S[1][1]!==V)&&(O.selection=[[w,R],[k,V]],u.call(y),ut.brush(F,_.name))}function ft(F){if(JN(F),F.touches){if(F.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Hk(F.view,tt),Z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Y.attr("pointer-events","all"),X.attr("cursor",Ie.overlay),O.selection&&(S=O.selection),aB(S)&&(O.selection=null,u.call(y)),ut.end(F,_.name)}function G(F){switch(F.keyCode){case 16:{it=E&&x;break}case 18:{_===Wn&&(E&&(D=k-H*E,I=w+H*E),x&&(L=V-j*x,T=R+j*x),_=jn,pt(F));break}case 32:{(_===Wn||_===jn)&&(E<0?D=k-H:E>0&&(I=w-H),x<0?L=V-j:x>0&&(T=R-j),_=ds,X.attr("cursor",Ie.selection),pt(F));break}default:return}hs(F)}function q(F){switch(F.keyCode){case 16:{it&&(lt=vt=it=!1,pt(F));break}case 18:{_===jn&&(E<0?D=k:E>0&&(I=w),x<0?L=V:x>0&&(T=R),_=Wn,pt(F));break}case 32:{_===ds&&(F.altKey?(E&&(D=k-H*E,I=w+H*E),x&&(L=V-j*x,T=R+j*x),_=jn):(E<0?D=k:E>0&&(I=w),x<0?L=V:x>0&&(T=R),_=Wn),X.attr("cursor",Ie[v]),pt(F));break}default:return}hs(F)}}function p(m){c(this,arguments).moved(m)}function d(m){c(this,arguments).ended(m)}function g(){var m=this.__brush||{selection:null};return m.extent=wh(n.apply(this,arguments)),m.dim=t,m}return l.extent=function(m){return arguments.length?(n=typeof m=="function"?m:fs(wh(m)),l):n},l.filter=function(m){return arguments.length?(e=typeof m=="function"?m:fs(!!m),l):e},l.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:fs(!!m),l):r},l.handleSize=function(m){return arguments.length?(o=+m,l):o},l.keyModifiers=function(m){return arguments.length?(i=!!m,l):i},l.on=function(){var m=a.on.apply(a,arguments);return m===a?l:m},l}var sB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lB=function(t){sB(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="grid-brush",e.renderType=Q.SVG,e.selectionSelector="rect.selection",e.frontSelectionSelector="rect.frontSelection",e}return n.prototype.render=function(e){var r=this,i=this.parent,a=this.getComponentContainer(),o=U.appendOrSelect(i,"svg.chart-grid-backdrop"),s=U.appendOrSelect(o,"g."+this.type),l=U.appendOrSelect(s,this.selectionSelector),u=U.getSVGElementSize(o,{useAttrs:!0}),c=u.width,f=u.height,h=this.services.cartesianScales,p=h.getMainXScaleType(),d=h.getMainXScale(),g=d.range(),m=g[0];g[1],a.attr("transform","translate("+m+",0)");var y=U.appendOrSelect(a,this.frontSelectionSelector);if(d&&p===K.TIME){var v=this.model.get("zoomDomain");v===void 0&&(v=this.services.zoom.getDefaultZoomBarDomain(),v&&this.model.set({zoomDomain:v},{animate:!1}));var _=function(A){for(var I=A[1]-A[0],w="0,"+I.toString(),N=Math.floor(f/n.DASH_LENGTH),T=N*n.DASH_LENGTH,R=0;R<N;R++)w+=","+n.DASH_LENGTH;w+=","+(f-T),N%2===1&&(w+=",0"),w+=","+I.toString(),w+=","+f.toString(),y.attr("stroke-dasharray",w)},E=function(A){var I=A.selection;I===null||I[0]===I[1]||(y.attr("x",parseFloat(l.attr("x"))+parseFloat(o.attr("x"))).attr("y",l.attr("y")).attr("width",l.attr("width")).attr("height",l.attr("height")).style("cursor","pointer").style("display",null),_(I))},x=function(A,I){var w=Hp().range([0,c]).domain(v),N=[w.invert(A),w.invert(I)];N[0].valueOf()===N[1].valueOf()&&(N=r.services.zoom.getDefaultZoomBarDomain()),(v[0].valueOf()!==N[0].valueOf()||v[1].valueOf()!==N[1].valueOf())&&r.services.zoom.handleDomainChange(N)},O=function(A){var I=A.selection;I!==null&&(x(I[0],I[1]),s.call(P.move,null),y.style("display","none"))},P=Gv().extent([[0,0],[c-1,f]]).on("start brush end",E).on("end.brushed",O);s.call(P);var S=this.services.zoom.getZoomRatio();o.on("click",function(A){if(A.shiftKey){var I=this.services.domUtils.getHolder(),w=Sn(s.node(),I)[0],N=w-c*S/2;N<0&&(N=0);var T=w+c*S/2;T>c&&(T=c),x(N,T)}})}},n.DASH_LENGTH=4,n}(ct),uB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ie=function(t){uB(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="grid",e.renderType=Q.SVG,e}return n.prototype.render=function(e){e===void 0&&(e=!0);var r=b(this.getOptions(),"grid","x","enabled"),i=b(this.getOptions(),"grid","y","enabled");this.drawBackdrop(r,i),!(!r&&!i)&&(r&&(U.appendOrSelect(this.backdrop,"g.x.grid"),this.drawXGrid(e)),i&&(U.appendOrSelect(this.backdrop,"g.y.grid"),this.drawYGrid(e)))},n.prototype.drawXGrid=function(e){var r=this,i=this.parent,a=this.backdrop.attr("height"),o=this.services.cartesianScales.getMainXScale(),s=Hu(o).tickSizeInner(-a).tickSizeOuter(0),l=b(this.getOptions(),"grid","x","alignWithAxisTicks");if(l){var u=this.services.cartesianScales.getDomainAxisPosition(),c=b(this.getOptions(),"axes",u,"ticks","values");c&&s.tickValues(c)}else{var f=b(this.getOptions(),"grid","x","numberOfTicks");s.ticks(f)}var h=i.select(".x.grid").attr("transform","translate("+-this.backdrop.attr("x")+", "+a+")");e?h.transition().call(function(p){return r.services.transitions.setupTransition({transition:p,name:"grid-update",animate:e})}).call(s):h.call(s),this.cleanGrid(h)},n.prototype.drawYGrid=function(e){var r=this,i=this.parent,a=this.backdrop.attr("width"),o=this.services.cartesianScales.getMainYScale(),s=pv(o).tickSizeInner(-a).tickSizeOuter(0),l=b(this.getOptions(),"grid","y","alignWithAxisTicks");if(l){var u=this.services.cartesianScales.getRangeAxisPosition(),c=b(this.getOptions(),"axes",u,"ticks","values");c&&s.tickValues(c)}else{var f=b(this.getOptions(),"grid","y","numberOfTicks");s.ticks(f)}var h=i.select(".y.grid").attr("transform","translate(0, "+-this.backdrop.attr("y")+")");e?h.transition().call(function(p){return r.services.transitions.setupTransition({transition:p,name:"grid-update",animate:e})}).call(s):h.call(s),this.cleanGrid(h)},n.prototype.getGridlineThreshold=function(e){var r=this.parent,i=r.selectAll(".x.grid .tick").nodes().sort(function(p,d){return Number(Ne(p).tx)-Number(Ne(d).tx)}),a=-1,o;if(i.length){i.forEach(function(p,d){e[0]>=+Ne(p).tx&&a++}),o=a+1<i.length?a+1:i.length;var s=i[a],l=i[o],u;if(!s)u=+Ne(l).tx;else if(l)u=+Ne(l).tx-+Ne(s).tx;else{var c=r.select("rect.chart-grid-backdrop").node(),f=U.getSVGElementSize(c).width;u=f-+Ne(s).tx}var h=this.getOptions().tooltip.gridline.threshold;return u*h}},n.prototype.getActiveGridline=function(e){var r=b(this.getOptions,"tooltip","gridline","threshold"),i=r||this.getGridlineThreshold(e),a=this.parent,o=a.selectAll(".x.grid .tick").filter(function(){var s=Ne(this),l={min:Number(s.tx)-i,max:Number(s.tx)+i};return l.min<=e[0]&&e[0]<=l.max});return o},n.prototype.drawBackdrop=function(e,r){var i=this.parent,a=this.services.cartesianScales.getMainXScale(),o=this.services.cartesianScales.getMainYScale(),s=a.range(),l=s[0],u=s[1],c=o.range(),f=c[0],h=c[1];this.backdrop=U.appendOrSelect(i,"svg.chart-grid-backdrop");var p=U.appendOrSelect(this.backdrop,e||r?"rect.chart-grid-backdrop.stroked":"rect.chart-grid-backdrop");this.backdrop.merge(p).attr("x",l).attr("y",h).attr("width",Math.abs(u-l)).attr("height",Math.abs(f-h)).lower(),p.attr("width","100%").attr("height","100%")},n.prototype.cleanGrid=function(e){e.selectAll("text").remove(),e.select(".domain").remove()},n}(ct),cB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mh=5;function fB(t,n){return t>n-Mh&&t<n+Mh}var fn=function(t){cB(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="ruler",e.renderType=Q.SVG,e.isXGridEnabled=b(e.getOptions(),"grid","x","enabled"),e.isYGridEnabled=b(e.getOptions(),"grid","y","enabled"),e.isEventListenerAdded=!1,e}return n.prototype.render=function(){var e=b(this.getOptions(),"ruler","enabled");this.drawBackdrop(),e&&!this.isEventListenerAdded?this.addBackdropEventListeners():!e&&this.isEventListenerAdded&&this.removeBackdropEventListeners()},n.prototype.removeBackdropEventListeners=function(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)},n.prototype.formatTooltipData=function(e){return e},n.prototype.showRuler=function(e,r){var i=this,a=r[0],o=r[1],s=this.parent,l=this.services.cartesianScales.getOrientation(),u=this.model.getDisplayData(),c=this.services.cartesianScales.getRangeScale(),f=c.range(),h=f[0],p=f[1],d=l===Pt.HORIZONTAL?o:a,g=U.appendOrSelect(s,"g.ruler").attr("aria-label","ruler"),m=U.appendOrSelect(g,"line.ruler-line"),y=s.selectAll("[role=graphics-symbol]"),v=u.map(function(S){return{domainValue:i.services.cartesianScales.getDomainValue(S),originalData:S}}).filter(function(S){return fB(S.domainValue,d)});if(this.pointsWithinLine&&v.length===this.pointsWithinLine.length&&v.map(function(S){return S.domainValue}).join()===this.pointsWithinLine.map(function(S){return S.domainValue}).join())return this.pointsWithinLine=v,this.services.events.dispatchEvent(M.Tooltip.MOVE,{mousePosition:[a,o]});this.pointsWithinLine=v;var _=this.pointsWithinLine.reduce(function(S,A){if(S.length===0)return S.push(A),S;var I=S[0].domainValue,w=Math.abs(d-A.domainValue),N=Math.abs(d-I);return w>N||(w<N?S=[A]:S.push(A)),S},[]);if(_.length>0){var E=_.map(function(S){return S.originalData}).filter(function(S){var A=i.services.cartesianScales.getRangeIdentifier(S),I=S[A];return I!=null}),x=_.map(function(S){return S.domainValue}),O=y.filter(function(S){var A=i.services.cartesianScales.getDomainValue(S);return x.includes(A)});this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!Yd(this.elementsToHighlight,O)&&this.hideRuler(),O.dispatch("mouseover"),this.elementsToHighlight=O,this.services.events.dispatchEvent(M.Tooltip.SHOW,{mousePosition:[a,o],hoveredElement:m,data:this.formatTooltipData(E)}),g.attr("opacity",1);var P=_[0];l==="horizontal"?m.attr("x1",p).attr("x2",h).attr("y1",P.domainValue).attr("y2",P.domainValue):m.attr("y1",p).attr("y2",h).attr("x1",P.domainValue).attr("x2",P.domainValue)}else this.hideRuler()},n.prototype.hideRuler=function(){var e=this.parent,r=U.appendOrSelect(e,"g.ruler"),i=e.selectAll("[role=graphics-symbol]");i.dispatch("mouseout"),this.services.events.dispatchEvent(M.Tooltip.HIDE),r.attr("opacity",0)},n.prototype.addBackdropEventListeners=function(){this.isEventListenerAdded=!0;var e=this,r=this.services.domUtils.getHolder(),i=this.model.getDisplayData(),a=function(s){var l=Sn(s,e.parent.node());e.showRuler(s,l)};if(i.length>100){var o=i.length%50*12.5;a=CT(function(s){var l=this.mousePosition;e.showRuler(s,l)},o,r)}this.backdrop.on("mousemove mouseover",a).on("mouseout",this.hideRuler.bind(this))},n.prototype.drawBackdrop=function(){var e=this.parent;this.backdrop=U.appendOrSelect(e,"svg.chart-grid-backdrop")},n}(ct),hB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dB=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},pB=function(t){hB(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="ruler-binned",e.renderType=Q.SVG,e}return n.prototype.showRuler=function(e,r){var i=this,a=r[0],o=r[1],s=this.parent,l=this.model.getOptions(),u=this.services.cartesianScales.getOrientation(),c=this.services.cartesianScales.getRangeScale(),f=c.range(),h=f[0],p=f[1],d=this.services.cartesianScales.getDomainScale(),g=d.invert(u===Pt.VERTICAL?a:o),m=U.appendOrSelect(s,"g.ruler").attr("aria-label","ruler"),y=U.appendOrSelect(m,"line.ruler-line"),v=s.selectAll("[role=graphics-symbol]"),_=v.filter(function(w){if(parseFloat(bt(w,"data.x0"))<=g&&parseFloat(bt(w,"data.x1"))>=g)return!0});if(_.size()>0){this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!Yd(this.elementsToHighlight,_)&&this.hideRuler(),_.dispatch("mouseover"),this.elementsToHighlight=_;var E=B(_.nodes()[0]).datum(),x=parseFloat(bt(E,"data.x0")),O=parseFloat(bt(E,"data.x1")),P=this.model.getActiveDataGroupNames(),S=P.reverse().map(function(w){return{label:w,value:bt(E,"data."+w),class:i.model.getColorClassName({classNameTypes:[J.TOOLTIP],dataGroupName:w})}}).filter(function(w){return w.value!==0}),A=S.length>0;if(A){this.services.events.dispatchEvent(M.Tooltip.SHOW,{mousePosition:[a,o],hoveredElement:y,items:dB([{label:bt(l,"bins.rangeLabel")||"Range",value:x+" – "+O}],S,b(l,"tooltip","showTotal")===!0?[{label:bt(l,"tooltip.totalLabel")||"Total",value:P.reduce(function(w,N){return w+parseFloat(bt(E,"data."+N))},0)}]:[])}),m.attr("opacity",1);var I=d((x+O)/2);u==="horizontal"?y.attr("x1",p).attr("x2",h).attr("y1",I).attr("y2",I):y.attr("y1",p).attr("y2",h).attr("x1",I).attr("x2",I)}else this.hideRuler()}else this.hideRuler()},n}(fn),vB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lo=function(t){vB(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.formatTooltipData=function(e){return e.reverse()},n}(fn),gB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yu=function(t){gB(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="toolbar",e.renderType=Q.HTML,e}return n.prototype.init=function(){var e=this,r=function(){return e.updateOverflowMenu(!1)};this.services.events.addEventListener(M.Toolbar.SHOW_OVERFLOW_MENU,function(){e.renderOverflowMenu(),document.body.addEventListener("click",r)}),this.services.events.addEventListener(M.Toolbar.HIDE_OVERFLOW_MENU,function(){document.body.removeEventListener("click",r)})},n.prototype.render=function(e){var r=this,i=this.getComponentContainer().attr("role","toolbar").attr("aria-label","chart-"+this.services.domUtils.getChartID()+" toolbar"),a=b(this.getOptions(),"data","loading");if(a)i.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=i.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));var o=this.getControlConfigs(),s=o.buttonList,l=o.overflowMenuItemList;l&&s.push(this.getOverflowButtonConfig());var u=i.selectAll("div.toolbar-control").data(s,function(h){return h.id});u.exit().remove();var c=u.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu").attr("role","button"),f=this;c.merge(u).classed("disabled",function(h){return h.shouldBeDisabled()}).attr("aria-disabled",function(h){return h.shouldBeDisabled()}).attr("aria-label",function(h){return h.title}).html(function(h){return`
			<button
				class="cds--overflow-menu__trigger cds--overflow-menu__trigger"
				aria-haspopup="true" aria-expanded="false" id="`+r.services.domUtils.generateElementIDString("control-"+h.id)+'" aria-label="'+h.title+`">
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">
					`+h.iconSVG.content+`
				</svg>
			</button>`}).each(function(h,p){var d=this;B(this).select("svg").style("will-change","transform").style("width",h.iconSVG.width!==void 0?h.iconSVG.width:"20px").style("height",h.iconSVG.height!==void 0?h.iconSVG.height:"20px"),B(this).select("button").on("click",function(g){h.shouldBeDisabled()||f.triggerFunctionAndEvent(h,g,d)}).on("keydown",function(g){g.key&&g.key==="Enter"||g.key===" "?(g.preventDefault(),f.triggerFunctionAndEvent(h,g,d)):g.key&&g.key==="ArrowLeft"?f.focusOnPreviousEnabledToolbarItem(p):g.key&&g.key==="ArrowRight"&&f.focusOnNextEnabledToolbarItem(p)})}),this.overflowButton=this.getComponentContainer().select("button.cds--overflow-menu__trigger#"+this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu"))}},n.prototype.renderOverflowMenu=function(){var e=this,r=this.getControlConfigs().overflowMenuItemList,i=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(r,function(o){return b(o,"id")});i.exit().remove();var a=i.enter().append("li").attr("id",function(o){return e.services.domUtils.generateElementIDString("control-"+o.id)}).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);a.append("button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),a.merge(i).classed("cds--overflow-menu-options__option--disabled",function(o){return o.shouldBeDisabled()}).classed("cds--overflow-menu-options__option--disabled",function(o){return o.shouldBeDisabled()}).attr("aria-disabled",function(o){return o.shouldBeDisabled()}).selectAll("button").text(function(o){return o.text})},n.prototype.isOverflowMenuOpen=function(){return this.overflowMenu.classed("is-open")},n.prototype.updateOverflowMenu=function(e){this.overflowMenu&&(this.overflowMenu.classed("is-open",e),this.overflowButton&&(this.overflowButton.attr("aria-expanded",e),B(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",e).classed("cds--overflow-menu--open",e)),e?this.services.events.dispatchEvent(M.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(M.Toolbar.HIDE_OVERFLOW_MENU))},n.prototype.focusOnPreviousEnabledToolbarItem=function(e){for(var r=this.getToolbarButtonItems(),i=r.length,a=e-1;a>=0;a--){var o=r[a];if(!o.shouldBeDisabled()){i=a;break}}if(i<r.length){var s=B("button#"+this.services.domUtils.generateElementIDString("control-"+r[i].id)).node();"focus"in s&&s.focus()}},n.prototype.focusOnNextEnabledToolbarItem=function(e){for(var r=this.getToolbarButtonItems(),i=-1,a=e+1;a<r.length;a++){var o=r[a];if(!o.shouldBeDisabled()){i=a;break}}if(i>-1){var s=B("button#"+this.services.domUtils.generateElementIDString("control-"+r[i].id)).node();"focus"in s&&s.focus()}},n.prototype.focusOnPreviousEnabledMenuItem=function(e){for(var r=this.getOverflowMenuItems(),i=r.length,a=e-1;a>=0;a--){var o=r[a];if(!o.shouldBeDisabled()){i=a;break}}if(i<r.length){var s=B("#"+this.services.domUtils.generateElementIDString("control-"+r[i].id)+" button").node();"focus"in s&&s.focus()}},n.prototype.focusOnNextEnabledMenuItem=function(e){for(var r=this.getOverflowMenuItems(),i=-1,a=e+1;a<r.length;a++){var o=r[a];if(!o.shouldBeDisabled()){i=a;break}}if(i>-1){var s=B("#"+this.services.domUtils.generateElementIDString("control-"+r[i].id)+" button").node();"focus"in s&&s.focus()}},n.prototype.toggleOverflowMenu=function(e){var r=this;if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);var i=this,a=this.getOverflowMenuItems();a.forEach(function(o,s){var l=B("#"+r.services.domUtils.generateElementIDString("control-"+o.id));l!==null&&(l.on("click",function(){i.triggerFunctionAndEvent(o,e,l.node()),i.updateOverflowMenu(!1)}),l.on("keydown",function(u){u&&u.key==="Enter"?i.triggerFunctionAndEvent(o,e,l.node()):u&&u.key==="ArrowUp"?i.focusOnPreviousEnabledMenuItem(s):u&&u.key==="ArrowDown"?i.focusOnNextEnabledMenuItem(s):u&&u.key==="Escape"&&i.updateOverflowMenu(!1),u.preventDefault()}))}),i.focusOnNextEnabledMenuItem(-1)}e&&e.stopImmediatePropagation()},n.prototype.triggerFunctionAndEvent=function(e,r,i){typeof e.shouldBeDisabled=="function"&&e.shouldBeDisabled()||(typeof e.clickFunction=="function"&&e.clickFunction(r),this.services.events.dispatchEvent(M.Toolbar.BUTTON_CLICK,{control:e,event:r,element:i}))},n.prototype.getControlConfigs=function(){var e=this,r=b(this.getOptions(),"toolbar","numberOfIcons")-1,i=b(this.getOptions(),"toolbar","controls"),a=[],o=[],s=[];return i.forEach(function(l){var u=null;l.type===Tt.CUSTOM?(b(l,"id")===null&&(l.id="toolbar-button-"+n.buttonID++),b(l,"shouldBeDisabled")===null&&(l.shouldBeDisabled=function(){return!1}),u=l):u=e.getControlConfigByType(l.type),u&&(u.text=l.text?l.text:l.type,u.id.indexOf("toolbar-export")!==-1?a.push(u):o.length<r?b(u,"iconSVG","content")===null?s.push(u):o.push(u):s.push(u))}),s.push.apply(s,a),s.length?{buttonList:o,overflowMenuItemList:s}:{buttonList:o}},n.prototype.getToolbarButtonItems=function(){var e=this.getControlConfigs(),r=e.buttonList,i=e.overflowMenuItemList;return i&&r.push(this.getOverflowButtonConfig()),r||[]},n.prototype.getOverflowMenuItems=function(){var e=this.getControlConfigs().overflowMenuItemList;return e||[]},n.prototype.getOverflowButtonConfig=function(){var e=this;return{id:"toolbar-overflow-menu",title:"More options",shouldBeDisabled:function(){return!1},iconSVG:{content:`<circle cx="16" cy="8" r="2"></circle>
				<circle cx="16" cy="16" r="2"></circle>
				<circle cx="16" cy="24" r="2"></circle>`},clickFunction:function(r){return e.toggleOverflowMenu(r)}}},n.prototype.getControlConfigByType=function(e){var r=this,i=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),a=this.model.getDisplayData(),o;switch(e){case Tt.ZOOM_IN:i&&(o={id:"toolbar-zoomIn",title:"Zoom in",shouldBeDisabled:function(){return r.services.zoom.isMinZoomDomain()},iconSVG:{content:this.getControlIconByType(e)},clickFunction:function(){return r.services.zoom.zoomIn()}});break;case Tt.ZOOM_OUT:i&&(o={id:"toolbar-zoomOut",title:"Zoom out",shouldBeDisabled:function(){return r.services.zoom.isMaxZoomDomain()},iconSVG:{content:this.getControlIconByType(e)},clickFunction:function(){return r.services.zoom.zoomOut()}});break;case Tt.RESET_ZOOM:i&&(o={id:"toolbar-resetZoom",title:"Reset zoom",shouldBeDisabled:function(){return r.services.zoom.isMaxZoomDomain()},iconSVG:{content:this.getControlIconByType(e)},clickFunction:function(){return r.services.zoom.resetZoomDomain()}});break;case Tt.MAKE_FULLSCREEN:o={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:"Make fullscreen",shouldBeDisabled:function(){return!1},clickFunction:function(){r.services.domUtils.toggleFullscreen()}};break;case Tt.SHOW_AS_DATATABLE:o={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(e)},title:"Show as table",shouldBeDisabled:function(){return a.length===0},clickFunction:function(){return r.services.events.dispatchEvent(M.Modal.SHOW)}};break;case Tt.EXPORT_CSV:o={id:"toolbar-export-CSV",title:"Export as CSV",shouldBeDisabled:function(){return!1},iconSVG:{content:this.getControlIconByType(e)},clickFunction:function(){return r.model.exportToCSV()}};break;case Tt.EXPORT_PNG:o={id:"toolbar-export-PNG",title:"Export as PNG",shouldBeDisabled:function(){return!1},iconSVG:{content:this.getControlIconByType(e)},clickFunction:function(){return r.services.domUtils.exportToPNG()}};break;case Tt.EXPORT_JPG:o={id:"toolbar-export-JPG",title:"Export as JPG",shouldBeDisabled:function(){return!1},iconSVG:{content:this.getControlIconByType(e)},clickFunction:function(){return r.services.domUtils.exportToJPG()}};break;default:throw Error("Not supported toolbar control type: "+e)}return o},n.prototype.getControlIconByType=function(e){switch(e){case Tt.ZOOM_IN:return`<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case Tt.ZOOM_OUT:return`<rect x="9" y="13" width="10" height="2"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case Tt.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case Tt.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case Tt.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case Tt.EXPORT_CSV:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case Tt.EXPORT_JPG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case Tt.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+e)}},n.buttonID=0,n}(ct),mB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cr=function(t){mB(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="zero-line",e.renderType=Q.SVG,e}return n.prototype.render=function(e){var r=this,i=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),a=this.services.cartesianScales.getScaleByPosition(i),o=a.domain(),s=o[0],l=o[1],u=s>0&&l<0||s<0&&l>0,c=this.getComponentContainer();if(!u){c.selectAll("line.domain").remove();return}var f=this.services.cartesianScales.getDomainScale().range(),h=f[0],p=f[1],d=+a(0)+.5;d||(d=a.range()[0]);var g=lp({x0:h,x1:p,y0:d,y1:d},this.services.cartesianScales.getOrientation()),m=U.appendOrSelect(c,"line.domain");m.transition().call(function(y){return r.services.transitions.setupTransition({transition:y,name:"zero-line-update",animate:e})}).attr("y1",g.y0).attr("y2",g.y1).attr("x1",g.x0).attr("x2",g.x1)},n}(ct),yB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_B=function(t){yB(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="zoom-bar",e.renderType=Q.SVG,e.MIN_SELECTION_DIFF=9e-10,e.brushSelector="g.zoom-bar-brush",e.clipId="zoomBarClip-"+Math.floor(Math.random()*99999999999),e.brush=Gv(),e.highlightStrokeWidth=1,e}return n.prototype.init=function(){this.services.events.addEventListener(M.ZoomBar.UPDATE,this.render.bind(this));var e=b(this.getOptions(),"zoomBar",W.TOP,"data");this.model.setZoomBarData(e)},n.prototype.render=function(e){var r=this,i=this.getComponentContainer(),a=this.services.zoom.isZoomBarLoading(W.TOP),o=this.services.zoom.isZoomBarLocked(W.TOP),s=b(this.getOptions(),"zoomBar",W.TOP,"type"),l=b(this.getOptions(),"axes",W.BOTTOM,"highlights"),u=Yt.height[s],c=U.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(c!==0){var f=0,h=this.model.get("axesMargins");h&&h.left&&(f=h.left);var p=U.appendOrSelect(i,"svg.zoom-container").attr("width","100%").attr("height",u).attr("opacity",1);if(U.appendOrSelect(i,"rect.zoom-spacer").attr("x",0).attr("y",u).attr("width","100%").attr("height",Yt.spacerHeight).attr("opacity",1).attr("fill","none"),s===he.GRAPH_VIEW?U.appendOrSelect(p,"rect.zoom-bg").attr("x",f).attr("y",0).attr("width",c-f).attr("height","100%").classed("zoom-bg-skeleton",a).style("stroke",a?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null):s===he.SLIDER_VIEW&&U.appendOrSelect(p,"rect.zoom-slider-bg").attr("x",f).attr("y",u/2-1).attr("width",c-f).attr("height",2).classed("zoom-slider-bg-skeleton",a).style("stroke",a?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null),a){this.renderSkeleton(p,f,c);return}var d=this.services.cartesianScales,g=d.getMainXScale(),m=d.getMainYScale(),y=d.getMainXScaleType();if(g&&y===K.TIME){var v=this.services.zoom.getZoomBarData();if(_n(v)||v.length===1)return;this.xScale=g.copy(),this.yScale=m.copy();var _=this.services.zoom.getDefaultZoomBarDomain(v);v=this.compensateDataForDefaultDomain(v,_);var E=this.model.get("initialZoomDomain"),x=b(this.getOptions(),"zoomBar",W.TOP,"initialZoomDomain");x&&x[0]&&x[1]&&(x[0]=new Date(x[0]),x[1]=new Date(x[1])),x&&!(E&&E[0].valueOf()===x[0].valueOf()&&E[1].valueOf()===x[1].valueOf())?this.model.set({initialZoomDomain:et([],x),zoomDomain:x?et([],x):_},{skipUpdate:!0}):x===null&&E!==null&&this.model.set({initialZoomDomain:null,zoomDomain:et([],_)},{skipUpdate:!0}),this.xScale.range([f,c]).domain(_),this.maxSelectionRange=this.xScale.range(),this.yScale.range([0,u-6]).domain(we(v,function(T){return T.value}));var O=this.model.get("zoomDomain");if(s===he.GRAPH_VIEW&&(this.renderZoomBarArea(p,"path.zoom-graph-area-unselected",v,null),this.updateClipPath(i,this.clipId,0,0,0,0),this.renderZoomBarArea(p,"path.zoom-graph-area",v,this.clipId),this.renderZoomBarBaseline(p,f,c),l)){var P=l.highlightStartMapsTo,S=l.highlightEndMapsTo,A=l.color,I=l.labelMapsTo;l.data.forEach(function(T,R){U.appendOrSelect(p,"rect.highlight-"+R).attr("height",u-2*r.highlightStrokeWidth).attr("y",r.highlightStrokeWidth).attr("x",r.xScale(T[P])).attr("width",r.xScale(T[S])-r.xScale(T[P])).style("fill",A&&A.scale[T[I]]?A.scale[T[I]]:null).style("fill-opacity",.1).style("stroke",A&&A.scale[T[I]]?A.scale[T[I]]:null).style("stroke-dasharray","2, 2").attr("stroke-width","1px")})}this.addBrushEventListener(O,f,c);var w=U.appendOrSelect(i,this.brushSelector).call(this.brush);if(O!==void 0)if(O[0].valueOf()===O[1].valueOf())w.call(this.brush.move,this.xScale.range()),this.updateBrushHandle(this.getComponentContainer(),this.xScale.range(),this.xScale.domain());else{var N=O.map(function(T){return r.xScale(T)});N[1]-N[0]<this.MIN_SELECTION_DIFF||(w.call(this.brush.move,N),this.updateBrushHandle(this.getComponentContainer(),N,O))}o&&(this.brush.filter(function(){return!1}),w.selectAll("rect").attr("cursor","auto"))}}},n.prototype.addBrushEventListener=function(e,r,i){var a=this,o=function(u){var c=u.selection;c===null?a.handleBrushedEvent(u,e,a.xScale,a.xScale.range()):c[0]===c[1]||a.handleBrushedEvent(u,e,a.xScale,c)},s=b(this.getOptions(),"zoomBar",W.TOP,"type"),l=Yt.height[s];this.brush.extent([[r,0],[i,l]]).on("start brush end",null).on("start brush end",o)},n.prototype.handleBrushedEvent=function(e,r,i,a){var o=[i.invert(a[0]),i.invert(a[1])];if(this.updateBrushHandle(this.getComponentContainer(),a,o),e.sourceEvent!=null&&(e.sourceEvent.type==="mousemove"||e.sourceEvent.type==="mouseup"||e.sourceEvent.type==="mousedown"||e.sourceEvent.type==="touchstart"||e.sourceEvent.type==="touchmove"||e.sourceEvent.type==="touchend")){(r===void 0||r[0]!==o[0]||r[1]!==o[1])&&this.services.zoom.handleDomainChange(o,{dispatchEvent:!1});var s=void 0;e.type==="start"?s=M.ZoomBar.SELECTION_START:e.type==="brush"?s=M.ZoomBar.SELECTION_IN_PROGRESS:e.type==="end"&&(s=M.ZoomBar.SELECTION_END,this.services.events.dispatchEvent(M.ZoomDomain.CHANGE,{newDomain:o})),this.services.events.dispatchEvent(s,{selection:a,newDomain:o})}},n.prototype.updateBrushHandle=function(e,r,i){var a=this,o=Yt.handleWidth,s=b(this.getOptions(),"zoomBar",W.TOP,"type"),l=Yt.height[s],u=-o/2,c=Yt.handleBarWidth,f=s===he.GRAPH_VIEW?Yt.handleBarHeight:6,h=-c/2,p=(l-f)/2;e.select(this.brushSelector).selectAll("rect.handle").data([{type:"w"},{type:"e"}]).attr("x",function(g){if(g.type==="w")return Math.max(r[0]+u,a.maxSelectionRange[0]);if(g.type==="e")return Math.min(r[1]+u,a.maxSelectionRange[1]-o)}).attr("y",0).attr("width",o).attr("height",l).attr("cursor","ew-resize").style("display",null);var d=e.select(this.brushSelector).selectAll("rect.handle-bar").data([{type:"w"},{type:"e"}]);d.enter().append("rect").attr("class",function(g){return"handle-bar handle-bar--"+g.type}),d.attr("x",function(g){if(g.type==="w")return Math.max(r[0]+h,a.maxSelectionRange[0]-u+h);if(g.type==="e")return Math.min(r[1]+h,a.maxSelectionRange[1]+u+h)}).attr("y",p).attr("width",c).attr("height",f).attr("cursor","ew-resize"),s===he.SLIDER_VIEW&&this.updateSliderSelectedArea(r),this.updateClipPath(e,this.clipId,r[0],0,r[1]-r[0],l)},n.prototype.updateSliderSelectedArea=function(e){var r=b(this.getOptions(),"zoomBar",W.TOP,"type"),i=Yt.height[r];U.getSVGElementSize(this.parent,{useAttrs:!0}).width;var a=this.model.get("axesMargins");a&&a.left&&a.left;var o=this.getComponentContainer(),s=o.select("svg.zoom-container");U.appendOrSelect(s,"rect.zoom-slider-selected-area").attr("x",e[0]).attr("y",i/2-1).attr("width",e[1]-e[0]).attr("height",2)},n.prototype.renderZoomBarArea=function(e,r,i,a){var o=this.services.cartesianScales,s=o.getMainXAxisPosition(),l=o.getMainYAxisPosition(),u=o.getMainXScaleType(),c=o.getMainYScaleType(),f=function(v,_,E){return function(x,O){return o.getValueFromScale(v,_,E,x,O)}},h=f(this.xScale,u,s),p=f(this.yScale,c,l),d=b(this.getOptions(),"zoomBar",W.TOP,"type"),g=Yt.height[d],m=Du().x(function(v,_){return h(v,_)}).y0(g).y1(function(v,_){return g-p(v,_)}),y=U.appendOrSelect(e,r).datum(i).attr("d",m);a&&y.attr("clip-path","url(#"+a+")")},n.prototype.updateClipPath=function(e,r,i,a,o,s){var l=U.appendOrSelect(e,"clipPath").attr("id",r);U.appendOrSelect(l,"rect").attr("x",i).attr("y",a).attr("width",o).attr("height",s)},n.prototype.compensateDataForDefaultDomain=function(e,r){if(!(!e||e.length<2)){var i=Ge(e),a=this.services.cartesianScales.getDomainIdentifier(),o=this.services.cartesianScales.getRangeIdentifier();if(Number(r[0])<Number(i[0][a])){var s={};s[a]=r[0],s[o]=0,i.unshift(s)}if(Number(r[1])>Number(i[i.length-1][a])){var s={};s[a]=r[1],s[o]=0,i.push(s)}return i}},n.prototype.renderZoomBarBaseline=function(e,r,i,a){a===void 0&&(a=!1);var o=b(this.model.getOptions(),"zoomBar",W.TOP,"type"),s=Yt.height[o],l=So()([[r,s],[i,s]]);U.appendOrSelect(e,"path.zoom-bg-baseline").attr("d",l).classed("zoom-bg-baseline-skeleton",a).style("stroke",a?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null)},n.prototype.renderSkeleton=function(e,r,i){this.renderZoomBarArea(e,"path.zoom-graph-area-unselected",[],null),this.renderZoomBarArea(e,"path.zoom-graph-area",[],this.clipId),this.brush.on("start brush end",null),U.appendOrSelect(this.getComponentContainer(),this.brushSelector).html(null);var a=b(this.getOptions(),"zoomBar",W.TOP,"type");a===he.GRAPH_VIEW&&this.renderZoomBarBaseline(e,r,i,!0)},n.prototype.destroy=function(){this.brush.on("start brush end",null),this.services.events.removeEventListener(M.ZoomBar.UPDATE,this.render.bind(this))},n}(ct),Ah=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},Le=function(){function t(n,e){this.services={domUtils:U,files:CC,events:MC,gradientUtils:wl,transitions:LC,canvasZoom:zC},this.model=new Ze(this.services)}return t.prototype.init=function(n,e){var r=this;this.model.set({holder:n},{skipUpdate:!0}),Object.keys(this.services).forEach(function(i){var a=r.services[i];r.services[i]=new a(r.model,r.services)}),this.services.events.addEventListener(M.Model.UPDATE,function(i){var a=!!b(i,"detail","animate");r.update(a)}),this.model.setData(e.data),this.services.events.addEventListener(M.Chart.RESIZE,function(){r.update(!1)}),this.components=this.getComponents(),this.update()},t.prototype.getComponents=function(){return console.error("getComponents() method is not implemented"),null},t.prototype.update=function(n){var e=this;if(n===void 0&&(n=!0),!!this.components){Object.keys(this.services).forEach(function(a){var o=e.services[a];o.update()}),this.components.forEach(function(a){return a.render(n)});var r=this.services.transitions.getPendingTransitions(),i=Object.keys(r).map(function(a){var o=r[a];return o.end().catch(function(s){return s})});Promise.all(i).then(function(){return e.services.events.dispatchEvent(M.Chart.RENDER_FINISHED)})}},t.prototype.destroy=function(){this.components.forEach(function(n){return n.destroy()}),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})},t.prototype.getChartComponents=function(n,e){var r=this.model.getOptions(),i=b(r,"toolbar","enabled"),a={id:"legend",components:[new Vu(this.model,this.services)],growth:st.PREFERRED},o=b(r,"canvasZoom","enabled");o&&o===!0&&n.push(new w2(this.model,this.services));var s=!!this.model.getOptions().title,l={id:"title",components:[new Ro(this.model,this.services)],growth:st.STRETCH},u={id:"toolbar",components:[new Yu(this.model,this.services)],growth:st.PREFERRED},c={id:"header",components:[new Me(this.model,this.services,Ah([l],i?[u]:[]),{direction:wt.ROW,alignItems:dr.CENTER})],growth:st.PREFERRED},f={id:"graph-frame",components:n,growth:st.STRETCH,renderType:b(e,"graphFrameRenderType")||Q.SVG},h=b(e,"excludeLegend")!==!0&&r.legend.enabled!==!1,p=wt.COLUMN;if(h){var d=b(r,"legend","position");d==="left"?(p=wt.ROW,r.legend.orientation||(r.legend.orientation=hr.VERTICAL)):d==="right"?(p=wt.ROW_REVERSE,r.legend.orientation||(r.legend.orientation=hr.VERTICAL)):d==="bottom"&&(p=wt.COLUMN_REVERSE)}var g={id:"spacer",components:[new Dn(this.model,this.services)],growth:st.PREFERRED},m={id:"full-frame",components:[new Me(this.model,this.services,Ah(h?[a]:[],h?[g]:[],[f]),{direction:p})],growth:st.STRETCH},y=[];if(s||i){y.push(c);var v={id:"spacer",components:[new Dn(this.model,this.services,i?{size:15}:void 0)],growth:st.PREFERRED};y.push(v)}return y.push(m),[new mv(this.model,this.services),new Fu(this.model,this.services),new Me(this.model,this.services,y,{direction:wt.COLUMN})]},t}(),xB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gs=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},Un=function(t){xB(n,t);function n(e){var r=t.call(this,e)||this;return r.axisFlavor=li.DEFAULT,r}return n.prototype.assignRangeAndDomains=function(){var e=this.services.cartesianScales,r=this.getOptions(),i=e.isDualAxes(),a={primaryDomain:e.domainAxisPosition,primaryRange:e.rangeAxisPosition,secondaryDomain:null,secondaryRange:null};return i&&(a.secondaryDomain=e.secondaryDomainAxisPosition,a.secondaryRange=e.secondaryRangeAxisPosition),Object.keys(a).forEach(function(o){var s=a[o];e.scales[s]?a[o]={position:s,label:e.getScaleLabel(s),identifier:b(r,"axes",s,"mapsTo")}:a[o]=null}),a},n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=this.getOptions(),i=r.data.groupMapsTo,a=this.services.cartesianScales,o=this.assignRangeAndDomains(),s=o.primaryDomain,l=o.primaryRange,u=o.secondaryDomain,c=o.secondaryRange,f=a.getDomainAxisScaleType(),h;f===K.TIME&&(h=function(d){return wr(d,"MMM d, yyyy")});var p=gs([gs(["Group",s.label,l.label],u?[u.label]:[],c?[c.label]:[])],e.map(function(d){return gs([d[i],d[s.identifier]===null?"&ndash;":h?h(d[s.identifier]):d[s.identifier],d[l.identifier]===null||isNaN(d[l.identifier])?"&ndash;":d[l.identifier].toLocaleString()],u?[d[u.identifier]===null?"&ndash;":d[u.identifier]]:[],c?[d[c.identifier]===null||isNaN(d[c.identifier])?"&ndash;":d[c.identifier]]:[])}));return p},n.prototype.setData=function(e){var r;if(e&&(r=t.prototype.setData.call(this,e),b(this.getOptions(),"zoomBar",W.TOP,"enabled"))){var i=b(this.getOptions(),"zoomBar",W.TOP,"data");this.setZoomBarData(i)}return r},n.prototype.setZoomBarData=function(e){var r=e?this.sanitize(Ge(e)):this.getDisplayData(),i=r,a=this.services.cartesianScales;if(r&&a.domainAxisPosition&&a.rangeAxisPosition){var o=a.getDomainIdentifier(),s=a.getRangeIdentifier(),l=r.map(function(u){return u[o].getTime()});l=hi(l).sort(),i=l.map(function(u){var c=0,f={};return r.forEach(function(h){h[o].getTime()===u&&(c+=h[s])}),f[o]=new Date(u),f[s]=c,f})}this.set({zoomBarData:i})},n.prototype.getZoomBarData=function(){return this.get("zoomBarData")},n.prototype.sanitizeDateValues=function(e){var r=this.getOptions();if(!r.axes)return e;var i=[];return Object.keys(W).forEach(function(a){var o=W[a],s=r.axes[o];if(s&&s.scaleType===K.TIME){var l=s.mapsTo;(l!==null||l!==void 0)&&i.push(l)}}),i.length>0&&e.forEach(function(a){i.forEach(function(o){b(a,o,"getTime")===null&&(a[o]=new Date(a[o]))})}),e},n.prototype.sanitize=function(e){return e=t.prototype.sanitize.call(this,e),e=this.sanitizeDateValues(e),e},n}(Ze),bB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ch=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},Kt=function(t){bB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.services=Object.assign(i.services,{cartesianScales:NC,curves:VC,zoom:FC}),i.model=new Un(i.services),i}return n.prototype.getAxisChartComponents=function(e,r){var i=this.model.getOptions(),a=b(i,"zoomBar",W.TOP,"enabled"),o=b(i,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();var s=this.services.cartesianScales.getMainXAxisPosition(),l=b(i,"axes",s,"scaleType"),u=a&&s===W.BOTTOM&&l===K.TIME,c=this.services.zoom.isZoomBarLocked(W.TOP),f=!!this.model.getOptions().title,h={id:"title",components:[new Ro(this.model,this.services)],growth:st.STRETCH},p={id:"toolbar",components:[new Yu(this.model,this.services)],growth:st.PREFERRED},d={id:"header",components:[new Me(this.model,this.services,Ch([h],o?[p]:[]),{direction:wt.ROW,alignItems:dr.CENTER})],growth:st.PREFERRED},g={id:"legend",components:[new Vu(this.model,this.services)],growth:st.PREFERRED};u&&!c&&e.push(new _v(this.model,this.services),new lB(this.model,this.services)),e.push(new v2(this.model,this.services)),e.push(new S2(this.model,this.services));var m={id:"graph-frame",components:e,growth:st.STRETCH,renderType:Q.SVG},y=b(r,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1,v=wt.COLUMN;if(y){var _=b(this.model.getOptions(),"legend","position");_===rr.LEFT?(v=wt.ROW,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=hr.VERTICAL)):_===rr.RIGHT?(v=wt.ROW_REVERSE,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=hr.VERTICAL)):_===rr.BOTTOM&&(v=wt.COLUMN_REVERSE)}var E={id:"spacer",components:[new Dn(this.model,this.services)],growth:st.PREFERRED},x={id:"full-frame",components:[new Me(this.model,this.services,Ch(y?[g]:[],y?[E]:[],[m]),{direction:v})],growth:st.STRETCH},O={id:"zoom-bar",components:[new _B(this.model,this.services)],growth:st.PREFERRED,renderType:Q.SVG},P=[];if(f||o){P.push(d);var S={id:"spacer",components:[new Dn(this.model,this.services,o?{size:15}:void 0)],growth:st.PREFERRED};P.push(S)}return u&&P.push(O),P.push(x),[new yv(this.model,this.services),new Fu(this.model,this.services),new Me(this.model,this.services,P,{direction:wt.COLUMN})]},n}(Le),OB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){OB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(Mt(Ge(_t.areaChart),r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new fn(this.model,this.services),new lr(this.model,this.services),new xv(this.model,this.services),new Se(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0}),new qt(this.model,this.services,{skeleton:Dt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Kt);var TB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){TB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(Mt(_t.stackedAreaChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new lo(this.model,this.services),new bv(this.model,this.services),new lr(this.model,this.services,{stacked:!0}),new Ev(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0,stacked:!0}),new qt(this.model,this.services,{skeleton:Dt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Kt);var wB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){wB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(Mt(_t.simpleBarChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new Ov(this.model,this.services),new Cr(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.VERT_OR_HORIZ})],r=this.getAxisChartComponents(e);return r},n})(Kt);var EB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){EB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(Mt(_t.groupedBarChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new Tv(this.model,this.services),new Cr(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.VERT_OR_HORIZ})],r=this.getAxisChartComponents(e);return r},n})(Kt);var SB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){SB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(Mt(_t.stackedBarChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new lo(this.model,this.services),new wv(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.VERT_OR_HORIZ}),new Cr(this.model,this.services)],r=this.getAxisChartComponents(e);return r},n})(Kt);var MB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),AB=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},CB=function(t){MB(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getBoxQuartiles=function(e){return{q_25:zo(e,.25),q_50:zo(e,.5),q_75:zo(e,.75)}},n.prototype.getBoxplotData=function(){for(var e=this.getOptions(),r=e.data.groupMapsTo,i=this.getGroupedData(),a=[],o=function(p,d){for(var g,m=s.services.cartesianScales.getRangeIdentifier(),y=d.map(function(C){return C[m]}).sort(Tn),v=(g={},g[r]=p,g.counts=y,g.quartiles=s.getBoxQuartiles(y),g.outliers=null,g.whiskers=null,g),_=v.quartiles.q_25,E=v.quartiles.q_75,x=(E-_)*1.5,O=_-x,P=E+x,S=[],A=[],I=0,w=y;I<w.length;I++){var N=w[I];N<O||N>P?S.push(N):A.push(N)}v.outliers=S;var T=ln(A),R=An(A);v.whiskers={min:T||ln([v.quartiles.q_25,v.quartiles.q_50,v.quartiles.q_75]),max:R||An([v.quartiles.q_25,v.quartiles.q_50,v.quartiles.q_75])},a.push(v)},s=this,l=0,u=i;l<u.length;l++){var c=u[l],f=c.name,h=c.data;o(f,h)}return a},n.prototype.getTabularDataArray=function(){var e=this.getOptions(),r=e.data.groupMapsTo,i=this.getBoxplotData(),a=AB([["Group","Minimum","Q1","Median","Q3","Maximum","IQR","Outlier(s)"]],i.map(function(o){var s=b(o,"outliers");return(s===null||s.length===0)&&(s=["&ndash;"]),[o[r],b(o,"whiskers","min")!==null?b(o,"whiskers","min").toLocaleString():"&ndash;",b(o,"quartiles","q_25")!==null?b(o,"quartiles","q_25").toLocaleString():"&ndash;",b(o,"quartiles","q_50")!==null?b(o,"quartiles","q_50").toLocaleString():"&ndash;",b(o,"quartiles","q_75")!==null?b(o,"quartiles","q_75").toLocaleString():"&ndash;",b(o,"whiskers","max")!==null?b(o,"whiskers","max").toLocaleString():"&ndash;",b(o,"quartiles","q_75")!==null&&b(o,"quartiles","q_25")!==null?(b(o,"quartiles","q_75")-b(o,"quartiles","q_25")).toLocaleString():"&ndash;",s.map(function(l){return l.toLocaleString()}).join(",")]}));return a},n.prototype.setColorClassNames=function(){var e=1,r=b(this.getOptions(),"color","pairing"),i=b(r,"option"),a=Zl.pairingOptions;i=i<=a[e+"-color"]?i:1;var o=this.allDataGroups.map(function(s,l){return e+"-"+i+"-1"});this.colorClassNames=bo().range(o).domain(this.allDataGroups)},n}(Un),DB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){DB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new CB(i.services),i.model.setOptions(Mt(_t.boxplotChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new I2(this.model,this.services),new Cr(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.VERT_OR_HORIZ})],r=this.getAxisChartComponents(e,{legend:{enabled:!1}});return r},n})(Kt);var LB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){LB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(Mt(_t.bubbleChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new fn(this.model,this.services),new B2(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Kt);var PB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),RB=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},IB=function(t){PB(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getMatchingRangeIndexForDatapoint=function(e){for(var r,i=e.ranges.length-1;i>0;i--){var a=e.ranges[i];if(e.value>=a)return r=i,r}return 0},n.prototype.getTabularDataArray=function(){var e=this,r=this.getDisplayData(),i=this.getOptions(),a=i.data.groupMapsTo,o=this.services.cartesianScales.getRangeIdentifier(),s=b(i,"bullet","performanceAreaTitles"),l=RB([["Title","Group","Value","Target","Percentage","Performance"]],r.map(function(u){return[u.title,u[a],u.value===null?"&ndash;":u.value,b(u,"marker")===null?"&ndash;":u.marker,b(u,"marker")===null?"&ndash;":Math.floor(u[o]/u.marker*100)+"%",s[e.getMatchingRangeIndexForDatapoint(u)]]}));return l},n}(Un),kB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){kB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new IB(i.services),i.model.setOptions(Mt(_t.bulletChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new $2(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Kt);var NB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ms=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},BB=function(t){NB(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getTabularDataArray=function(){var e=this.getOptions(),r=e.data.groupMapsTo,i=this.getBinnedStackedData(),a=ms([ms([bt(e,"bins.rangeLabel")||"Range"],i.map(function(o){return bt(o,"0."+r)}))],bt(i,0).map(function(o,s){return ms([bt(o,"data.x0")+" – "+bt(o,"data.x1")],i.map(function(l){return bt(l[s],"data."+bt(l[s],r))}))}));return a},n}(Un),UB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){UB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new BB(i.services),i.model.setOptions(Mt(_t.histogramChart,r.options)),i.init(e,r),i.update(),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new pB(this.model,this.services),new H2(this.model,this.services)],r=this.getAxisChartComponents(e);return r},n})(Kt);var $B=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dh=function(t){$B(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(Mt(_t.lineChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new fn(this.model,this.services),new lr(this.model,this.services),new Se(this.model,this.services,{handleThresholds:!0}),new tL(this.model,this.services),new Cr(this.model,this.services)],r=this.getAxisChartComponents(e);return r},n}(Kt),VB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){VB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(Mt(_t.lollipopChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new fn(this.model,this.services),new z2(this.model,this.services),new Se(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Kt);var HB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){HB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(Mt(_t.scatterChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new ie(this.model,this.services),new fn(this.model,this.services),new Se(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Kt);var FB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),GB=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},zB=function(t){FB(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularData=function(e){var r=t.prototype.getTabularData.call(this,e);return e!==r&&r.forEach(function(i){i.key&&i.key!==i.group&&(i.group=i.key)}),r},n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=this.getOptions(),i=r.data.groupMapsTo,a=GB([["Group","Value"]],e.map(function(o){return[o[i],o.value===null?"&ndash;":o.value.toLocaleString()]}));return a},n.prototype.sanitize=function(e){var r=this.getTabularData(e);return r.sort(function(i,a){return a.value-i.value})},n}(Ze),WB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jB=function(t){WB(n,t);function n(e,r,i){i===void 0&&(i=!1);var a=t.call(this,e,r)||this;return a.model=new zB(a.services),i||(a.model.setOptions(Mt(_t.pieChart,r.options)),a.init(e,r)),a}return n.prototype.getComponents=function(){var e=[new Sv(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.PIE})],r=this.getChartComponents(e);return r},n}(Le),qB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){qB(n,t);function n(e,r){var i=t.call(this,e,r,!0)||this;return i.model.setOptions(Mt(_t.donutChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new K2(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.DONUT})],r=this.getChartComponents(e);return r},n})(jB);var YB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ys=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},XB=function(t){YB(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getMaximumDomain=function(e){var r=e.reduce(function(i,a){return i+a.value},0);return r},n.prototype.getFillColor=function(e){var r=this.getOptions(),i=b(r,"color","scale"),a=this.getStatus();return i||!a?t.prototype.getFillColor.call(this,e):null},n.prototype.getStatus=function(){var e=this.getOptions(),r=b(this.getDisplayData()),i=(r?r.reduce(function(l,u){return{value:l.value+u.value}}):0).value,a=b(e,"meter","proportional")?i:i>100?100:i,o=b(e,"meter","status","ranges");if(o){var s=o.filter(function(l){return l.range[0]<=a&&a<=l.range[1]});if(s.length>0)return s[0].status}return null},n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=this.getOptions(),i=r.data.groupMapsTo,a=this.getStatus(),o=b(r,"meter","proportional"),s=[],l;if(o===null){l=100;var u=e[0];s=[ys(["Group","Value"],a?["Status"]:[]),ys([u[i],u.value],a?[a]:[])]}else{var c=b(o,"total");l=c||this.getMaximumDomain(e),s=ys([["Group","Value","Percentage of total"]],e.map(function(f){return[f[i],f.value,(f.value/l*100).toFixed(2)+" %"]}))}return s},n}(Ze),ZB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tr=globalThis&&globalThis.__assign||function(){return tr=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tr.apply(this,arguments)},KB=function(t){ZB(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="meter",e.renderType=Q.SVG,e}return n.prototype.getStackedBounds=function(e,r){var i=0,a=e.map(function(o,s){return s!==0?(i+=r(o.value),tr(tr({},o),{width:Math.abs(r(o.value)-kt.dividerWidth),x:i-r(o.value)})):(i=r(o.value),tr(tr({},o),{width:Math.abs(r(o.value)-kt.dividerWidth),x:0}))});return a},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this,a=this.getComponentContainer(),o=this.getOptions(),s=b(o,"meter","proportional"),l=this.model.getDisplayData(),u=this.model.getStatus(),c=U.getSVGElementSize(a,{useAttrs:!0}).width,f=o.data.groupMapsTo,h;if(b(o,"meter","proportional")===null)h=100;else{var p=b(o,"meter","proportional","total");h=p||this.model.getMaximumDomain(this.model.getDisplayData())}var d=Ce().domain([0,h]).range([0,c]),g=this.getStackedBounds(l,d),m=b(o,"meter","height");U.appendOrSelect(a,"rect.container").attr("x",0).attr("y",0).attr("width",c).attr("height",m||(s?kt.height.proportional:kt.height.default)),U.appendOrSelect(a,"line.rangeIndicator").attr("x1",c).attr("x2",c).attr("y1",0).attr("y2",m||(s?kt.height.proportional:kt.height.default));var y=a.selectAll("rect.value").data(g),v=u!=null&&!i.model.isUserProvidedColorScaleValid()&&!s?"value status--"+u:"value";y.enter().append("rect").classed("value",!0).merge(y).attr("x",function(O){return O.x}).attr("y",0).attr("height",function(){var O=b(o,"meter","height");return O||(s?kt.height.proportional:kt.height.default)}).attr("class",function(O){return r.model.getColorClassName({classNameTypes:[J.FILL],dataGroupName:O[f],originalClassName:v})}).transition().call(function(O){return r.services.transitions.setupTransition({transition:O,name:"meter-bar-update",animate:e})}).attr("width",function(O,P){return O.value>h?d(h):O.width}).style("fill",function(O){return i.model.getFillColor(O[f])}).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",function(O){return O.value}),y.exit().remove();var _=b(o,"meter","peak"),E=_;_!==null&&(_>h?E=h:_<l[0].value&&(E=l[0].value>h?h:l[0].value));var x=a.selectAll("line.peak").data(E==null?[]:[E]);x.enter().append("line").classed("peak",!0).merge(x).attr("y1",0).attr("y2",function(){var O=b(o,"meter","height");return O||(s?kt.height.proportional:kt.height.default)}).transition().call(function(O){return r.services.transitions.setupTransition({transition:O,name:"peak-line-update",animate:e})}).attr("x1",function(O){return d(O)}).attr("x2",function(O){return d(O)}).attr("role",nt.GRAPHICS_SYMBOL).attr("aria-roledescription","peak").attr("aria-label",function(O){return O}),x.exit().remove(),this.services.domUtils.setSVGMaxHeight(),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this.getOptions(),r=e.data.groupMapsTo,i=this,a=b(e,"meter","proportional");this.parent.selectAll("rect.value").on("mouseover",function(o,s){var l=B(this);i.services.events.dispatchEvent(M.Meter.METER_MOUSEOVER,{event:o,element:l,datum:s}),a&&(l.classed("hovered",!0),i.services.events.dispatchEvent(M.Tooltip.SHOW,{event:o,hoveredElement:l,items:[{label:s[r],value:s.value}]}))}).on("mousemove",function(o,s){var l=B(this);i.services.events.dispatchEvent(M.Meter.METER_MOUSEMOVE,{event:o,element:l,datum:s}),a&&i.services.events.dispatchEvent(M.Tooltip.MOVE,{event:o})}).on("click",function(o,s){i.services.events.dispatchEvent(M.Meter.METER_CLICK,{event:o,element:B(this),datum:s})}).on("mouseout",function(o,s){var l=B(this);i.services.events.dispatchEvent(M.Meter.METER_MOUSEOUT,{event:o,element:l,datum:s}),a&&(l.classed("hovered",!1),i.services.events.dispatchEvent(M.Tooltip.HIDE,{hoveredElement:l}))})},n.prototype.destroy=function(){this.parent.selectAll("rect.value").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null)},n}(ct),QB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),JB=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r};(function(t){QB(n,t);function n(e,r){var i=t.call(this,e,r)||this;i.model=new XB(i.services);var a=r.options.meter.proportional?et(Ge(_t.proportionalMeterChart),r.options):et(Ge(_t.meterChart),r.options);return i.model.setOptions(a),i.init(e,r),i}return n.prototype.getComponents=function(){var e=b(this.model.getOptions(),"meter","showLabels"),r=JB(e?[{id:"meter-title",components:[new y2(this.model,this.services)],growth:st.STRETCH,renderType:Q.SVG},{id:"spacer",components:[new Dn(this.model,this.services,{size:8})],growth:st.STRETCH}]:[],[{id:"meter-graph",components:[new KB(this.model,this.services)],growth:st.STRETCH,renderType:Q.SVG}]),i=[new Me(this.model,this.services,r,{direction:wt.COLUMN})],a=this.getChartComponents(i,{graphFrameRenderType:Q.HTML});return a},n})(Le);var tU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_s=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},eU=function(t){tU(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularDataArray=function(){var e=this.getOptions(),r=this.getGroupedData(),i=b(e,"radar","axes"),a=i.angle,o=i.value,s=b(r,"0","data").map(function(u){return u[a]}),l=_s([_s(["Group"],s)],r.map(function(u){return _s([u.name],s.map(function(c,f){return b(u,"data",f,o)!==null?b(u,"data",f,o).toLocaleString():"&ndash;"}))}));return l},n}(Un),nU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){nU(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new eU(i.services),i.model.setOptions(Mt(_t.radarChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new NI(this.model,this.services)],r=this.getChartComponents(e);return r},n})(Le);var rU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),iU=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},aU=function(t){rU(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getDataGroups=function(){return t.prototype.getDataGroups.call(this).filter(function(e){return e.name!=="delta"})},n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=this.getOptions(),i=r.data.groupMapsTo,a=iU([["Group","Value"]],e.map(function(o){return[o[i],o.value===null?"&ndash;":o.value.toLocaleString()]}));return a},n}(Ze),oU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){oU(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new aU(i.services),i.model.setOptions(Mt(_t.gaugeChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new X2(this.model,this.services)],r=this.getChartComponents(e);return r},n})(Le);var sU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lU=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},ke,Lh=(ke={},ke[Jt.LINE]=[lr,Se],ke[Jt.SCATTER]=[Se],ke[Jt.AREA]=[xv,lr,Se],ke[Jt.STACKED_AREA]=[bv,lr,Ev,lo],ke[Jt.SIMPLE_BAR]=[Ov],ke[Jt.GROUPED_BAR]=[Tv,Cr],ke[Jt.STACKED_BAR]=[wv,lo],ke);(function(t){sU(n,t);function n(e,r){var i=t.call(this,e,r)||this,a=Mt(_t.comboChart,r.options);return r.options.comboChartTypes||(console.error("No comboChartTypes defined for the Combo Chart!"),a.comboChartTypes=[{type:Jt.LINE,correspondingDatasets:[]}]),i.model.setOptions(a),i.init(e,r),i}return n.prototype.getGraphComponents=function(){var e=this,r=this.model.getOptions().comboChartTypes,i=0,a=r.map(function(o){var s=o.type,l;if(typeof o.type=="string"){if(!Object.keys(Lh).includes(o.type))return console.error('Invalid chart type "'+o.type+'" specified for combo chart. Please refer to the ComboChart tutorial for more guidance.'),null;var u;return l=et({},_t[B_(o.type)+"Chart"],e.model.getOptions(),o.options),o.type===Jt.STACKED_AREA&&(u=!0),Lh[o.type].map(function(c,f){return new c(e.model,e.services,{groups:o.correspondingDatasets,id:i++,options:l,stacked:u})})}else return l=et({},e.model.getOptions(),o.options),new s(e.model,e.services,{groups:o.correspondingDatasets,id:i++,options:l})}).filter(function(o){return o!==null});return sd(a)},n.prototype.getComponents=function(){var e=this.model.getOptions().comboChartTypes,r=e.some(function(o){return o.type===Jt.STACKED_BAR||o.type===Jt.STACKED_AREA}),i=lU([new Zt(this.model,this.services),new ie(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.GRID})],r?[]:[new fn(this.model,this.services)],this.getGraphComponents()),a=this.getAxisChartComponents(i);return a},n})(Kt);var uU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cU=function(t){uU(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularDataArray=function(){var e=this,r=this.getDisplayData(),i=[["Child","Parent"]];return r.forEach(function(a){e.getChildrenDatums(a,i),i.push([a.name,"&ndash;"])}),i},n.prototype.getChildrenDatums=function(e,r){var i=this;r===void 0&&(r=[]),e.children&&e.children.length>0&&e.children.forEach(function(a){i.getChildrenDatums(a,r),r.push([a.name,e.name])})},n}(Ze),fU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){fU(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new cU(i.services),i.model.setOptions(Mt(_t.treeChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new nP(this.model,this.services)],r=this.getChartComponents(e,{excludeLegend:!0});return r},n})(Le);var hU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dU=function(t){hU(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=[["Child","Group","Value"]];return e.forEach(function(i){Array.isArray(i.children)?i.children.forEach(function(a){r.push([a.name,i.name,a.value])}):b(i.name)!==null&&b(i.value)&&r.push(["–",i.name,i.value])}),r},n}(Ze),pU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){pU(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new dU(i.services),i.model.setOptions(Mt(_t.treemapChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new PI(this.model,this.services)],r=this.getChartComponents(e);return r},n})(Le);var vU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),er=globalThis&&globalThis.__assign||function(){return er=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},er.apply(this,arguments)},gU=function(t){vU(n,t);function n(e){var r=t.call(this,e)||this;return r.parentNode=!1,r.set({depth:2},{skipUpdate:!0}),r}return n.prototype.setData=function(e){t.prototype.setData.call(this,e),this.setDataGroups(),e.length===1&&(this.parentNode=!0),this.setZoom()},n.prototype.setOptions=function(e){var r=this.getOptions(),i=et({},e,this.getZoomOptions(e));hu(r,i);var a=this.getHierarchyLevel(),o=b(r,"circlePack","hierarchyLevel");this.set({options:et(r,i),depth:o&&o<4?o:a})},n.prototype.getZoomOptions=function(e){if(!this.getDisplayData())return{};var r=this.getDisplayData(),i=e||this.getOptions(),a=r.length===1&&b(r,0,"children")?b(r,0,"children"):r,o=this.getHierarchyLevel();return a.some(function(s){if(s.children&&s.children.some(function(l){return l.children}))return o=3,!1}),b(i,"canvasZoom","enabled")===!0&&o>2?{legend:{additionalItems:[{type:Ct.ZOOM,name:"Click to zoom"}]}}:null},n.prototype.setZoom=function(e){this.setOptions(this.getZoomOptions(e))},n.prototype.updateHierarchyLevel=function(e){this.set({depth:e})},n.prototype.getHierarchyLevel=function(){return this.get("depth")},n.prototype.hasParentNode=function(){return this.parentNode},n.prototype.setDataGroups=function(){var e=this,r=this.getData(),i=this.getOptions(),a=i.data.groupMapsTo,o=r.map(function(s){var l=s[a];return e.setChildrenDataGroup(s,l)});this.set({data:o},{skipUpdate:!0})},n.prototype.setChildrenDataGroup=function(e,r){var i=this;return e.children?er(er({},e),{dataGroupName:r,children:e.children.map(function(a,o){return i.setChildrenDataGroup(a,r)})}):er(er({},e),{dataGroupName:r})},n.prototype.getTabularDataArray=function(){var e=this,r=this.getDisplayData(),i=[["Child","Parent","Value"]];return r.forEach(function(a){var o=a.value?a.value:0;a.children&&(o+=e.getChildrenDatums(a.children,a.name,i,0)),i.push(["&ndash;",a.name,o])}),i},n.prototype.getChildrenDatums=function(e,r,i,a){var o=this;i===void 0&&(i=[]),a===void 0&&(a=0);var s=r;return e.forEach(function(l){var u=l.name,c=0;if(l.children)l.children.length>0&&(typeof l.value=="number"&&(a+=l.value),c+=o.getChildrenDatums(l.children,u,i,c),i.push([u,s,c]),a+=c);else{var f=0;typeof l.value=="number"&&(f=l.value,a+=l.value),i.push([l.name,s,f])}}),a},n}(Ze),mU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){mU(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new gU(i.services),i.model.setOptions(Mt(_t.circlePackChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new $I(this.model,this.services)],r=this.getChartComponents(e);return r},n})(Le);var yU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_U=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},xU=function(t){yU(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=this.getOptions(),i=r.wordCloud,a=i.fontSizeMapsTo,o=i.wordMapsTo,s=r.data.groupMapsTo,l=_U([[r.tooltip.wordLabel,"Group",r.tooltip.valueLabel]],e.map(function(u){return[u[o],u[s],u[a]]}));return l},n}(Ze),bU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){bU(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new xU(i.services),i.model.setOptions(Mt(_t.wordCloudChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new sk(this.model,this.services),new qt(this.model,this.services,{skeleton:Dt.PIE})],r=this.getChartComponents(e);return r},n})(Le);var OU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),TU=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},wU=function(t){OU(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularDataArray=function(){var e=this.getDisplayData();e.sort(function(i,a){return i.source.localeCompare(a.source)});var r=TU([["Source","Target","Value"]],e.map(function(i){return[i.source,i.target,i.value]}));return r},n}(Un),EU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){EU(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new wU(i.services),i.model.setOptions(Mt(_t.alluvialChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Ak(this.model,this.services)],r=this.getChartComponents(e,{excludeLegend:!0});return r},n})(Le);var SU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MU=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},AU=function(t){SU(n,t);function n(e){var r=t.call(this,e)||this;r.axisFlavor=li.HOVERABLE,r._colorScale=void 0,r._domains=[],r._ranges=[],r._matrix={};var i=b(r.getOptions(),"axes");if(b(i,"left","scaleType")&&b(i,"left","scaleType")!==K.LABELS||b(i,"right","scaleType")&&b(i,"right","scaleType")!==K.LABELS||b(i,"top","scaleType")&&b(i,"top","scaleType")!==K.LABELS||b(i,"bottom","scaleType")&&b(i,"bottom","scaleType")!==K.LABELS)throw Error("Heatmap only supports label scaletypes.");return r}return n.prototype.getValueDomain=function(){var e=we(this.getDisplayData(),function(i){return i.value}),r=Ce().domain(e).nice().domain();if(r[0]>0)r[0]=0;else if(r[0]===0&&r[1]===0)return[0,1];return r[0]<0&&r[1]>0&&(Math.abs(r[0])>r[1]?r[1]=Math.abs(r[0]):r[0]=-r[1]),r},n.prototype.getFillColor=function(e){return this._colorScale(e)},n.prototype.getUniqueDomain=function(){if(_n(this._domains)){var e=this.getDisplayData(),r=this.services.cartesianScales,i=r.getDomainIdentifier(),a=r.getMainXAxisPosition(),o=r.getCustomDomainValuesByposition(a);if(o)return o;this._domains=Array.from(new Set(e.map(function(s){return s[i]})))}return this._domains},n.prototype.getUniqueRanges=function(){if(_n(this._ranges)){var e=this.getDisplayData(),r=this.services.cartesianScales,i=r.getRangeIdentifier(),a=r.getMainYAxisPosition(),o=r.getCustomDomainValuesByposition(a);if(o)return o;this._ranges=Array.from(new Set(e.map(function(s){return s[i]})))}return this._ranges},n.prototype.getMatrix=function(){var e=this;if(_n(this._matrix)){var r=this.getUniqueDomain(),i=this.getUniqueRanges(),a=this.services.cartesianScales.getDomainIdentifier(),o=this.services.cartesianScales.getRangeIdentifier(),s={};i.forEach(function(l){s[l]={value:null,index:-1}}),r.forEach(function(l){e._matrix[l]=Ge(s)}),this.getDisplayData().forEach(function(l,u){e._matrix[l[a]][l[o]]={value:l.value,index:u}})}return this._matrix},n.prototype.setData=function(e){var r=this.sanitize(Ge(e)),i=this.generateDataGroups(r);return this.set({data:r,dataGroups:i}),this._domains=[],this._ranges=[],this._matrix={},r},n.prototype.getMatrixAsArray=function(){var e=this;_n(this._matrix)&&this.getMatrix();var r=this.getUniqueDomain(),i=this.getUniqueRanges(),a=this.services.cartesianScales.getDomainIdentifier(),o=this.services.cartesianScales.getRangeIdentifier(),s=[];return r.forEach(function(l){i.forEach(function(u){var c={value:e._matrix[l][u].value,index:e._matrix[l][u].index};c[a]=l,c[o]=u,s.push(c)})}),s},n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=this.assignRangeAndDomains(),i=r.primaryDomain,a=r.primaryRange,o=MU([[i.label,a.label,"Value"]],e.map(function(s){return[s[i.identifier]===null?"&ndash;":s[i.identifier],s[a.identifier]===null?"&ndash;":s[a.identifier].toLocaleString(),s.value]}));return o},n.prototype.getColorClassName=function(e){return e.originalClassName+" "+this._colorScale(e.value)},n.prototype.setColorClassNames=function(){var e=this.getOptions(),r=b(e,"color","gradient","colors"),i=!_n(r),a=b(e,"color","pairing","option"),o=this.getValueDomain(),s=o[0]<0&&o[1]>0?"diverge":"mono";(a<1&&a>4&&s==="mono"||a<1&&a>2&&s==="diverge")&&(a=1);var l=i?r:[];if(!i)for(var u=s==="diverge"?17:11,c=1;c<u+1;c++)l.push("fill-"+s+"-"+a+"-"+c);this._colorScale=Rp().domain(o).range(l)},n}(Un),CU=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ph=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r};(function(t){CU(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new AU(i.services),i.model.setOptions(Mt(_t.heatmapChart,r.options)),i.init(e,r),i}return n.prototype.getAxisChartComponents=function(e,r){var i=this.model.getOptions(),a=b(i,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();var o=!!this.model.getOptions().title,s={id:"title",components:[new Ro(this.model,this.services)],growth:st.STRETCH},l={id:"toolbar",components:[new Yu(this.model,this.services)],growth:st.PREFERRED},u={id:"header",components:[new Me(this.model,this.services,Ph([s],a?[l]:[]),{direction:wt.ROW,alignItems:dr.CENTER})],growth:st.PREFERRED},c={id:"legend",components:[new eD(this.model,this.services)],growth:st.PREFERRED,renderType:Q.SVG},f={id:"graph-frame",components:e,growth:st.STRETCH,renderType:Q.SVG},h=b(r,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1,p=wt.COLUMN_REVERSE,d={id:"spacer",components:[new Dn(this.model,this.services,{size:15})],growth:st.PREFERRED},g={id:"full-frame",components:[new Me(this.model,this.services,Ph(h?[c]:[],h?[d]:[],[f]),{direction:p})],growth:st.STRETCH},m=[];if(o||a){m.push(u);var y={id:"spacer",components:[new Dn(this.model,this.services,a?{size:15}:void 0)],growth:st.PREFERRED};m.push(y)}return m.push(g),[new yv(this.model,this.services),new Fu(this.model,this.services),new Me(this.model,this.services,m,{direction:wt.COLUMN})]},n.prototype.getComponents=function(){var e=[new Zt(this.model,this.services),new Dk(this.model,this.services)],r=this.getAxisChartComponents(e);return r},n})(Kt);function DU(t){let n,e=[t[3],{"data-carbon-theme":t[1]},{id:t[2]}],r={};for(let i=0;i<e.length;i+=1)r=ur(r,e[i]);return{c(){n=se("div"),Ju(n,r)},m(i,a){cr(i,n,a),t[8](n)},p(i,[a]){Ju(n,r=Uh(e,[a&8&&i[3],a&2&&{"data-carbon-theme":i[1]},a&4&&{id:i[2]}]))},i:Fe,o:Fe,d(i){i&&on(n),t[8](null)}}}function LU(t,n,e){const r=["Chart","chart","data","options","theme","id","ref"];let i=ha(n,r),{Chart:a=void 0}=n,{chart:o=null}=n,{data:s=[]}=n,{options:l={}}=n,{theme:u="white"}=n,{id:c="chart-"+Math.random().toString(36)}=n,{ref:f=null}=n;const h=Jv();Qv(()=>{const d=f||document.getElementById(c);return d&&(e(4,o=new a(d,{data:s,options:l})),h("load",o)),()=>{o&&(o.components.forEach(g=>g.destroy()),e(4,o=null),h("destroy"))}});function p(d){fr[d?"unshift":"push"](()=>{f=d,e(0,f)})}return t.$$set=d=>{n=ur(ur({},n),kh(d)),e(3,i=ha(n,r)),"Chart"in d&&e(5,a=d.Chart),"chart"in d&&e(4,o=d.chart),"data"in d&&e(6,s=d.data),"options"in d&&e(7,l=d.options),"theme"in d&&e(1,u=d.theme),"id"in d&&e(2,c=d.id),"ref"in d&&e(0,f=d.ref)},t.$$.update=()=>{t.$$.dirty&210&&o&&(o.model.setData(s),o.model.setOptions({theme:u,...l}),h("update",{data:s,options:l}))},[f,u,c,i,o,a,s,l,p]}class PU extends wi{constructor(n){super(),Ti(this,n,LU,DU,Oi,{Chart:5,chart:4,data:6,options:7,theme:1,id:2,ref:0})}}function RU(t){let n,e,r,i;const a=[t[2],{Chart:Dh}];function o(u){t[3](u)}function s(u){t[4](u)}let l={};for(let u=0;u<a.length;u+=1)l=ur(l,a[u]);return t[1]!==void 0&&(l.ref=t[1]),t[0]!==void 0&&(l.chart=t[0]),n=new PU({props:l}),fr.push(()=>ws(n,"ref",o)),fr.push(()=>ws(n,"chart",s)),n.$on("load",t[5]),n.$on("update",t[6]),n.$on("destroy",t[7]),{c(){pa(n.$$.fragment)},m(u,c){ai(n,u,c),i=!0},p(u,[c]){const f=c&4?Uh(a,[c&4&&ag(u[2]),c&0&&{Chart:Dh}]):{};!e&&c&2&&(e=!0,f.ref=u[1],Ts(()=>e=!1)),!r&&c&1&&(r=!0,f.chart=u[0],Ts(()=>r=!1)),n.$set(f)},i(u){i||(ii(n.$$.fragment,u),i=!0)},o(u){da(n.$$.fragment,u),i=!1},d(u){oi(n,u)}}}function IU(t,n,e){const r=["chart","ref"];let i=ha(n,r),{chart:a=null}=n,{ref:o=null}=n;function s(h){o=h,e(1,o)}function l(h){a=h,e(0,a)}function u(h){Bo.call(this,t,h)}function c(h){Bo.call(this,t,h)}function f(h){Bo.call(this,t,h)}return t.$$set=h=>{n=ur(ur({},n),kh(h)),e(2,i=ha(n,r)),"chart"in h&&e(0,a=h.chart),"ref"in h&&e(1,o=h.ref)},[a,o,i,s,l,u,c,f]}class kU extends wi{constructor(n){super(),Ti(this,n,IU,RU,Oi,{chart:0,ref:1})}}function NU(t){let n,e;return n=new kU({props:{data:t[0],options:{title:"Sensor Fusion",axes:{bottom:{title:"Time (ms)",mapsTo:"time_ms",scaleType:"linear"},left:{mapsTo:"value",title:"Roll, Pitch, Yaw (degrees)",scaleType:"linear"}},curve:"curveMonotoneX",height:"720px"}}}),{c(){pa(n.$$.fragment)},m(r,i){ai(n,r,i),e=!0},p(r,[i]){const a={};i&1&&(a.data=r[0]),n.$set(a)},i(r){e||(ii(n.$$.fragment,r),e=!0)},o(r){da(n.$$.fragment,r),e=!1},d(r){oi(n,r)}}}function BU(t,n,e){let r,{sessionData:i}=n;const a=o=>{if(console.log("parsing sensor data"),!o)return;console.log("data",o);let s=[];return o.forEach(l=>{s.push({group:"roll",time_ms:l.time_ms,value:l.roll}),s.push({group:"pitch",time_ms:l.time_ms,value:l.pitch}),s.push({group:"yaw",time_ms:l.time_ms,value:l.yaw})}),console.log("parsedData",s),s};return t.$$set=o=>{"sessionData"in o&&e(1,i=o.sessionData)},t.$$.update=()=>{t.$$.dirty&2&&e(0,r=a(i))},[r,i]}class UU extends wi{constructor(n){super(),Ti(this,n,BU,NU,Oi,{sessionData:1})}}function $U(t){let n,e,r,i,a,o,s,l;function u(f){t[1](f)}let c={};return t[0]!==void 0&&(c.sessionData=t[0]),i=new gg({props:c}),fr.push(()=>ws(i,"sessionData",u)),s=new UU({props:{sessionData:t[0]}}),{c(){n=se("meta"),e=Be(),r=se("main"),pa(i.$$.fragment),o=Be(),pa(s.$$.fragment),document.title="Sensor Data",ni(n,"name","description"),ni(n,"content","Svelte demo app")},m(f,h){It(document.head,n),cr(f,e,h),cr(f,r,h),ai(i,r,null),It(r,o),ai(s,r,null),l=!0},p(f,[h]){const p={};!a&&h&1&&(a=!0,p.sessionData=f[0],Ts(()=>a=!1)),i.$set(p);const d={};h&1&&(d.sessionData=f[0]),s.$set(d)},i(f){l||(ii(i.$$.fragment,f),ii(s.$$.fragment,f),l=!0)},o(f){da(i.$$.fragment,f),da(s.$$.fragment,f),l=!1},d(f){on(n),f&&on(e),f&&on(r),oi(i),oi(s)}}}function VU(t,n,e){let r;function i(a){r=a,e(0,r)}return[r,i]}class HU extends wi{constructor(n){super(),Ti(this,n,VU,$U,Oi,{})}}new HU({target:document.getElementById("app")})});export default FU();
